<!DOCTYPE html>


<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RFC 5996 - Internet Key Exchange Protocol Version 2 (IKEv2) 日本語訳</title>

  
  <link rel="shortcut icon" type="image/x-icon" href="https://tex2e.github.io/rfc-translater/favicon.ico" />
  <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>

</head>
<body>
  
  <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC Trans</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="draft/index.html">Draft</a>
        <a class="nav-item nav-link" href="contact.html">Contact</a>
        <a class="nav-item nav-link" href="../figs/html/index.html">Figs</a>
      </div>
      <div class="navbar-nav ml-auto">
        <span class="navbar-text"><small>@tex2e</small></span>
      </div>
    </div>
  </nav>

  <span id="rfc_number" class="hidden">5996</span>
  <div style="height: 1ex;"></div>
  <div class="jump-to-original-rfc-container">
    <a href="https://datatracker.ietf.org/doc/html/rfc5996">
      <button type="button" class="btn btn-light btn-sm">
        <span class="jump-to-original-rfc">Orig</span>
      </button>
    </a>
  </div>
  <div class="container">
    <div>
      <div class="alert alert-info" role="alert">
        <h4 class="alert-heading">RFC 5996 - Internet Key Exchange Protocol Version 2 (IKEv2) 日本語訳</h4>
        <span class="URL">原文URL :
          <a href="https://datatracker.ietf.org/doc/html/rfc5996">
            https://datatracker.ietf.org/doc/html/rfc5996
          </a>
        </span><br>
        <span class="title_ja">
          タイトル : <strong>RFC 5996 - インターネットキー交換プロトコルバージョン2（IKEV2）</strong></span><br>
        <span class="updated_by">翻訳編集 : 自動生成</span><span id="rfc_status"></span><span id="rfc_wg"></span><br>
      </div>
      <div id="rfc_alert" class="hidden" role="alert">
        <div class="alert alert-danger">
          <span id="rfc_alert_obsoleted_by"></span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
Internet Engineering Task Force (IETF)                        C. Kaufman
Request for Comments: 5996                                     Microsoft
Obsoletes: 4306, 4718                                         P. Hoffman
Category: Standards Track                                 VPN Consortium
ISSN: 2070-1721                                                   Y. Nir
                                                             Check Point
                                                               P. Eronen
                                                             Independent
                                                          September 2010
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Internet Key Exchange Protocol Version 2 (IKEv2)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
インターネットキー交換プロトコルバージョン2（IKEV2）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Abstract
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
概要
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes version 2 of the Internet Key Exchange (IKE) protocol. IKE is a component of IPsec used for performing mutual authentication and establishing and maintaining Security Associations (SAs). This document replaces and updates RFC 4306, and includes all of the clarifications from RFC 4718.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでは、インターネットキーエクスチェンジ（IKE）プロトコルのバージョン2について説明します。IKEは、相互認証の実行とセキュリティ協会（SAS）の確立と維持に使用されるIPSECのコンポーネントです。このドキュメントは、RFC 4306を置き換えて更新し、RFC 4718からのすべての説明を含んでいます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Status of This Memo
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
本文書の位置付け
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This is an Internet Standards Track document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これは、インターネット標準トラックドキュメントです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、インターネットエンジニアリングタスクフォース（IETF）の製品です。IETFコミュニティのコンセンサスを表しています。公開レビューを受けており、インターネットエンジニアリングステアリンググループ（IESG）からの出版が承認されています。インターネット標準の詳細については、RFC 5741のセクション2で入手できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc5996.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントの現在のステータス、任意のERRATA、およびそのフィードバックを提供する方法に関する情報は、http：//www.rfc-editor.org/info/rfc5996で取得できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Copyright Notice
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
著作権表示
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright (c) 2010 IETF Trust and the persons identified as the document authors. All rights reserved.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Copyright（c）2010 IETF Trustおよび文書著者として特定された人。全著作権所有。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is subject to BCP 78 and the IETF Trust&#39;s Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、BCP 78およびIETFドキュメント（http://trustee.ietf.org/license-info）に関連するIETF Trustの法的規定の対象となります。この文書に関するあなたの権利と制限を説明するので、これらの文書を注意深く確認してください。このドキュメントから抽出されたコードコンポーネントには、セクション4.Eで説明されている法的規定のセクション4.Eで説明されており、単純化されたBSDライセンスで説明されているように保証なしで提供される簡略化されたBSDライセンステキストを含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008. The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントには、2008年11月10日までに公開または公開されたIETFドキュメントまたはIETFの寄付からの資料が含まれている場合があります。IETF標準プロセスの外。そのような資料の著作権を制御する人から適切なライセンスを取得せずに、このドキュメントはIETF標準プロセスの外側に変更されない場合があり、その派生作業は、ITF標準プロセスの外側で作成されない場合があります。RFCとしての出版またはそれを英語以外の言語に翻訳するため。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Table of Contents
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
目次
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace toc">
   1. Introduction ....................................................5
      1.1. Usage Scenarios ............................................6
           1.1.1. Security Gateway to Security Gateway in
                  Tunnel Mode .........................................7
           1.1.2. Endpoint-to-Endpoint Transport Mode .................7
           1.1.3. Endpoint to Security Gateway in Tunnel Mode .........8
           1.1.4. Other Scenarios .....................................9
      1.2. The Initial Exchanges ......................................9
      1.3. The CREATE_CHILD_SA Exchange ..............................13
           1.3.1. Creating New Child SAs with the
                  CREATE_CHILD_SA Exchange ...........................14
           1.3.2. Rekeying IKE SAs with the CREATE_CHILD_SA
                  Exchange ...........................................15
           1.3.3. Rekeying Child SAs with the CREATE_CHILD_SA
                  Exchange ...........................................16
      1.4. The INFORMATIONAL Exchange ................................17
           1.4.1. Deleting an SA with INFORMATIONAL Exchanges ........17
      1.5. Informational Messages outside of an IKE SA ...............18
      1.6. Requirements Terminology ..................................19
         1.7. Significant Differences between RFC 4306 and This
           Document ..................................................20
   2. IKE Protocol Details and Variations ............................22
      2.1. Use of Retransmission Timers ..............................23
      2.2. Use of Sequence Numbers for Message ID ....................24
      2.3. Window Size for Overlapping Requests ......................25
      2.4. State Synchronization and Connection Timeouts .............26
      2.5. Version Numbers and Forward Compatibility .................28
      2.6. IKE SA SPIs and Cookies ...................................30
           2.6.1. Interaction of COOKIE and INVALID_KE_PAYLOAD .......33
      2.7. Cryptographic Algorithm Negotiation .......................34
      2.8. Rekeying ..................................................34
           2.8.1. Simultaneous Child SA Rekeying .....................36
           2.8.2. Simultaneous IKE SA Rekeying .......................39
           2.8.3. Rekeying the IKE SA versus Reauthentication ........40
      2.9. Traffic Selector Negotiation ..............................40
           2.9.1. Traffic Selectors Violating Own Policy .............43
      2.10. Nonces ...................................................44
      2.11. Address and Port Agility .................................44
      2.12. Reuse of Diffie-Hellman Exponentials .....................44
      2.13. Generating Keying Material ...............................45
      2.14. Generating Keying Material for the IKE SA ................46
      2.15. Authentication of the IKE SA .............................47
      2.16. Extensible Authentication Protocol Methods ...............50
      2.17. Generating Keying Material for Child SAs .................52
      2.18. Rekeying IKE SAs Using a CREATE_CHILD_SA Exchange ........53
      2.19. Requesting an Internal Address on a Remote Network .......53
      2.20. Requesting the Peer&#39;s Version ............................55
      2.21. Error Handling ...........................................56
           2.21.1. Error Handling in IKE_SA_INIT .....................56
           2.21.2. Error Handling in IKE_AUTH ........................57
           2.21.3. Error Handling after IKE SA is Authenticated ......58
           2.21.4. Error Handling Outside IKE SA .....................58
      2.22. IPComp ...................................................59
      2.23. NAT Traversal ............................................60
           2.23.1. Transport Mode NAT Traversal ......................64
      2.24. Explicit Congestion Notification (ECN) ...................68
      2.25. Exchange Collisions ......................................68
           2.25.1. Collisions while Rekeying or Closing Child SAs ....69
           2.25.2. Collisions while Rekeying or Closing IKE SAs ......69
   3. Header and Payload Formats .....................................69
      3.1. The IKE Header ............................................70
      3.2. Generic Payload Header ....................................73
      3.3. Security Association Payload ..............................75
           3.3.1. Proposal Substructure ..............................78
           3.3.2. Transform Substructure .............................79
           3.3.3. Valid Transform Types by Protocol ..................82
           3.3.4. Mandatory Transform IDs ............................83
              3.3.5. Transform Attributes ...............................84
           3.3.6. Attribute Negotiation ..............................86
      3.4. Key Exchange Payload ......................................87
      3.5. Identification Payloads ...................................87
      3.6. Certificate Payload .......................................90
      3.7. Certificate Request Payload ...............................93
      3.8. Authentication Payload ....................................95
      3.9. Nonce Payload .............................................96
      3.10. Notify Payload ...........................................97
           3.10.1. Notify Message Types ..............................98
      3.11. Delete Payload ..........................................101
      3.12. Vendor ID Payload .......................................102
      3.13. Traffic Selector Payload ................................103
           3.13.1. Traffic Selector .................................105
      3.14. Encrypted Payload .......................................107
      3.15. Configuration Payload ...................................109
           3.15.1. Configuration Attributes .........................110
           3.15.2. Meaning of INTERNAL_IP4_SUBNET and
                   INTERNAL_IP6_SUBNET ..............................113
           3.15.3. Configuration Payloads for IPv6 ..................115
           3.15.4. Address Assignment Failures ......................116
      3.16. Extensible Authentication Protocol (EAP) Payload ........117
   4. Conformance Requirements ......................................118
   5. Security Considerations .......................................120
      5.1. Traffic Selector Authorization ...........................123
   6. IANA Considerations ...........................................124
   7. Acknowledgements ..............................................125
   8. References ....................................................126
      8.1. Normative References .....................................126
      8.2. Informative References ...................................127
   Appendix A. Summary of Changes from IKEv1 ........................132
   Appendix B. Diffie-Hellman Groups ................................133
     B.1. Group 1 - 768-bit MODP ....................................133
     B.2. Group 2 - 1024-bit MODP ...................................133
   Appendix C.  Exchanges and Payloads ..............................134
     C.1. IKE_SA_INIT Exchange  .....................................134
     C.2. IKE_AUTH Exchange without EAP .............................135
     C.3. IKE_AUTH Exchange with EAP  ...............................136
     C.4. CREATE_CHILD_SA Exchange for Creating or Rekeying
          Child SAs .................................................137
     C.5. CREATE_CHILD_SA Exchange for Rekeying the IKE SA ..........137
     C.6. INFORMATIONAL Exchange ....................................137
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1--Introduction">
1. Introduction
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1. はじめに
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IP Security (IPsec) provides confidentiality, data integrity, access control, and data source authentication to IP datagrams. These services are provided by maintaining shared state between the source and the sink of an IP datagram. This state defines, among other things, the specific services provided to the datagram, which cryptographic algorithms will be used to provide the services, and the keys used as input to the cryptographic algorithms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPセキュリティ（IPSEC）は、IPデータグラムに機密性、データの整合性、アクセス制御、およびデータソース認証を提供します。これらのサービスは、IPデータグラムのソースとシンクの間に共有状態を維持することにより提供されます。この状態は、とりわけ、データグラムに提供される特定のサービスを定義しています。暗号化アルゴリズムを使用してサービスを提供し、暗号化アルゴリズムへの入力として使用されるキーを定義しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Establishing this shared state in a manual fashion does not scale well. Therefore, a protocol to establish this state dynamically is needed. This document describes such a protocol -- the Internet Key Exchange (IKE). Version 1 of IKE was defined in RFCs 2407 [DOI], 2408 [ISAKMP], and 2409 [IKEV1]. IKEv2 replaced all of those RFCs. IKEv2 was defined in [IKEV2] (RFC 4306) and was clarified in [Clarif] (RFC 4718). This document replaces and updates RFC 4306 and RFC 4718. IKEv2 was a change to the IKE protocol that was not backward compatible. In contrast, the current document not only provides a clarification of IKEv2, but makes minimum changes to the IKE protocol. A list of the significant differences between RFC 4306 and this document is given in Section 1.7.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この共有状態を手動で確立することは、うまく拡張されません。したがって、この状態を動的に確立するためのプロトコルが必要です。このドキュメントでは、そのようなプロトコル - インターネットキーエクスチェンジ（IKE）について説明しています。IKEのバージョン1は、RFCS 2407 [DOI]、2408 [ISAKMP]、および2409 [IKEV1]で定義されていました。IKEV2は、これらすべてのRFCを交換しました。IKEV2は[IKEV2]（RFC 4306）で定義され、[clarif]（RFC 4718）で明確にされました。このドキュメントは、RFC 4306およびRFC 4718を置き換えて更新します。IKEV2は、後方互換ではないIKEプロトコルの変更でした。対照的に、現在のドキュメントは、IKEV2の明確化を提供するだけでなく、IKEプロトコルに最小限の変更を加えます。RFC 4306とこのドキュメントの有意差のリストは、セクション1.7に記載されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE performs mutual authentication between two parties and establishes an IKE security association (SA) that includes shared secret information that can be used to efficiently establish SAs for Encapsulating Security Payload (ESP) [ESP] or Authentication Header (AH) [AH] and a set of cryptographic algorithms to be used by the SAs to protect the traffic that they carry. In this document, the term &#34;suite&#34; or &#34;cryptographic suite&#34; refers to a complete set of algorithms used to protect an SA. An initiator proposes one or more suites by listing supported algorithms that can be combined into suites in a mix-and-match fashion. IKE can also negotiate use of IP Compression (IPComp) [IP-COMP] in connection with an ESP or AH SA. The SAs for ESP or AH that get set up through that IKE SA we call &#34;Child SAs&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは2つの当事者間で相互認証を実行し、セキュリティペイロード（ESP）[ESP]または認証ヘッダー（AH）[AH]およびAをカプセル化するためのSASを効率的に確立するために使用できる共有秘密情報を含むIKEセキュリティ協会（SA）を確立します。SASが使用するトラフィックを保護するために使用される暗号化アルゴリズムのセット。このドキュメントでは、「スイート」または「暗号化スイート」という用語は、SAを保護するために使用される完全な一連のアルゴリズムを指します。イニシエーターは、ミックスアンドマッチの方法でスイートに組み合わせることができるサポートされたアルゴリズムをリストすることにより、1つ以上のスイートを提案します。IKEは、ESPまたはAH SAに関連してIP圧縮（IPComp）[IP-Comp]の使用を交渉することもできます。私たちが「子SAS」と呼ぶIKE SAを通してセットアップされるESPまたはAHのSAS。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All IKE communications consist of pairs of messages: a request and a response. The pair is called an &#34;exchange&#34;, and is sometimes called a &#34;request/response pair&#34;. The first exchange of messages establishing an IKE SA are called the IKE_SA_INIT and IKE_AUTH exchanges; subsequent IKE exchanges are called the CREATE_CHILD_SA or INFORMATIONAL exchanges. In the common case, there is a single IKE_SA_INIT exchange and a single IKE_AUTH exchange (a total of four messages) to establish the IKE SA and the first Child SA. In exceptional cases, there may be more than one of each of these exchanges. In all cases, all IKE_SA_INIT exchanges MUST complete before any other exchange type, then all IKE_AUTH exchanges MUST complete, and following that, any number of CREATE_CHILD_SA and INFORMATIONAL exchanges may occur in any order. In some scenarios, only a single Child SA is needed between the IPsec endpoints, and therefore there would be no additional exchanges. Subsequent exchanges MAY be used to establish additional Child SAs between the same authenticated pair of endpoints and to perform housekeeping functions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのIKE通信は、リクエストと応答のペアのペアで構成されています。このペアは「Exchange」と呼ばれ、「リクエスト/応答ペア」と呼ばれることもあります。IKE SAを確立するメッセージの最初の交換は、IKE_SA_INITおよびIKE_AUTH交換と呼ばれます。その後のIKE交換は、create_child_saまたは情報交換と呼ばれます。一般的なケースでは、IKE SAと最初の子SAを確立するための単一のIKE_SA_INIT Exchangeと単一のIKE_AUTH Exchange（合計4つのメッセージ）があります。例外的な場合、これらのそれぞれの交換が複数ある場合があります。すべての場合において、すべてのIKE_SA_INIT交換は他の交換タイプの前に完了する必要があります。その後、すべてのIKE_AUTH交換が完了する必要があり、それに続いて、任意の数のcreate_child_saおよび情報交換が任意の順序で発生する場合があります。いくつかのシナリオでは、IPSECエンドポイントの間に必要な1人の子SAのみが必要なため、追加の交換はありません。その後の交換を使用して、同じ認証されたエンドポイントのペア間で追加の子SASを確立し、ハウスキーピング機能を実行できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE message flow always consists of a request followed by a response. It is the responsibility of the requester to ensure reliability. If the response is not received within a timeout interval, the requester needs to retransmit the request (or abandon the connection).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEメッセージフローは、常にリクエストに続く応答が続きます。信頼性を確保することは、要求者の責任です。タイムアウト間隔内で応答が受信されない場合、要求者はリクエストを再送信する（または接続を放棄する）必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first exchange of an IKE session, IKE_SA_INIT, negotiates security parameters for the IKE SA, sends nonces, and sends Diffie-Hellman values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEセッションの最初の交換であるIKE_SA_INITは、IKE SAのセキュリティパラメーターを交渉し、Noncesを送信し、Diffie-Hellmanの値を送信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The second exchange, IKE_AUTH, transmits identities, proves knowledge of the secrets corresponding to the two identities, and sets up an SA for the first (and often only) AH or ESP Child SA (unless there is failure setting up the AH or ESP Child SA, in which case the IKE SA is still established without the Child SA).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2番目の交換であるIKE_AUTHはIDを送信し、2つのアイデンティティに対応する秘密の知識を証明し、最初の（そして多くの場合）AHまたはESPチャイルドSAのSAを設定します（AHまたはESPチャイルドのセットアップが失敗しない限りSA、その場合、IKE SAはまだ子供SAなしで確立されています）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The types of subsequent exchanges are CREATE_CHILD_SA (which creates a Child SA) and INFORMATIONAL (which deletes an SA, reports error conditions, or does other housekeeping). Every request requires a response. An INFORMATIONAL request with no payloads (other than the empty Encrypted payload required by the syntax) is commonly used as a check for liveness. These subsequent exchanges cannot be used until the initial exchanges have completed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
後続の交換の種類は、create_child_sa（子SAを作成する）と情報（SAを削除する、エラー条件を報告する、または他のハウスキーピングを行う）です。すべてのリクエストには応答が必要です。ペイロードなしの情報リクエスト（構文で必要な空の暗号化されたペイロード以外）は、livenivesのチェックとして一般的に使用されます。これらのその後の交換は、最初の交換が完了するまで使用できません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the description that follows, we assume that no errors occur. Modifications to the flow when errors occur are described in Section 2.21.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下の説明では、エラーが発生しないと仮定します。エラーが発生したときのフローの変更は、セクション2.21で説明されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-1--Usage-Scenarios">
1.1. Usage Scenarios
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1. 使用シナリオ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE is used to negotiate ESP or AH SAs in a number of different scenarios, each with its own special requirements.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは、多くの異なるシナリオでESPまたはAH SASの交渉に使用され、それぞれに特別な要件があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-1-1--Security-Gateway-to-Security-Gateway-in-Tunnel-Mode">
1.1.1. Security Gateway to Security Gateway in Tunnel Mode
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1.1. トンネルモードでのセキュリティゲートウェイへのセキュリティゲートウェイ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                +-+-+-+-+-+            +-+-+-+-+-+
                |         | IPsec      |         |
   Protected    |Tunnel   | tunnel     |Tunnel   |     Protected
   Subnet   &lt;--&gt;|Endpoint |&lt;----------&gt;|Endpoint |&lt;--&gt; Subnet
                |         |            |         |
                +-+-+-+-+-+            +-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
Figure 1: Security Gateway to Security Gateway Tunnel
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-10">
図1：セキュリティゲートウェイへのセキュリティゲートウェイトンネル
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, neither endpoint of the IP connection implements IPsec, but network nodes between them protect traffic for part of the way. Protection is transparent to the endpoints, and depends on ordinary routing to send packets through the tunnel endpoints for processing. Each endpoint would announce the set of addresses &#34;behind&#34; it, and packets would be sent in tunnel mode where the inner IP header would contain the IP addresses of the actual endpoints.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、どちらのIP接続のエンドポイントもIPSECを実装していませんが、それらの間のネットワークノードは、道の一部のトラフィックを保護します。保護はエンドポイントに対して透明であり、処理のためにトンネルエンドポイントを介してパケットを送信するための通常のルーティングに依存します。各エンドポイントは、「背後」のアドレスのセットを発表し、パケットは内側のIPヘッダーに実際のエンドポイントのIPアドレスが含まれるトンネルモードで送信されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-1-2--Endpoint-to-Endpoint-Transport-Mode">
1.1.2. Endpoint-to-Endpoint Transport Mode
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1.2. エンドポイントからエンドポイントへの輸送モード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   +-+-+-+-+-+                                          +-+-+-+-+-+
   |         |                 IPsec transport          |         |
   |Protected|                or tunnel mode SA         |Protected|
   |Endpoint |&lt;----------------------------------------&gt;|Endpoint |
   |         |                                          |         |
   +-+-+-+-+-+                                          +-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
Figure 2: Endpoint to Endpoint
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
図2：エンドポイントからエンドポイント
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, both endpoints of the IP connection implement IPsec, as required of hosts in [IPSECARCH]. Transport mode will commonly be used with no inner IP header. A single pair of addresses will be negotiated for packets to be protected by this SA. These endpoints MAY implement application-layer access controls based on the IPsec authenticated identities of the participants. This scenario enables the end-to-end security that has been a guiding principle for the Internet since [ARCHPRINC], [TRANSPARENCY], and a method of limiting the inherent problems with complexity in networks noted by [ARCHGUIDEPHIL]. Although this scenario may not be fully applicable to the IPv4 Internet, it has been deployed successfully in specific scenarios within intranets using IKEv1. It should be more broadly enabled during the transition to IPv6 and with the adoption of IKEv2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、[IPSECARCH]のホストに必要なIP接続の両方のエンドポイントがIPSECを実装しています。通常、トランスポートモードは、内側のIPヘッダーなしで使用されます。このSAによって保護されるパケットについて、単一のアドレスがネゴシエートされます。これらのエンドポイントは、参加者のIPSEC認証されたアイデンティティに基づいて、アプリケーション層アクセスコントロールを実装する場合があります。このシナリオにより、[ArchPrinc]、透明性]以来のインターネットの指針となったエンドツーエンドのセキュリティ、および[ArchGuidephil]が指摘したネットワークの複雑さを伴う固有の問題を制限する方法を可能にします。このシナリオはIPv4インターネットに完全には適用できない場合がありますが、IKEV1を使用してイントラネット内の特定のシナリオに正常に展開されています。IPv6への移行中およびIKEV2の採用により、より広く有効にする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is possible in this scenario that one or both of the protected endpoints will be behind a network address translation (NAT) node, in which case the tunneled packets will have to be UDP encapsulated so that port numbers in the UDP headers can be used to identify individual endpoints &#34;behind&#34; the NAT (see Section 2.23).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、保護されたエンドポイントの1つまたは両方がネットワークアドレス変換（NAT）ノードの背後にある可能性があります。この場合、UDPヘッダーのポート番号を使用できるように、トンネルパケットをUDPカプセル化する必要があります。「NATの背後にある個々のエンドポイントを特定します（セクション2.23を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-1-3--Endpoint-to-Security-Gateway-in-Tunnel-Mode">
1.1.3. Endpoint to Security Gateway in Tunnel Mode
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1.3. トンネルモードでのセキュリティゲートウェイへのエンドポイント
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   +-+-+-+-+-+                          +-+-+-+-+-+
   |         |         IPsec            |         |     Protected
   |Protected|         tunnel           |Tunnel   |     Subnet
   |Endpoint |&lt;------------------------&gt;|Endpoint |&lt;--- and/or
   |         |                          |         |     Internet
   +-+-+-+-+-+                          +-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 3: Endpoint to Security Gateway Tunnel
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
図3：セキュリティゲートウェイトンネルへのエンドポイント
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, a protected endpoint (typically a portable roaming computer) connects back to its corporate network through an IPsec-protected tunnel. It might use this tunnel only to access information on the corporate network, or it might tunnel all of its traffic back through the corporate network in order to take advantage of protection provided by a corporate firewall against Internet-based attacks. In either case, the protected endpoint will want an IP address associated with the security gateway so that packets returned to it will go to the security gateway and be tunneled back. This IP address may be static or may be dynamically allocated by the security gateway. In support of the latter case, IKEv2 includes a mechanism (namely, configuration payloads) for the initiator to request an IP address owned by the security gateway for use for the duration of its SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、保護されたエンドポイント（通常、ポータブルローミングコンピューター）がIPSECで保護されたトンネルを介して企業ネットワークに戻ります。このトンネルを使用して、企業ネットワーク上の情報にアクセスするか、インターネットベースの攻撃に対する企業ファイアウォールが提供する保護を活用するために、企業ネットワークを介してすべてのトラフィックをトンネルに戻す可能性があります。どちらの場合でも、保護されたエンドポイントは、セキュリティゲートウェイに関連付けられたIPアドレスを必要とし、パケットがセキュリティゲートウェイに移動してトンネリングされるようにします。このIPアドレスは静的であるか、セキュリティゲートウェイによって動的に割り当てられる場合があります。後者の場合をサポートするために、IKEV2には、SAの期間中に使用するためにセキュリティゲートウェイが所有するIPアドレスを要求するためのイニシエーターのメカニズム（つまり、構成ペイロード）が含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, packets will use tunnel mode. On each packet from the protected endpoint, the outer IP header will contain the source IP address associated with its current location (i.e., the address that will get traffic routed to the endpoint directly), while the inner IP header will contain the source IP address assigned by the security gateway (i.e., the address that will get traffic routed to the security gateway for forwarding to the endpoint). The outer destination address will always be that of the security gateway, while the inner destination address will be the ultimate destination for the packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、パケットはトンネルモードを使用します。保護されたエンドポイントからの各パケットには、外側のIPヘッダーには、現在の場所に関連付けられたソースIPアドレス（つまり、トラフィックがエンドポイントに直接ルーティングされるアドレス）が含まれ、内側のIPヘッダーにはソースIPアドレスが含まれます。セキュリティゲートウェイによって割り当てられます（つまり、エンドポイントに転送するためにトラフィックをセキュリティゲートウェイにルーティングするアドレス）。外側の宛先アドレスは常にセキュリティゲートウェイのアドレスですが、内側の宛先アドレスはパケットの最終的な宛先になります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, it is possible that the protected endpoint will be behind a NAT. In that case, the IP address as seen by the security gateway will not be the same as the IP address sent by the protected endpoint, and packets will have to be UDP encapsulated in order to be routed properly. Interaction with NATs is covered in detail in Section 2.23.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、保護されたエンドポイントがNATの背後にある可能性があります。その場合、セキュリティゲートウェイで見られるIPアドレスは、保護されたエンドポイントによって送信されたIPアドレスと同じではなく、パケットを適切にルーティングするためにUDPをカプセル化する必要があります。NATとの相互作用については、セクション2.23で詳しく説明しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-1-4--Other-Scenarios">
1.1.4. Other Scenarios
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.1.4. 他のシナリオ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Other scenarios are possible, as are nested combinations of the above. One notable example combines aspects of Sections 1.1.1 and 1.1.3. A subnet may make all external accesses through a remote security gateway using an IPsec tunnel, where the addresses on the subnet are routed to the security gateway by the rest of the Internet. An example would be someone&#39;s home network being virtually on the Internet with static IP addresses even though connectivity is provided by an ISP that assigns a single dynamically assigned IP address to the user&#39;s security gateway (where the static IP addresses and an IPsec relay are provided by a third party located elsewhere).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上記のネストされた組み合わせと同様に、他のシナリオが可能です。注目すべき例は、セクション1.1.1と1.1.3の側面を組み合わせています。サブネットは、サブネット上のアドレスがインターネットの残りの部分によってセキュリティゲートウェイにルーティングされるIPSECトンネルを使用して、リモートセキュリティゲートウェイを介してすべての外部アクセスを作成する場合があります。例としては、単一の動的に割り当てられたIPアドレスをユーザーのセキュリティゲートウェイ（静的IPアドレスとIPSECリレーが提供するISPによって接続が提供されている場合でも、誰かのホームネットワークが静的IPアドレスを備えたインターネット上で実質的にインターネット上にあります。他の場所にあるサードパーティ）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-2--The-Initial-Exchanges">
1.2. The Initial Exchanges
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.2. 最初の交換
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Communication using IKE always begins with IKE_SA_INIT and IKE_AUTH exchanges (known in IKEv1 as Phase 1). These initial exchanges normally consist of four messages, though in some scenarios that number can grow. All communications using IKE consist of request/ response pairs. We&#39;ll describe the base exchange first, followed by variations. The first pair of messages (IKE_SA_INIT) negotiate cryptographic algorithms, exchange nonces, and do a Diffie-Hellman exchange [DH].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEを使用した通信は、常にIKE_SA_INITおよびIKE_AUTH交換（IKEV1でフェーズ1として知られています）から始まります。これらの初期交換は通常4つのメッセージで構成されていますが、いくつかのシナリオではその数が増加する可能性があります。IKEを使用したすべての通信は、リクエスト/応答ペアで構成されています。最初に基本交換について説明し、その後にバリエーションが続きます。メッセージの最初のペア（IKE_SA_INIT）は、暗号化アルゴリズムをネゴシエートし、Noncesを交換し、Diffie-Hellman Exchange [DH]を実行します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The second pair of messages (IKE_AUTH) authenticate the previous messages, exchange identities and certificates, and establish the first Child SA. Parts of these messages are encrypted and integrity protected with keys established through the IKE_SA_INIT exchange, so the identities are hidden from eavesdroppers and all fields in all the messages are authenticated. See Section 2.14 for information on how the encryption keys are generated. (A man-in-the-middle attacker who cannot complete the IKE_AUTH exchange can nonetheless see the identity of the initiator.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2番目のメッセージのペア（IKE_AUTH）は、以前のメッセージ、交換アイデンティティ、証明書を認証し、最初の子SAを確立します。これらのメッセージの一部は暗号化され、IKE_SA_INIT Exchangeを通じて確立されたキーで整合性が保護されているため、アイデンティティは盗聴者から隠され、すべてのメッセージのすべてのフィールドが認証されます。暗号化キーの生成方法については、セクション2.14を参照してください。（IKE_AUTH Exchangeを完了できない中間の攻撃者は、それでもイニシエーターの身元を見ることができます。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All messages following the initial exchange are cryptographically protected using the cryptographic algorithms and keys negotiated in the IKE_SA_INIT exchange. These subsequent messages use the syntax of the Encrypted payload described in Section 3.14, encrypted with keys that are derived as described in Section 2.14. All subsequent messages include an Encrypted payload, even if they are referred to in the text as &#34;empty&#34;. For the CREATE_CHILD_SA, IKE_AUTH, or INFORMATIONAL exchanges, the message following the header is encrypted and the message including the header is integrity protected using the cryptographic algorithms negotiated for the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初の交換に続くすべてのメッセージは、IKE_SA_INIT Exchangeで交渉された暗号化アルゴリズムとキーを使用して暗号化された保護されています。これらの後続のメッセージは、セクション2.14で説明されているように導出されたキーで暗号化されたセクション3.14で説明されている暗号化されたペイロードの構文を使用します。後続のすべてのメッセージには、テキストで「空」と呼ばれている場合でも、暗号化されたペイロードが含まれます。create_child_sa、ike_auth、または情報交換の場合、ヘッダーに続くメッセージが暗号化され、ヘッダーを含むメッセージはIKE SAのためにネゴシエートされた暗号化アルゴリズムを使用して保護されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Every IKE message contains a Message ID as part of its fixed header. This Message ID is used to match up requests and responses, and to identify retransmissions of messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのIKEメッセージには、固定ヘッダーの一部としてメッセージIDが含まれています。このメッセージIDは、リクエストと応答を一致させ、メッセージの再送信を識別するために使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the following descriptions, the payloads contained in the message are indicated by names as listed below.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の説明では、メッセージに含まれるペイロードは、以下にリストされている名前で示されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Notation    Payload
   -----------------------------------------
   AUTH        Authentication
   CERT        Certificate
   CERTREQ     Certificate Request
   CP          Configuration
   D           Delete
   EAP         Extensible Authentication
   HDR         IKE header (not a payload)
   IDi         Identification - Initiator
   IDr         Identification - Responder
   KE          Key Exchange
   Ni, Nr      Nonce
   N           Notify
   SA          Security Association
   SK          Encrypted and Authenticated
   TSi         Traffic Selector - Initiator
   TSr         Traffic Selector - Responder
   V           Vendor ID
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The details of the contents of each payload are described in section 3. Payloads that may optionally appear will be shown in brackets, such as [CERTREQ]; this indicates that a Certificate Request payload can optionally be included.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各ペイロードの内容の詳細は、セクション3で説明されています。オプションで表示されるペイロードは、[Certreq]などのブラケットに表示されます。これは、証明書リクエストのペイロードをオプションで含めることができることを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initial exchanges are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初の交換は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SAi1, KEi, Ni  --&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HDR contains the Security Parameter Indexes (SPIs), version numbers, and flags of various sorts. The SAi1 payload states the cryptographic algorithms the initiator supports for the IKE SA. The KE payload sends the initiator&#39;s Diffie-Hellman value. Ni is the initiator&#39;s nonce.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HDRには、さまざまな種類のセキュリティパラメーターインデックス（SPI）、バージョン番号、およびフラグが含まれています。SAI1ペイロードには、イケイターがIKE SAにサポートする暗号化アルゴリズムが記載されています。KEペイロードは、イニシエーターのdiffie-hellman値を送信します。NiはイニシエーターのNonceです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-- HDR, SAr1, KEr, Nr, [CERTREQ]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-HDR、sar1、ker、nr、[certreq]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder chooses a cryptographic suite from the initiator&#39;s offered choices and expresses that choice in the SAr1 payload, completes the Diffie-Hellman exchange with the KEr payload, and sends its nonce in the Nr payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、イニシエーターの提供された選択肢から暗号化スイートを選択し、SAR1ペイロードでその選択を表現し、KERペイロードとのDiffie-Hellman Exchangeを完成させ、NRペイロードでNonCEを送信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At this point in the negotiation, each party can generate SKEYSEED, from which all keys are derived for that IKE SA. The messages that follow are encrypted and integrity protected in their entirety, with the exception of the message headers. The keys used for the encryption and integrity protection are derived from SKEYSEED and are known as SK_e (encryption) and SK_a (authentication, a.k.a. integrity protection); see Sections 2.13 and 2.14 for details on the key derivation. A separate SK_e and SK_a is computed for each direction. In addition to the keys SK_e and SK_a derived from the Diffie-Hellman value for protection of the IKE SA, another quantity SK_d is derived and used for derivation of further keying material for Child SAs. The notation SK { ... } indicates that these payloads are encrypted and integrity protected using that direction&#39;s SK_e and SK_a.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
交渉のこの時点で、各当事者はskeyseedを生成でき、そこからすべてのキーがそのために導き出されます。次のメッセージは、メッセージヘッダーを除き、暗号化され、完全に完全に保護されています。暗号化と整合性保護に使用されるキーは、SkeySeedから派生しており、SK_E（暗号化）およびSK_A（Authentication、A.K.A。Integrity Protection）として知られています。キー派生の詳細については、セクション2.13および2.14を参照してください。個別のSK_EとSK_Aは、各方向に対して計算されます。IKE SAの保護のためにdiffie-hellman値に由来するKeys SK_EおよびSK_Aに加えて、別の数量SK_Dが導出され、子SASのさらなるキーイング材料の導出に使用されます。表記SK {...}は、これらのペイロードが暗号化され、その方向のSK_EとSK_Aを使用して整合性が保護されていることを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HDR, SK {IDi, [CERT,] [CERTREQ,] [IDr,] AUTH, SAi2, TSi, TSr} --&gt;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
hdr、sk {idi、[cert、] [certreq、] [idr、] auth、sai2、tsi、tsr}  - &gt;
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator asserts its identity with the IDi payload, proves knowledge of the secret corresponding to IDi and integrity protects the contents of the first message using the AUTH payload (see Section 2.15). It might also send its certificate(s) in CERT payload(s) and a list of its trust anchors in CERTREQ payload(s). If any CERT payloads are included, the first certificate provided MUST contain the public key used to verify the AUTH field.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、IDIペイロードとのアイデンティティを主張し、IDIに対応する秘密の知識を証明し、整合性は認証ペイロードを使用して最初のメッセージの内容を保護します（セクション2.15を参照）。また、証明書をCERT PAYLOAD（S）に送信し、Certreq Payload（s）の信頼アンカーのリストを送信する場合があります。証明書のペイロードが含まれている場合、提供された最初の証明書には、AUTHフィールドの検証に使用される公開キーを含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The optional payload IDr enables the initiator to specify to which of the responder&#39;s identities it wants to talk. This is useful when the machine on which the responder is running is hosting multiple identities at the same IP address. If the IDr proposed by the initiator is not acceptable to the responder, the responder might use some other IDr to finish the exchange. If the initiator then does not accept the fact that responder used an IDr different than the one that was requested, the initiator can close the SA after noticing the fact.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
オプションのペイロードIDRを使用すると、イニシエーターは、対応者の話し合いの識別のどれを指定できます。これは、Responderが実行されているマシンが同じIPアドレスで複数のIDをホストしている場合に役立ちます。イニシエーターによって提案されたIDRが応答者に受け入れられない場合、レスポンダーは他のIDRを使用して交換を終了する場合があります。イニシエーターが、Responderが要求されたものとは異なるIDRを使用したという事実を受け入れない場合、イニシエーターは事実に気付いた後、SAを閉じることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Traffic Selectors (TSi and TSr) are discussed in Section 2.9.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックセレクター（TSIおよびTSR）については、セクション2.9で説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator begins negotiation of a Child SA using the SAi2 payload. The final fields (starting with SAi2) are described in the description of the CREATE_CHILD_SA exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、SAI2ペイロードを使用して、子SAの交渉を開始します。最終フィールド（SAI2から始まる）は、create_child_sa Exchangeの説明で説明されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-- HDR, SK {IDr, [CERT,] AUTH, SAr2, TSi, TSr}
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-hdr、sk {idr、[cert、] auth、sar2、tsi、tsr}
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder asserts its identity with the IDr payload, optionally sends one or more certificates (again with the certificate containing the public key used to verify AUTH listed first), authenticates its identity and protects the integrity of the second message with the AUTH payload, and completes negotiation of a Child SA with the additional fields described below in the CREATE_CHILD_SA exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ResponderはIDRペイロードとのIDを主張し、オプションで1つ以上の証明書を送信します（最初にリストされたAuthを確認するために使用される公開鍵を含む証明書を含む）、そのIDを認証し、Auth Payloadで2番目のメッセージの整合性を保護し、Create_child_sa Exchangeで以下に説明する追加のフィールドを使用した子SAの交渉を完了します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Both parties in the IKE_AUTH exchange MUST verify that all signatures and Message Authentication Codes (MACs) are computed correctly. If either side uses a shared secret for authentication, the names in the ID payload MUST correspond to the key used to generate the AUTH payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_AUTH Exchangeの両当事者は、すべての署名とメッセージ認証コード（MAC）が正しく計算されていることを確認する必要があります。いずれかの側が認証のために共有秘密を使用する場合、IDペイロード内の名前はAUTHペイロードを生成するために使用されるキーに対応する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Because the initiator sends its Diffie-Hellman value in the IKE_SA_INIT, it must guess the Diffie-Hellman group that the responder will select from its list of supported groups. If the initiator guesses wrong, the responder will respond with a Notify payload of type INVALID_KE_PAYLOAD indicating the selected group. In this case, the initiator MUST retry the IKE_SA_INIT with the corrected Diffie-Hellman group. The initiator MUST again propose its full set of acceptable cryptographic suites because the rejection message was unauthenticated and otherwise an active attacker could trick the endpoints into negotiating a weaker suite than a stronger one that they both prefer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターはIKE_SA_INITでDiffie-Hellman値を送信するため、Responderがサポートされているグループのリストから選択するDiffie-Hellmanグループを推測する必要があります。イニシエーターが間違っていると推測した場合、レスポンダーは、選択したグループを示すタイプInvalID_KE_PAYLOADの通知ペイロードで応答します。この場合、イニシエーターは、修正されたdiffie-hellmanグループでIKE_SA_INITを再試行する必要があります。イニシエーターは、拒否メッセージが認識されていないため、容認できる一連の暗号化されたスイートを再度提案する必要があります。そうでなければ、アクティブな攻撃者は、両方とも好むより強いスイートよりも弱いスイートを交渉するためにエンドポイントをだまします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If creating the Child SA during the IKE_AUTH exchange fails for some reason, the IKE SA is still created as usual. The list of Notify message types in the IKE_AUTH exchange that do not prevent an IKE SA from being set up include at least the following: NO_PROPOSAL_CHOSEN, TS_UNACCEPTABLE, SINGLE_PAIR_REQUIRED, INTERNAL_ADDRESS_FAILURE, and FAILED_CP_REQUIRED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_AUTH Exchangeの間に子SAを作成すると、何らかの理由で失敗した場合、IKE SAは通常どおり作成されます。IKE SAのセットアップを妨げないIKE_AUTH ExchangeのNotifyメッセージタイプのリストには、少なくとも次のものが含まれます。No_Proposal_Chosen、TS_Unaceptable、Single_Pair_Required、internal_address_failure、および失敗
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the failure is related to creating the IKE SA (for example, an AUTHENTICATION_FAILED Notify error message is returned), the IKE SA is not created. Note that although the IKE_AUTH messages are encrypted and integrity protected, if the peer receiving this Notify error message has not yet authenticated the other end (or if the peer fails to authenticate the other end for some reason), the information needs to be treated with caution. More precisely, assuming that the MAC verifies correctly, the sender of the error Notify message is known to be the responder of the IKE_SA_INIT exchange, but the sender&#39;s identity cannot be assured.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
障害がIKE SAの作成に関連している場合（たとえば、Authentication_Failed Notifyエラーメッセージが返されます）、IKE SAは作成されません。IKE_AUTHメッセージは暗号化され、整合性が保護されていますが、この通知エラーメッセージを受け取ったピアがまだ反対側を認証していない場合（または、ピアが何らかの理由で反対側の端を認証できない場合）、情報をで処理する必要があることに注意してください。注意。より正確には、MACが正しく検証されていると仮定すると、エラー通知メッセージの送信者はIKE_SA_INIT Exchangeの応答者であることが知られていますが、送信者の身元は保証できません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that IKE_AUTH messages do not contain KEi/KEr or Ni/Nr payloads. Thus, the SA payloads in the IKE_AUTH exchange cannot contain Transform Type 4 (Diffie-Hellman group) with any value other than NONE. Implementations SHOULD omit the whole transform substructure instead of sending value NONE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_AUTHメッセージにはKEI/KERまたはNI/NRペイロードが含まれていないことに注意してください。したがって、IKE_AUTH ExchangeのSAペイロードには、いないこと以外の値で変換タイプ4（diffie-hellmanグループ）を含めることはできません。実装は、値を送信するのではなく、変換の下部構造全体を省略する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-3--The-CREATECHILDSA-Exchange">
1.3. The CREATE_CHILD_SA Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.3. create_child_sa Exchange
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA exchange is used to create new Child SAs and to rekey both IKE SAs and Child SAs. This exchange consists of a single request/response pair, and some of its function was referred to as a Phase 2 exchange in IKEv1. It MAY be initiated by either end of the IKE SA after the initial exchanges are completed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
create_child_sa Exchangeは、新しい子SASを作成し、Ike SASとChild SASの両方を再キーするために使用されます。この交換は単一の要求/応答ペアで構成されており、その機能の一部はIKEV1のフェーズ2エクスチェンジと呼ばれていました。最初の交換が完了した後、IKE SAのいずれかの端によって開始される場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An SA is rekeyed by creating a new SA and then deleting the old one. This section describes the first part of rekeying, the creation of new SAs; Section 2.8 covers the mechanics of rekeying, including moving traffic from old to new SAs and the deletion of the old SAs. The two sections must be read together to understand the entire process of rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAは、新しいSAを作成し、古いSAを削除することで再キーになります。このセクションでは、再キーイングの最初の部分、新しいSAの作成について説明します。セクション2.8では、古いSASから新しいSASへのトラフィックの移動や古いSASの削除など、再キーイングのメカニズムについて説明します。2つのセクションを一緒に読んで、再キーイングのプロセス全体を理解する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Either endpoint may initiate a CREATE_CHILD_SA exchange, so in this section the term initiator refers to the endpoint initiating this exchange. An implementation MAY refuse all CREATE_CHILD_SA requests within an IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
いずれかのエンドポイントがcreate_child_sa Exchangeを開始する場合があるため、このセクションでは、イニシエーターという用語は、この交換を開始するエンドポイントを参照します。実装は、IKE SA内のすべてのcreate_child_saリクエストを拒否する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA request MAY optionally contain a KE payload for an additional Diffie-Hellman exchange to enable stronger guarantees of forward secrecy for the Child SA. The keying material for the Child SA is a function of SK_d established during the establishment of the IKE SA, the nonces exchanged during the CREATE_CHILD_SA exchange, and the Diffie-Hellman value (if KE payloads are included in the CREATE_CHILD_SA exchange).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
create_child_saリクエストには、オプションで追加のdiffie-hellman ExchangeのKEペイロードが含まれている場合があり、子SAの将来の秘密の強力な保証を可能にします。子SAのキーイング材料は、IKE SAの確立中に確立されたSK_Dの関数、Create_Child_Sa Exchange中に交換されたNonces、およびDiffie-Hellman値（KEペイロードがCreate_Child_sa Exchangeに含まれている場合）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a CREATE_CHILD_SA exchange includes a KEi payload, at least one of the SA offers MUST include the Diffie-Hellman group of the KEi. The Diffie-Hellman group of the KEi MUST be an element of the group the initiator expects the responder to accept (additional Diffie-Hellman groups can be proposed). If the responder selects a proposal using a different Diffie-Hellman group (other than NONE), the responder MUST reject the request and indicate its preferred Diffie-Hellman group in the INVALID_KE_PAYLOAD Notify payload. There are two octets of data associated with this notification: the accepted Diffie-Hellman group number in big endian order. In the case of such a rejection, the CREATE_CHILD_SA exchange fails, and the initiator will probably retry the exchange with a Diffie-Hellman proposal and KEi in the group that the responder gave in the INVALID_KE_PAYLOAD Notify payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Create_Child_Sa ExchangeにKEIペイロードが含まれている場合、SAオファーの少なくとも1つにKEIのdiffie-hellmanグループが含まれる必要があります。KEIのdiffie-hellmanグループは、イニシエーターがレスポンダーが受け入れることを期待するグループの要素でなければなりません（追加のdiffie-hellmanグループを提案できます）。Responderが異なるDiffie-Hellmanグループ（なし以外）を使用して提案を選択した場合、Responderはリクエストを拒否し、Invalid_ke_Payload Notify Payloadでその好ましいDiffie-Hellmanグループを示す必要があります。この通知に関連付けられたデータの2つのオクテットがあります。このような拒否の場合、Create_Child_Sa Exchangeは失敗し、イニシエーターはおそらく、ResponderがInvalid_Ke_Payloadに与えたグループのDiffie-Hellmanの提案とKEIとの交換を再試行します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder sends a NO_ADDITIONAL_SAS notification to indicate that a CREATE_CHILD_SA request is unacceptable because the responder is unwilling to accept any more Child SAs on this IKE SA. This notification can also be used to reject IKE SA rekey. Some minimal implementations may only accept a single Child SA setup in the context of an initial IKE exchange and reject any subsequent attempts to add more.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、NO_Additional_SAS通知を送信して、ResponderがこのIKE SAでこれ以上の子SASを受け入れたくないため、Create_Child_Sa要求が受け入れられないことを示すことです。この通知は、Ike Sa Rekeを拒否するためにも使用できます。いくつかの最小限の実装は、最初のIKE交換のコンテキストでのみ単一の子SAセットアップを受け入れ、その後の追加の試みを拒否する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-3-1--Creating-New-Child-SAs-with-the-CREATECHILDSA-Exchange">
1.3.1. Creating New Child SAs with the CREATE_CHILD_SA Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.3.1. create_child_sa Exchangeで新しい子SASを作成します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Child SA may be created by sending a CREATE_CHILD_SA request. The CREATE_CHILD_SA request for creating a new Child SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CREATE_CHILD_SAリクエストを送信することにより、子SAを作成することができます。新しい子SAを作成するためのcreate_child_saリクエストは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SK {SA, Ni, [KEi],
              TSi, TSr}  --&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator sends SA offer(s) in the SA payload, a nonce in the Ni payload, optionally a Diffie-Hellman value in the KEi payload, and the proposed Traffic Selectors for the proposed Child SA in the TSi and TSr payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、SAペイロードのSAオファー、NIペイロードのNonCE、オプションでKEIペイロードのdiffie-hellman値、およびTSIおよびTSRペイロードで提案された子SAの提案されたトラフィックセレクターを送信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA response for creating a new Child SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しい子SAを作成するためのcreate_child_sa応答は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-- HDR, SK {SA, Nr, [KEr], TSi, TSr}
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-hdr、sk {sa、nr、[ker]、tsi、tsr}
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder replies (using the same Message ID to respond) with the accepted offer in an SA payload, and a Diffie-Hellman value in the KEr payload if KEi was included in the request and the selected cryptographic suite includes that group.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、SAペイロードで受け入れられたオファーを使用して（同じメッセージIDを使用して）返信し、KEIがリクエストに含まれ、選択された暗号化スイートにそのグループが含まれている場合、KERペイロードのdiffie-hellman値を返信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Traffic Selectors for traffic to be sent on that SA are specified in the TS payloads in the response, which may be a subset of what the initiator of the Child SA proposed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAに送信されるトラフィックセレクターは、応答のTSペイロードで指定されています。これは、子SAのイニシエーターが提案したもののサブセットである可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The USE_TRANSPORT_MODE notification MAY be included in a request message that also includes an SA payload requesting a Child SA. It requests that the Child SA use transport mode rather than tunnel mode for the SA created. If the request is accepted, the response MUST also include a notification of type USE_TRANSPORT_MODE. If the responder declines the request, the Child SA will be established in tunnel mode. If this is unacceptable to the initiator, the initiator MUST delete the SA. Note: Except when using this option to negotiate transport mode, all Child SAs will use tunnel mode.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
use_transport_mode通知は、子SAを要求するSAペイロードも含むリクエストメッセージに含まれる場合があります。これは、作成されたSAのトンネルモードではなく、輸送モードを使用することを要求します。リクエストが受け入れられた場合、応答には型use_transport_modeの通知も含める必要があります。応答者がリクエストを拒否した場合、子SAはトンネルモードで確立されます。これがイニシエーターに容認できない場合、イニシエーターはSAを削除する必要があります。注：このオプションを使用して輸送モードをネゴシエートする場合を除き、すべての子供SASはトンネルモードを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The ESP_TFC_PADDING_NOT_SUPPORTED notification asserts that the sending endpoint will not accept packets that contain Traffic Flow Confidentiality (TFC) padding over the Child SA being negotiated. If neither endpoint accepts TFC padding, this notification is included in both the request and the response. If this notification is included in only one of the messages, TFC padding can still be sent in the other direction.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_TFC_PADDING_NOT_SUPPORTED通知は、送信エンドポイントが交渉中の子供SAのトラフィックフローの機密性（TFC）パディングを含むパケットを受け入れないと主張しています。どちらのエンドポイントもTFCパディングを受け入れない場合、この通知はリクエストと応答の両方に含まれています。この通知がメッセージの1つのみに含まれている場合、TFCパディングはまだ反対方向に送信できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The NON_FIRST_FRAGMENTS_ALSO notification is used for fragmentation control. See [IPSECARCH] for a fuller explanation. Both parties need to agree to sending non-first fragments before either party does so. It is enabled only if NON_FIRST_FRAGMENTS_ALSO notification is included in both the request proposing an SA and the response accepting it. If the responder does not want to send or receive non-first fragments, it only omits NON_FIRST_FRAGMENTS_ALSO notification from its response, but does not reject the whole Child SA creation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
non_first_fragments_also通知は、断片化制御に使用されます。詳細な説明については、[Ipsecarch]を参照してください。どちらの当事者もそうする前に、両当事者は第一の断片を送信することに同意する必要があります。non_first_fragments_also通知がSAを提案するリクエストとそれを受け入れる応答の両方に含まれる場合にのみ有効になります。応答者がファースト以外のフラグメントを送信または受信したくない場合、その応答からnon_first_fragments_alsoの通知を省略しますが、子SAの作成全体を拒否しません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IPCOMP_SUPPORTED notification, covered in Section 2.22, can also be included in the exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.22でカバーされているIPComp_Supported通知も、交換に含めることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A failed attempt to create a Child SA SHOULD NOT tear down the IKE SA: there is no reason to lose the work done to set up the IKE SA. See Section 2.21 for a list of error messages that might occur if creating a Child SA fails.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
子SAを作成しようとする試みが失敗したため、IKE SAを取り壊すべきではありません。IKESAをセットアップするために行われた作業を失う理由はありません。子SAを作成した場合に発生する可能性のあるエラーメッセージのリストについては、セクション2.21を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-3-2--Rekeying-IKE-SAs-with-the-CREATECHILDSA-Exchange">
1.3.2. Rekeying IKE SAs with the CREATE_CHILD_SA Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.3.2. create_child_sa ExchangeでIke SASを再キーします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA request for rekeying an IKE SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ike saを再キーするためのcreate_child_saリクエストは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SK {SA, Ni, KEi} --&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator sends SA offer(s) in the SA payload, a nonce in the Ni payload, and a Diffie-Hellman value in the KEi payload. The KEi payload MUST be included. A new initiator SPI is supplied in the SPI field of the SA payload. Once a peer receives a request to rekey an IKE SA or sends a request to rekey an IKE SA, it SHOULD NOT start any new CREATE_CHILD_SA exchanges on the IKE SA that is being rekeyed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、SAペイロードのSAオファー、NIペイロードのノンセ、およびKEIペイロードのdiffie-hellman値を送信します。KEIペイロードを含める必要があります。新しいイニシエーターSPIがSAペイロードのSPIフィールドに提供されます。ピアがIKE SAを再キーにするというリクエストを受け取ったり、IKE SAを再キーするようにリクエストを送信したら、IKE SAの新しいcreate_child_sa取引所を再キーにしていることを開始しないでください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA response for rekeying an IKE SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ike saを再キーするためのcreate_child_sa応答は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                                &lt;--  HDR, SK {SA, Nr, KEr}
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder replies (using the same Message ID to respond) with the accepted offer in an SA payload, and a Diffie-Hellman value in the KEr payload if the selected cryptographic suite includes that group. A new responder SPI is supplied in the SPI field of the SA payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
レスポンダーは、SAペイロードで受け入れられたオファーを使用して（同じメッセージIDを使用して）返信し、選択した暗号化スイートにそのグループが含まれている場合、KERペイロードのdiffie-hellman値を返信します。新しいレスポンダーSPIがSAペイロードのSPIフィールドに提供されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new IKE SA has its message counters set to 0, regardless of what they were in the earlier IKE SA. The first IKE requests from both sides on the new IKE SA will have Message ID 0. The old IKE SA retains its numbering, so any further requests (for example, to delete the IKE SA) will have consecutive numbering. The new IKE SA also has its window size reset to 1, and the initiator in this rekey exchange is the new &#34;original initiator&#34; of the new IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいIke SAには、以前のIke SAに何があったかに関係なく、メッセージカウンターが0に設定されています。新しいIKE SAの両側からの最初のIKEリクエストにはメッセージID 0があります。古いIKE SAには番号付けが保持されるため、さらなる要求（たとえば、IKE SAを削除する）には連続した番号が付いています。また、新しいIKE SAにはウィンドウサイズが1にリセットされており、このRekey Exchangeのイニシエーターは、新しいIKE SAの新しい「オリジナルイニシエーター」です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Section 2.18 also covers IKE SA rekeying in detail.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.18は、Ike SAの再キーイングも詳細にカバーしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-3-3--Rekeying-Child-SAs-with-the-CREATECHILDSA-Exchange">
1.3.3. Rekeying Child SAs with the CREATE_CHILD_SA Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.3.3. Create_Child_sa Exchangeで子供のSASを再キーします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA request for rekeying a Child SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
子どものsaを再キーするためのcreate_child_saリクエストは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SK {N(REKEY_SA), SA, Ni, [KEi],
       TSi, TSr}   --&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator sends SA offer(s) in the SA payload, a nonce in the Ni payload, optionally a Diffie-Hellman value in the KEi payload, and the proposed Traffic Selectors for the proposed Child SA in the TSi and TSr payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、SAペイロードのSAオファー、NIペイロードのNonCE、オプションでKEIペイロードのdiffie-hellman値、およびTSIおよびTSRペイロードで提案された子SAの提案されたトラフィックセレクターを送信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The notifications described in Section 1.3.1 may also be sent in a rekeying exchange. Usually, these will be the same notifications that were used in the original exchange; for example, when rekeying a transport mode SA, the USE_TRANSPORT_MODE notification will be used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション1.3.1で説明されている通知は、再キーキングエクスチェンジで送信される場合があります。通常、これらは元の交換で使用されたのと同じ通知になります。たとえば、トランスポートモードSAを再キーすると、use_transport_mode通知が使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The REKEY_SA notification MUST be included in a CREATE_CHILD_SA exchange if the purpose of the exchange is to replace an existing ESP or AH SA. The SA being rekeyed is identified by the SPI field in the Notify payload; this is the SPI the exchange initiator would expect in inbound ESP or AH packets. There is no data associated with this Notify message type. The Protocol ID field of the REKEY_SA notification is set to match the protocol of the SA we are rekeying, for example, 3 for ESP and 2 for AH.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
交換の目的が既存のESPまたはAH SAを置き換えることである場合、REKEY_SA通知はcreate_child_sa Exchangeに含める必要があります。再キーリングされているSAは、通知ペイロードのSPIフィールドによって識別されます。これは、交換イニシエーターがインバウンドESPまたはAHパケットで予想されるSPIです。このNotifyメッセージタイプに関連付けられたデータはありません。REKEY_SA通知のプロトコルIDフィールドは、たとえばESPで3、AHで2の場合、再キーリングしているSAのプロトコルと一致するように設定されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA response for rekeying a Child SA is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
子SAを再キーするためのcreate_child_sa応答は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-- HDR, SK {SA, Nr, [KEr], TSi, TSr}
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-32">
&lt;-hdr、sk {sa、nr、[ker]、tsi、tsr}
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder replies (using the same Message ID to respond) with the accepted offer in an SA payload, and a Diffie-Hellman value in the KEr payload if KEi was included in the request and the selected cryptographic suite includes that group.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、SAペイロードで受け入れられたオファーを使用して（同じメッセージIDを使用して）返信し、KEIがリクエストに含まれ、選択された暗号化スイートにそのグループが含まれている場合、KERペイロードのdiffie-hellman値を返信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Traffic Selectors for traffic to be sent on that SA are specified in the TS payloads in the response, which may be a subset of what the initiator of the Child SA proposed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAに送信されるトラフィックセレクターは、応答のTSペイロードで指定されています。これは、子SAのイニシエーターが提案したもののサブセットである可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-4--The-INFORMATIONAL-Exchange">
1.4. The INFORMATIONAL Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.4. 情報交換
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At various points during the operation of an IKE SA, peers may desire to convey control messages to each other regarding errors or notifications of certain events. To accomplish this, IKE defines an INFORMATIONAL exchange. INFORMATIONAL exchanges MUST ONLY occur after the initial exchanges and are cryptographically protected with the negotiated keys. Note that some informational messages, not exchanges, can be sent outside the context of an IKE SA. Section 2.21 also covers error messages in great detail.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAの操作中のさまざまな時点で、ピアは特定のイベントのエラーまたは通知に関して、コントロールメッセージを相互に伝えることを望む場合があります。これを達成するために、IKEは情報交換を定義します。情報交換は、最初の交換後にのみ発生し、交渉されたキーで暗号化されている必要があります。交換ではなくいくつかの情報メッセージは、IKE SAのコンテキストの外で送信できることに注意してください。セクション2.21は、エラーメッセージも非常に詳細にカバーしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Control messages that pertain to an IKE SA MUST be sent under that IKE SA. Control messages that pertain to Child SAs MUST be sent under the protection of the IKE SA that generated them (or its successor if the IKE SA was rekeyed).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Ike SAに関連するメッセージを制御することは、そのIke SAの下で送信する必要があります。子SASに関連するコントロールメッセージは、それらを生成したIKE SAの保護（またはIKE SAが再キーになった場合の後継者）の保護の下で送信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Messages in an INFORMATIONAL exchange contain zero or more Notification, Delete, and Configuration payloads. The recipient of an INFORMATIONAL exchange request MUST send some response; otherwise, the sender will assume the message was lost in the network and will retransmit it. That response MAY be an empty message. The request message in an INFORMATIONAL exchange MAY also contain no payloads. This is the expected way an endpoint can ask the other endpoint to verify that it is alive.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
情報交換のメッセージには、ゼロ以上の通知、削除、構成のペイロードが含まれています。情報交換リクエストの受信者は、何らかの応答を送信する必要があります。それ以外の場合、送信者はメッセージがネットワークで失われたと想定し、それを再送信します。その応答は空のメッセージかもしれません。情報交換の要求メッセージには、ペイロードが含まれていない場合があります。これは、エンドポイントが他のエンドポイントにそれが生きていることを確認するように依頼することが期待される方法です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The INFORMATIONAL exchange is defined as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
情報交換は次のように定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SK {[N,] [D,]
       [CP,] ...}  --&gt;
                                &lt;--  HDR, SK {[N,] [D,]
                                         [CP], ...}
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The processing of an INFORMATIONAL exchange is determined by its component payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
情報交換の処理は、コンポーネントのペイロードによって決定されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-4-1--Deleting-an-SA-with-INFORMATIONAL-Exchanges">
1.4.1. Deleting an SA with INFORMATIONAL Exchanges
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.4.1. 情報交換でSAを削除します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP and AH SAs always exist in pairs, with one SA in each direction. When an SA is closed, both members of the pair MUST be closed (that is, deleted). Each endpoint MUST close its incoming SAs and allow the other endpoint to close the other SA in each pair. To delete an SA, an INFORMATIONAL exchange with one or more Delete payloads is sent listing the SPIs (as they would be expected in the headers of inbound packets) of the SAs to be deleted. The recipient MUST close the designated SAs. Note that one never sends Delete payloads for the two sides of an SA in a single message. If there are many SAs to delete at the same time, one includes Delete payloads for the inbound half of each SA pair in the INFORMATIONAL exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESPとAH SASは常にペアで存在し、各方向に1つのSAがあります。SAが閉じた場合、ペアの両方のメンバーを閉じる必要があります（つまり、削除されます）。各エンドポイントは、着信SASを閉じて、他のエンドポイントが各ペアの他のSAを閉じることができます。SAを削除するには、1つ以上の削除ペイロードを使用した情報交換が送信されます。SASのSPI（インバウンドパケットのヘッダーで予想されるように）をリストします。受信者は、指定されたSASを閉じる必要があります。SAの両側の削除ペイロードを1つのメッセージで送信しないことに注意してください。同時に削除する多くのSASがある場合、情報交換の各SAペアのインバウンド半分のペイロードを削除することが含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Normally, the response in the INFORMATIONAL exchange will contain Delete payloads for the paired SAs going in the other direction. There is one exception. If, by chance, both ends of a set of SAs independently decide to close them, each may send a Delete payload and the two requests may cross in the network. If a node receives a delete request for SAs for which it has already issued a delete request, it MUST delete the outgoing SAs while processing the request and the incoming SAs while processing the response. In that case, the responses MUST NOT include Delete payloads for the deleted SAs, since that would result in duplicate deletion and could in theory delete the wrong SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常、情報交換の応答には、他の方向に進むペアのSAの削除ペイロードが含まれます。1つの例外があります。偶然に、SASのセットの両端が独立してそれらを閉じることを決定した場合、それぞれが削除ペイロードを送信し、2つのリクエストがネットワーク内で交差する場合があります。ノードが既に削除要求を発行しているSASの削除要求を受信した場合、リクエストの処理中に発信SASと応答の処理中に着信SASを削除する必要があります。その場合、応答には、削除されたSASの削除ペイロードを含めてはなりません。これにより、削除が重複し、理論では間違ったSAを削除できるためです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Similar to ESP and AH SAs, IKE SAs are also deleted by sending an Informational exchange. Deleting an IKE SA implicitly closes any remaining Child SAs negotiated under it. The response to a request that deletes the IKE SA is an empty INFORMATIONAL response.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESPとAH SASと同様に、Ike SASも情報交換を送信することで削除されます。Ike SAを削除すると、その下で交渉された残りの子SASを暗黙的に閉じます。IKE SAを削除するリクエストに対する応答は、空の情報応答です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Half-closed ESP or AH connections are anomalous, and a node with auditing capability should probably audit their existence if they persist. Note that this specification does not specify time periods, so it is up to individual endpoints to decide how long to wait. A node MAY refuse to accept incoming data on half-closed connections but MUST NOT unilaterally close them and reuse the SPIs. If connection state becomes sufficiently messed up, a node MAY close the IKE SA, as described above. It can then rebuild the SAs it needs on a clean base under a new IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
半分閉鎖されたESPまたはAH接続は異常であり、監査機能を備えたノードは、おそらくそれらが持続する場合、存在を監査する必要があります。この仕様では期間が指定されていないため、待機時間を決定するのは個々のエンドポイント次第であることに注意してください。ノードは、半分閉鎖された接続に関する着信データを受け入れることを拒否する可能性がありますが、それらを一方的に閉じてSPIを再利用してはなりません。接続状態が十分に台無しになった場合、上記のように、ノードがIKE SAを閉じることができます。その後、新しいIKE SAの下のきれいなベースで必要なSASを再構築できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-5--Informational-Messages-outside-of-an-IKE-SA">
1.5. Informational Messages outside of an IKE SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.5. Ike SA以外の情報メッセージ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are some cases in which a node receives a packet that it cannot process, but it may want to notify the sender about this situation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ノードが処理できないパケットを受信する場合もありますが、この状況については送信者に通知したい場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If an ESP or AH packet arrives with an unrecognized SPI. This might be due to the receiving node having recently crashed and lost state, or because of some other system malfunction or attack.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ESPまたはAHパケットが認識されていないSPIで到着した場合。これは、受信ノードが最近クラッシュして状態を失ったこと、または他のシステムの誤動作または攻撃によるものである可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If an encrypted IKE request packet arrives on port 500 or 4500 with an unrecognized IKE SPI. This might be due to the receiving node having recently crashed and lost state, or because of some other system malfunction or attack.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 暗号化されたIKEリクエストパケットが、認識されていないIKE SPIを使用してポート500または4500に到着した場合。これは、受信ノードが最近クラッシュして状態を失ったこと、または他のシステムの誤動作または攻撃によるものである可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If an IKE request packet arrives with a higher major version number than the implementation supports.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IKE要求パケットが実装サポートよりも高いメジャーバージョン番号で到着する場合。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the first case, if the receiving node has an active IKE SA to the IP address from whence the packet came, it MAY send an INVALID_SPI notification of the wayward packet over that IKE SA in an INFORMATIONAL exchange. The Notification Data contains the SPI of the invalid packet. The recipient of this notification cannot tell whether the SPI is for AH or ESP, but this is not important because the SPIs are supposed to be different for the two. If no suitable IKE SA exists, the node MAY send an informational message without cryptographic protection to the source IP address, using the source UDP port as the destination port if the packet was UDP (UDP-encapsulated ESP or AH). In this case, it should only be used by the recipient as a hint that something might be wrong (because it could easily be forged). This message is not part of an INFORMATIONAL exchange, and the receiving node MUST NOT respond to it because doing so could cause a message loop. The message is constructed as follows: there are no IKE SPI values that would be meaningful to the recipient of such a notification; using zero values or random values are both acceptable, this being the exception to the rule in Section 3.1 that prohibits zero IKE Initiator SPIs. The Initiator flag is set to 1, the Response flag is set to 0, and the version flags are set in the normal fashion; these flags are described in Section 3.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初のケースでは、受信ノードにパケットが来た場所からIPアドレスにアクティブなIKE SAを持っている場合、情報交換でIke SAにWaywardパケットの無効な通知が送信される場合があります。通知データには、無効なパケットのSPIが含まれています。この通知の受信者は、SPIがAHまたはESP用かどうかを判断することはできませんが、SPIは2つで異なるはずであるため、これは重要ではありません。適切なIKE SAが存在しない場合、ノードはソースIPアドレスに暗号化された保護なしで情報メッセージを送信する場合があります。パケットがUDP（UDPにカプセル化されたESPまたはAH）の場合、Source UDPポートを宛先ポートとして使用します。この場合、受信者は何かが間違っている可能性があるというヒントとしてのみ使用されるべきです（簡単に偽造できるため）。このメッセージは情報交換の一部ではなく、受信ノードはメッセージループを引き起こす可能性があるため、受信ノードが応答してはなりません。メッセージは次のように作成されます。このような通知の受信者にとって意味のあるIKE SPI値はありません。ゼロ値またはランダム値を使用することは両方とも許容されます。これは、ゼロIKEイニシエーターSPIを禁止するセクション3.1のルールの例外です。イニシエーターフラグは1に設定され、応答フラグは0に設定され、バージョンフラグは通常の方法で設定されます。これらのフラグは、セクション3.1で説明されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the second and third cases, the message is always sent without cryptographic protection (outside of an IKE SA), and includes either an INVALID_IKE_SPI or an INVALID_MAJOR_VERSION notification (with no notification data). The message is a response message, and thus it is sent to the IP address and port from whence it came with the same IKE SPIs and the Message ID and Exchange Type are copied from the request. The Response flag is set to 1, and the version flags are set in the normal fashion.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2番目と3番目のケースでは、メッセージは常に暗号化保護なしに（IKE SAの外側）に送信され、Invalid_ike_spiまたはInvalid_major_version通知（通知データなし）が含まれます。メッセージは応答メッセージであるため、同じIke Spisが付属している場所からIPアドレスとポートに送信され、メッセージIDとExchangeタイプがリクエストからコピーされます。応答フラグは1に設定され、バージョンフラグは通常の方法で設定されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-6--Requirements-Terminology">
1.6. Requirements Terminology
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.6. 要件用語
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Definitions of the primitive terms in this document (such as Security Association or SA) can be found in [IPSECARCH]. It should be noted that parts of IKEv2 rely on some of the processing rules in [IPSECARCH], as described in various sections of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメント（セキュリティ協会やSAなど）の原始用語の定義は、[IPSecarch]にあります。このドキュメントのさまざまなセクションで説明されているように、IKEV2の一部は[IPSecarch]の処理ルールの一部に依存していることに注意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in [MUSTSHOULD].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「必須」、「そうしない」、「必須」、「必要」、「しない」、「そうしない」、「そうではない」、「そうでない」、「推奨」、「5月」、および「オプション」は、[必須]で説明されているように解釈される。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="1-7--Significant-Differences-between-RFC-4306-and-This-Document">
1.7. Significant Differences between RFC 4306 and This Document
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
1.7. RFC 4306とこのドキュメントの間に大きな違いがあります
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document contains clarifications and amplifications to IKEv2 [IKEV2]. Many of the clarifications are based on [Clarif]. The changes listed in that document were discussed in the IPsec Working Group and, after the Working Group was disbanded, on the IPsec mailing list. That document contains detailed explanations of areas that were unclear in IKEv2, and is thus useful to implementers of IKEv2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントには、IKEV2 [IKEV2]の明確化と増幅が含まれています。明確化の多くは[clarif]に基づいています。そのドキュメントにリストされている変更は、IPSECワーキンググループで議論され、ワーキンググループが解散した後、IPSECメーリングリストで説明されました。そのドキュメントには、IKEV2で不明な領域の詳細な説明が含まれているため、IKEV2の実装者に役立ちます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The protocol described in this document retains the same major version number (2) and minor version number (0) as was used in RFC 4306. That is, the version number is *not* changed from RFC 4306. The small number of technical changes listed here are not expected to affect RFC 4306 implementations that have already been deployed at the time of publication of this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントで説明されているプロトコルは、RFC 4306で使用されたのと同じメジャーバージョン番号（2）とマイナーバージョン番号（0）を保持します。つまり、バージョン番号はRFC 4306から *変更されません。ここにリストされているのは、このドキュメントの公開時に既に展開されているRFC 4306の実装に影響を与えるとは期待されていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document makes the figures and references a bit more consistent than they were in [IKEV2].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントにより、図と参照は[IKEV2]にあるよりも少し一貫しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 developers have noted that the SHOULD-level requirements in RFC 4306 are often unclear in that they don&#39;t say when it is OK to not obey the requirements. They also have noted that there are MUST-level requirements that are not related to interoperability. This document has more explanation of some of these requirements. All non-capitalized uses of the words SHOULD and MUST now mean their normal English sense, not the interoperability sense of [MUSTSHOULD].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2開発者は、RFC 4306のレベルレベルの要件は、要件に従わないことがいつまでないと言っていないという点で、しばしば不明であることが多いことに注目しています。彼らはまた、相互運用性に関連しない必須レベルの要件があることにも注目しています。このドキュメントには、これらの要件のいくつかについて詳しく説明しています。単語の資本化されていないすべての使用法は、[必須]の相互運用性の感覚ではなく、通常の英語の感覚を意味する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 (and IKEv1) developers have noted that there is a great deal of material in the tables of codes in Section 3.10.1 in RFC 4306. This leads to implementers not having all the needed information in the main body of the document. Much of the material from those tables has been moved into the associated parts of the main body of the document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2（およびIKEV1）の開発者は、RFC 4306のセクション3.10.1のコードの表に多くの資料があることに注目しています。これらのテーブルの資料の多くは、ドキュメントの本体の関連部分に移動しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document removes discussion of nesting AH and ESP. This was a mistake in RFC 4306 caused by the lag between finishing RFC 4306 and RFC 4301. Basically, IKEv2 is based on RFC 4301, which does not include &#34;SA bundles&#34; that were part of RFC 2401. While a single packet can go through IPsec processing multiple times, each of these passes uses a separate SA, and the passes are coordinated by the forwarding tables. In IKEv2, each of these SAs has to be created using a separate CREATE_CHILD_SA exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この文書は、ネスティングAHとESPの議論を削除します。これは、RFC 4306とRFC 4301の仕上げの間の遅れによって引き起こされるRFC 4306の間違いでした。基本的に、IKEV2はRFC 4301に基づいており、RFC 2401の一部である「SAバンドル」は含まれていません。IPSEC処理に複数回、これらのパスはそれぞれ別のSAを使用し、パスは転送テーブルによって調整されます。IKEV2では、これらのSASのそれぞれを、個別のcreate_child_sa Exchangeを使用して作成する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document removes discussion of the INTERNAL_ADDRESS_EXPIRY configuration attribute because its implementation was very problematic. Implementations that conform to this document MUST ignore proposals that have configuration attribute type 5, the old value for INTERNAL_ADDRESS_EXPIRY. This document also removed INTERNAL_IP6_NBNS as a configuration attribute.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、その実装が非常に問題があるため、内部_Address_Expiry構成属性の議論を削除します。このドキュメントに準拠する実装は、internal_address_expiryの古い値である構成属性タイプ5を持つ提案を無視する必要があります。このドキュメントは、internal_ip6_nbnsを構成属性として削除しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document removes the allowance for rejecting messages in which the payloads were not in the &#34;right&#34; order; now implementations MUST NOT reject them. This is due to the lack of clarity where the orders for the payloads are described.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、ペイロードが「正しい」順序でないメッセージを拒否する許可を削除します。現在、実装はそれらを拒否してはなりません。これは、ペイロードの注文が説明されている明確さがないためです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The lists of items from RFC 4306 that ended up in the IANA registry were trimmed to only include items that were actually defined in RFC 4306. Also, many of those lists are now preceded with the very important instruction to developers that they really should look at the IANA registry at the time of development because new items have been added since RFC 4306.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANAレジストリで終了したRFC 4306のアイテムのリストは、RFC 4306で実際に定義されたアイテムのみを含むようにトリミングされました。また、これらのリストの多くは、実際に見るべき開発者への非常に重要な指示が先行しています。RFC 4306以降、新しいアイテムが追加されたため、開発時のIANAレジストリ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document adds clarification on when notifications are and are not sent encrypted, depending on the state of the negotiation at the time.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、当時の交渉の状態に応じて、通知がいつ暗号化されているかについて明確に追加されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document discusses more about how to negotiate combined-mode ciphers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでは、複合モード暗号を交渉する方法について詳しく説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 1.3.2, &#34;The KEi payload SHOULD be included&#34; was changed to be &#34;The KEi payload MUST be included&#34;. This also led to changes in Section 2.18.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション1.3.2では、「KEIペイロードを含める必要があります」は、「KEIペイロードを含める必要がある」に変更されました。これにより、セクション2.18の変化も発生しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 2.1, there is new material covering how the initiator&#39;s SPI and/or IP is used to differentiate if this is a &#34;half-open&#34; IKE SA or a new request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.1には、イニシエーターのSPIおよび/またはIPが「半分のオープン」IKE SAまたは新しいリクエストであるかどうかを区別するためにどのように使用されるかをカバーする新しい資料があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document clarifies the use of the critical flag in Section 2.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この文書は、セクション2.5の重要なフラグの使用を明確にしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 2.8, &#34;Note that, when rekeying, the new Child SA MAY have different Traffic Selectors and algorithms than the old one&#34; was changed to &#34;Note that, when rekeying, the new Child SA SHOULD NOT have different Traffic Selectors and algorithms than the old one&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.8では、「再キーイングするとき、新しい子SAは古いものとは異なるトラフィックセレクターとアルゴリズムを持っている可能性があることに注意してください」に注意してください。古いもの&#34;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new Section 2.8.2 covers simultaneous IKE SA rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいセクション2.8.2は、同時にIKE SA Rekeyingをカバーしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new Section 2.9.2 covers Traffic Selectors in rekeying.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいセクション2.9.2は、再キーイングのトラフィックセレクターをカバーしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document adds the restriction in Section 2.13 that all pseudorandom functions (PRFs) used with IKEv2 MUST take variable-sized keys. This should not affect any implementations because there were no standardized PRFs that have fixed-size keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、IKEV2で使用されるすべての擬似ランダム関数（PRF）が可変サイズのキーを取得する必要があるというセクション2.13の制限を追加します。固定サイズのキーを備えた標準化されたPRFがなかったため、これは実装に影響しないはずです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Section 2.18 requires doing a Diffie-Hellman exchange when rekeying the IKE_SA. In theory, RFC 4306 allowed a policy where the Diffie-Hellman exchange was optional, but this was not useful (or appropriate) when rekeying the IKE_SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.18では、IKE_SAを再キーニングするときにDiffie-Hellman Exchangeを行う必要があります。理論的には、RFC 4306は、Diffie-Hellman Exchangeがオプションであったポリシーを許可しましたが、IKE_SAを再キーする際にこれは有用ではありませんでした（または適切ではありませんでした）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Section 2.21 has been greatly expanded to cover the different cases where error responses are needed and the appropriate responses to them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.21は、エラー応答が必要なさまざまなケースとそれらに対する適切な応答をカバーするために大幅に拡張されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Section 2.23 clarified that, in NAT traversal, now both UDP-encapsulated IPsec packets and non-UDP-encapsulated IPsec packets need to be understood when receiving.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.23は、NAT Traversalで、現在UDPにカプセル化されたIPSECパケットと非UUDPでカプセル化されていないIPSECパケットの両方が、受信時に理解する必要があることを明らかにしました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Added Section 2.23.1 to describe NAT traversal when transport mode is requested.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
輸送モードが要求されたときのNATトラバーサルを説明するためのセクション2.23.1を追加しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Added Section 2.25 to explain how to act when there are timing collisions when deleting and/or rekeying SAs, and two new error notifications (TEMPORARY_FAILURE and CHILD_SA_NOT_FOUND) were defined.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SASの削除および/または再キーイング時にタイミング衝突が発生したときに行動する方法を説明するセクション2.25を追加し、2つの新しいエラー通知（Compantial_failure and child_sa_not_found）が定義されました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 3.6, &#34;Implementations MUST support the HTTP method for hash-and-URL lookup. The behavior of other URL methods is not currently specified, and such methods SHOULD NOT be used in the absence of a document specifying them&#34; was added.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション3.6では、「実装はハッシュアンド-URLルックアップのHTTPメソッドをサポートする必要があります。他のURLメソッドの動作は現在指定されておらず、それらを指定するドキュメントの存在下ではそのような方法を使用してはなりません」が追加されました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In Section 3.15.3, a pointer to a new document that is related to configuration of IPv6 addresses was added.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション3.15.3では、IPv6アドレスの構成に関連する新しいドキュメントへのポインターが追加されました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Appendix C was expanded and clarified.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
付録Cが拡張され、明確にされました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2--IKE-Protocol-Details-and-Variations">
2. IKE Protocol Details and Variations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2. IKEプロトコルの詳細とバリエーション
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE normally listens and sends on UDP port 500, though IKE messages may also be received on UDP port 4500 with a slightly different format (see Section 2.23). Since UDP is a datagram (unreliable) protocol, IKE includes in its definition recovery from transmission errors, including packet loss, packet replay, and packet forgery. IKE is designed to function so long as (1) at least one of a series of retransmitted packets reaches its destination before timing out; and (2) the channel is not so full of forged and replayed packets so as to exhaust the network or CPU capacities of either endpoint. Even in the absence of those minimum performance requirements, IKE is designed to fail cleanly (as though the network were broken).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは通常、UDPポート500で耳を傾け、送信しますが、IKEメッセージはUDPポート4500でわずかに異なる形式で受信される場合があります（セクション2.23を参照）。UDPはデータグラム（信頼性の低い）プロトコルであるため、IKEはパケット損失、パケットリプレイ、パケット偽造などの伝送エラーからの定義回復に含まれています。IKEは、（1）タイミングを出す前に、一連の再送信パケットの少なくとも1つが目的地に到達する限り機能するように設計されています。（2）チャンネルは、いずれかのエンドポイントのネットワークまたはCPU容量を排出するために、鍛造パケットとリプレイされたパケットでいっぱいではありません。これらの最小パフォーマンス要件がない場合でも、IKEは（ネットワークが壊れているかのように）きれいに失敗するように設計されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although IKEv2 messages are intended to be short, they contain structures with no hard upper bound on size (in particular, digital certificates), and IKEv2 itself does not have a mechanism for fragmenting large messages. IP defines a mechanism for fragmentation of oversized UDP messages, but implementations vary in the maximum message size supported. Furthermore, use of IP fragmentation opens an implementation to denial-of-service (DoS) attacks [DOSUDPPROT]. Finally, some NAT and/or firewall implementations may block IP fragments.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2メッセージは短くすることを目的としていますが、サイズにハード上限のない構造（特にデジタル証明書）が含まれており、IKEV2自体には大きなメッセージを断片化するメカニズムがありません。IPは、特大のUDPメッセージの断片化のメカニズムを定義しますが、実装はサポートされている最大メッセージサイズによって異なります。さらに、IPフラグメンテーションの使用は、サービス拒否（DOS）攻撃[DOSUDPPROT]への実装を開きます。最後に、一部のNATおよび/またはファイアウォールの実装により、IPフラグメントがブロックされる場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All IKEv2 implementations MUST be able to send, receive, and process IKE messages that are up to 1280 octets long, and they SHOULD be able to send, receive, and process messages that are up to 3000 octets long. IKEv2 implementations need to be aware of the maximum UDP message size supported and MAY shorten messages by leaving out some certificates or cryptographic suite proposals if that will keep messages below the maximum. Use of the &#34;Hash and URL&#34; formats rather than including certificates in exchanges where possible can avoid most problems. Implementations and configuration need to keep in mind, however, that if the URL lookups are possible only after the Child SA is established, recursion issues could prevent this technique from working.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのIKEV2実装は、最大1280オクテットの長さのIKEメッセージを送信、受信、および処理できる必要があり、最大3000オクテットのメッセージを送信、受信、および処理できる必要があります。IKEV2の実装は、サポートされている最大のUDPメッセージサイズを認識し、メッセージを短縮することにより、メッセージを短縮する必要があります。可能であれば交換に証明書を含めるのではなく、「ハッシュとURL」形式の使用がほとんどの問題を回避できます。ただし、実装と構成は、子SAが確立された後にのみURLルックアップが可能な場合、再帰の問題がこの手法が機能するのを防ぐことができることに留意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The UDP payload of all packets containing IKE messages sent on port 4500 MUST begin with the prefix of four zeros; otherwise, the receiver won&#39;t know how to handle them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ポート4500に送信されたIKEメッセージを含むすべてのパケットのUDPペイロードは、4つのゼロのプレフィックスから開始する必要があります。それ以外の場合、レシーバーはそれらを処理する方法がわかりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-1--Use-of-Retransmission-Timers">
2.1. Use of Retransmission Timers
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.1. 再送信タイマーの使用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All messages in IKE exist in pairs: a request and a response. The setup of an IKE SA normally consists of two exchanges. Once the IKE SA is set up, either end of the Security Association may initiate requests at any time, and there can be many requests and responses &#34;in flight&#34; at any given moment. But each message is labeled as either a request or a response, and for each exchange, one end of the Security Association is the initiator and the other is the responder.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEのすべてのメッセージはペアに存在します：リクエストと応答。IKE SAのセットアップは通常、2つの交換で構成されています。IKE SAがセットアップされると、セキュリティ協会のいずれかの端がいつでもリクエストを開始する場合があり、いつでも「飛行中」に多くのリクエストと応答がある場合があります。しかし、各メッセージは要求または応答のいずれかとしてラベル付けされており、各交換について、セキュリティ協会の一方の端がイニシエーターであり、もう一方は応答者です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For every pair of IKE messages, the initiator is responsible for retransmission in the event of a timeout. The responder MUST never retransmit a response unless it receives a retransmission of the request. In that event, the responder MUST ignore the retransmitted request except insofar as it causes a retransmission of the response. The initiator MUST remember each request until it receives the corresponding response. The responder MUST remember each response until it receives a request whose sequence number is larger than or equal to the sequence number in the response plus its window size (see Section 2.3). In order to allow saving memory, responders are allowed to forget the response after a timeout of several minutes. If the responder receives a retransmitted request for which it has already forgotten the response, it MUST ignore the request (and not, for example, attempt constructing a new response).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEメッセージのすべてのペアについて、イニシエーターはタイムアウトの場合に再送信を担当します。応答者は、リクエストの再送信を受け取らない限り、応答を再送信してはなりません。その場合、応答者は応答の再送信を引き起こす限り、再送信要求を無視する必要があります。イニシエーターは、対応する応答を受信するまで各要求を覚えておく必要があります。レスポンダーは、応答のシーケンス番号以上がウィンドウサイズのシーケンス番号よりも大きい要求を受信するまで、各応答を覚えておく必要があります（セクション2.3を参照）。メモリを保存できるようにするために、レスポンダーは数分のタイムアウト後に応答を忘れることができます。応答者が再送信されたリクエストを受け取った場合、応答を既に忘れている場合、リクエストを無視する必要があります（たとえば、新しい応答の構築を試みません）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE is a reliable protocol: the initiator MUST retransmit a request until it either receives a corresponding response or deems the IKE SA to have failed. In the latter case, the initiator discards all state associated with the IKE SA and any Child SAs that were negotiated using that IKE SA. A retransmission from the initiator MUST be bitwise identical to the original request. That is, everything starting from the IKE header (the IKE SA initiator&#39;s SPI onwards) must be bitwise identical; items before it (such as the IP and UDP headers) do not have to be identical.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは信頼できるプロトコルです。イニシエーターは、対応する応答を受信するか、IKE SAが失敗したと判断するまでリクエストを再送信する必要があります。後者の場合、イニシエーターは、IKE SAに関連するすべての状態と、そのIKE SAを使用して交渉された子供のSASを破棄します。イニシエーターからの再送信は、元のリクエストと少し同一でなければなりません。つまり、IKEヘッダー（IKE SAイニシエーターのSPI以降）から始まるものはすべて、少し同一でなければなりません。それ以前のアイテム（IPヘッダーやUDPヘッダーなど）は同一である必要はありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Retransmissions of the IKE_SA_INIT request require some special handling. When a responder receives an IKE_SA_INIT request, it has to determine whether the packet is a retransmission belonging to an existing &#34;half-open&#34; IKE SA (in which case the responder retransmits the same response), or a new request (in which case the responder creates a new IKE SA and sends a fresh response), or it belongs to an existing IKE SA where the IKE_AUTH request has been already received (in which case the responder ignores it).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_SA_INITリクエストの再送信には、特別な取り扱いが必要です。レスポンダーがIKE_SA_INITリクエストを受信した場合、パケットが既存の「半分のオープン」IKESAに属する再送信であるかどうかを判断する必要があります（この場合、レスポンダーは同じ応答を再送信します）、または新しいリクエスト（この場合、Responderは新しいIKE SAを作成し、新しい応答を送信します）、またはIKE_AUTHリクエストがすでに受信されている既存のIKE SAに属します（この場合、応答者はそれを無視します）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is not sufficient to use the initiator&#39;s SPI and/or IP address to differentiate between these three cases because two different peers behind a single NAT could choose the same initiator SPI. Instead, a robust responder will do the IKE SA lookup using the whole packet, its hash, or the Ni payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
単一のNATの後ろの2つの異なるピアが同じイニシエーターSPIを選択できるため、イニシエーターのSPIおよび/またはIPアドレスを使用してこれらの3つのケースを区別することは十分ではありません。代わりに、堅牢なレスポンダーは、パケット全体、ハッシュ、またはNIペイロードを使用してIKE SAルックアップを行います。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The retransmission policy for one-way messages is somewhat different from that for regular messages. Because no acknowledgement is ever sent, there is no reason to gratuitously retransmit one-way messages. Given that all these messages are errors, it makes sense to send them only once per &#34;offending&#34; packet, and only retransmit if further offending packets are received. Still, it also makes sense to limit retransmissions of such error messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一方向のメッセージの再送信ポリシーは、通常のメッセージの再送信ポリシーとは多少異なります。承認が送られていないため、一方向のメッセージを無償で再送信する理由はありません。これらすべてのメッセージがエラーであることを考えると、「問題のある」パケットごとに1回しか送信することは理にかなっており、さらに問題のあるパケットが受信された場合にのみ再送信します。それでも、このようなエラーメッセージの再送信を制限することも理にかなっています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-2--Use-of-Sequence-Numbers-for-Message-ID">
2.2. Use of Sequence Numbers for Message ID
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.2. メッセージIDのシーケンス番号の使用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Every IKE message contains a Message ID as part of its fixed header. This Message ID is used to match up requests and responses and to identify retransmissions of messages. Retransmission of a message MUST use the same Message ID as the original message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのIKEメッセージには、固定ヘッダーの一部としてメッセージIDが含まれています。このメッセージIDは、リクエストと応答を一致させ、メッセージの再送信を特定するために使用されます。メッセージの再送信は、元のメッセージと同じメッセージIDを使用する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Message ID is a 32-bit quantity, which is zero for the IKE_SA_INIT messages (including retries of the message due to responses such as COOKIE and INVALID_KE_PAYLOAD), and incremented for each subsequent exchange. Thus, the first pair of IKE_AUTH messages will have an ID of 1, the second (when EAP is used) will be 2, and so on. The Message ID is reset to zero in the new IKE SA after the IKE SA is rekeyed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メッセージIDは32ビット数量であり、IKE_SA_INITメッセージ（CookieやInvalid_ke_Payloadなどの応答によるメッセージの取得を含む）でゼロであり、その後の各交換の増加です。したがって、IKE_AUTHメッセージの最初のペアには1のIDがあり、2番目（EAPが使用される場合）は2などになります。IKE SAが再キーになった後、新しいIKE SAでメッセージIDがゼロにリセットされます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each endpoint in the IKE Security Association maintains two &#34;current&#34; Message IDs: the next one to be used for a request it initiates and the next one it expects to see in a request from the other end. These counters increment as requests are generated and received. Responses always contain the same Message ID as the corresponding request. That means that after the initial exchange, each integer n may appear as the Message ID in four distinct messages: the nth request from the original IKE initiator, the corresponding response, the nth request from the original IKE responder, and the corresponding response. If the two ends make a very different number of requests, the Message IDs in the two directions can be very different. There is no ambiguity in the messages, however, because the Initiator and Response flags in the message header specify which of the four messages a particular one is.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE Security Associationの各エンドポイントには、2つの「現在の」メッセージIDが維持されます。次の「現在」のメッセージIDは、開始するリクエストに使用され、次のエンドポイントは反対側からのリクエストで表示されると予想される次のエンドポイントです。これらのカウンターは、リクエストが生成され、受信されると増加します。応答には、対応するリクエストと常に同じメッセージIDが含まれています。つまり、最初の交換の後、各整数nは、4つの異なるメッセージのメッセージIDとして表示される可能性があります。元のIKEイニシエーターからのn番目の要求、対応する応答、元のIKEレスポンダーからのn番目の要求、および対応する応答です。両端が非常に異なる数のリクエストを作成する場合、2つの方向のメッセージIDは非常に異なる場合があります。ただし、メッセージヘッダー内のイニシエーターと応答フラグが4つのメッセージのどれを特定しているかを指定するため、メッセージには曖昧さはありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Throughout this document, &#34;initiator&#34; refers to the party who initiated the exchange being described. The &#34;original initiator&#34; always refers to the party who initiated the exchange that resulted in the current IKE SA. In other words, if the &#34;original responder&#34; starts rekeying the IKE SA, that party becomes the &#34;original initiator&#34; of the new IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この文書を通して、「イニシエーター」とは、記載されている交換を開始した当事者を指します。「元のイニシエーター」とは、常に現在のIKE SAをもたらした交換を開始した当事者を指します。言い換えれば、「元のレスポンダー」がIKE SAを再ケーニングし始めた場合、そのパーティーは新しいIKE SAの「オリジナルイニシエーター」になります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that Message IDs are cryptographically protected and provide protection against message replays. In the unlikely event that Message IDs grow too large to fit in 32 bits, the IKE SA MUST be closed or rekeyed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メッセージIDは暗号化されており、メッセージリプレイに対する保護を提供することに注意してください。メッセージIDが32ビットに収まるには大きすぎて成長する可能性が高い場合、IKE SAを閉じたり再キーにしたりする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-3--Window-Size-for-Overlapping-Requests">
2.3. Window Size for Overlapping Requests
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.3. 重複するリクエストのためのウィンドウサイズ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The SET_WINDOW_SIZE notification asserts that the sending endpoint is capable of keeping state for multiple outstanding exchanges, permitting the recipient to send multiple requests before getting a response to the first. The data associated with a SET_WINDOW_SIZE notification MUST be 4 octets long and contain the big endian representation of the number of messages the sender promises to keep. The window size is always one until the initial exchanges complete.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
set_window_size通知は、送信エンドポイントが複数の未解決の交換のために状態を維持できることを主張しているため、受信者は最初に応答する前に複数のリクエストを送信することができます。set_window_size通知に関連付けられているデータは、長さ4オクターであり、送信者が保持することを約束するメッセージの数の大きなエンディアン表現を含む必要があります。ウィンドウサイズは、最初の交換が完了するまで常に1つです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE endpoint MUST wait for a response to each of its messages before sending a subsequent message unless it has received a SET_WINDOW_SIZE Notify message from its peer informing it that the peer is prepared to maintain state for multiple outstanding messages in order to allow greater throughput.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEエンドポイントは、Set_window_sizeがピアからメッセージを受信しない限り、後続のメッセージを送信する前に、各メッセージへの応答を待機する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After an IKE SA is set up, in order to maximize IKE throughput, an IKE endpoint MAY issue multiple requests before getting a response to any of them, up to the limit set by its peer&#39;s SET_WINDOW_SIZE. These requests may pass one another over the network. An IKE endpoint MUST be prepared to accept and process a request while it has a request outstanding in order to avoid a deadlock in this situation. An IKE endpoint may also accept and process multiple requests while it has a request outstanding.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAがセットアップされた後、IKEスループットを最大化するために、IKEエンドポイントは、ピアのSET_WINDOW_SIZEによって設定された制限まで、それらのいずれかに応答する前に複数のリクエストを発行する場合があります。これらのリクエストは、ネットワーク上で互いに渡される場合があります。IKEエンドポイントは、この状況での行き詰まりを避けるために、リクエストが発行されている間にリクエストを受け入れて処理する準備をする必要があります。IKEエンドポイントは、リクエストが発行されている間、複数のリクエストを受け入れて処理する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE endpoint MUST NOT exceed the peer&#39;s stated window size for transmitted IKE requests. In other words, if the responder stated its window size is N, then when the initiator needs to make a request X, it MUST wait until it has received responses to all requests up through request X-N. An IKE endpoint MUST keep a copy of (or be able to regenerate exactly) each request it has sent until it receives the corresponding response. An IKE endpoint MUST keep a copy of (or be able to regenerate exactly) the number of previous responses equal to its declared window size in case its response was lost and the initiator requests its retransmission by retransmitting the request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEエンドポイントは、送信されたIKEリクエストのピアの指定されたウィンドウサイズを超えてはなりません。言い換えれば、ResponderがウィンドウサイズがNであると述べた場合、イニシエーターがリクエストXを作成する必要がある場合、リクエストX-Nを介してすべてのリクエストに応答を受信するまで待つ必要があります。IKEエンドポイントは、対応する応答を受信するまで送信した各リクエストのコピーを保持する（または正確に再生できる）する必要があります。IKEエンドポイントは、その応答が失われ、イニシエーターがリクエストを再送信することにより再送信を要求した場合に、宣言されたウィンドウサイズに等しい以前の応答の数のコピーを保持する必要があります（または正確に再生できます）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE endpoint supporting a window size greater than one ought to be capable of processing incoming requests out of order to maximize performance in the event of network failures or packet reordering.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1つ以上のウィンドウサイズをサポートするIKEエンドポイントは、ネットワークの障害やパケットの並べ替えが発生した場合にパフォーマンスを最大化するために、着信要求を順番に処理できるはずです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The window size is normally a (possibly configurable) property of a particular implementation, and is not related to congestion control (unlike the window size in TCP, for example). In particular, what the responder should do when it receives a SET_WINDOW_SIZE notification containing a smaller value than is currently in effect is not defined. Thus, there is currently no way to reduce the window size of an existing IKE SA; you can only increase it. When rekeying an IKE SA, the new IKE SA starts with window size 1 until it is explicitly increased by sending a new SET_WINDOW_SIZE notification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常、ウィンドウサイズは特定の実装の（おそらく構成可能な）プロパティであり、輻輳制御とは関係ありません（たとえば、TCPのウィンドウサイズとは異なります）。特に、現在有効よりも少ない値を含むSET_WINDOW_SIZE通知を受信したときにレスポンダーがすべきことは定義されていません。したがって、現在、既存のIKESAのウィンドウサイズを縮小する方法はありません。あなたはそれを増やすことしかできません。IKE SAを再キーにすると、新しいIKE SAは、新しいset_window_size通知を送信することにより、明示的に増加するまでウィンドウサイズ1で始まります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The INVALID_MESSAGE_ID notification is sent when an IKE Message ID outside the supported window is received. This Notify message MUST NOT be sent in a response; the invalid request MUST NOT be acknowledged. Instead, inform the other side by initiating an INFORMATIONAL exchange with Notification data containing the four-octet invalid Message ID. Sending this notification is OPTIONAL, and notifications of this type MUST be rate limited.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Invalid_message_id通知は、サポートされているウィンドウの外側のIKEメッセージIDが受信されたときに送信されます。この通知メッセージは応答で送信してはなりません。無効な要求を確認してはなりません。代わりに、4-OCTET無効なメッセージIDを含む通知データを使用して情報交換を開始することにより、反対側に通知します。この通知を送信することはオプションであり、このタイプの通知はレート制限する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-4--State-Synchronization-and-Connection-Timeouts">
2.4. State Synchronization and Connection Timeouts
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.4. 状態の同期と接続タイムアウト
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE endpoint is allowed to forget all of its state associated with an IKE SA and the collection of corresponding Child SAs at any time. This is the anticipated behavior in the event of an endpoint crash and restart. It is important when an endpoint either fails or reinitializes its state that the other endpoint detect those conditions and not continue to waste network bandwidth by sending packets over discarded SAs and having them fall into a black hole.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEエンドポイントは、IKE SAと対応する子SASのコレクションに関連するすべての状態をいつでも忘れることができます。これは、エンドポイントがクラッシュして再起動した場合の予想される動作です。エンドポイントが、他のエンドポイントがそれらの条件を検出し、廃棄されたSASにパケットを送信してブラックホールに落ちることでネットワーク帯域幅を無駄にしないという状態に失敗または再現されている場合に重要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The INITIAL_CONTACT notification asserts that this IKE SA is the only IKE SA currently active between the authenticated identities. It MAY be sent when an IKE SA is established after a crash, and the recipient MAY use this information to delete any other IKE SAs it has to the same authenticated identity without waiting for a timeout. This notification MUST NOT be sent by an entity that may be replicated (e.g., a roaming user&#39;s credentials where the user is allowed to connect to the corporate firewall from two remote systems at the same time). The INITIAL_CONTACT notification, if sent, MUST be in the first IKE_AUTH request or response, not as a separate exchange afterwards; receiving parties MAY ignore it in other messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Initial_Contact通知は、このIKE SAが認証されたアイデンティティの間で現在アクティブな唯一のIKESAであると主張しています。IKE SAがクラッシュ後に確立されたときに送信され、受信者はこの情報を使用して、タイムアウトを待たずに同じ認証されたアイデンティティに対して他のIKE SASを削除することができます。この通知は、複製される可能性のあるエンティティによって送信されてはなりません（たとえば、ユーザーが同時に2つのリモートシステムからコーポレートファイアウォールに接続することが許可されているローミングユーザーの資格情報）。initial_contactの通知は、送信された場合、最初のike_auth要求または応答である必要があります。受信当事者は、他のメッセージでそれを無視する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Since IKE is designed to operate in spite of DoS attacks from the network, an endpoint MUST NOT conclude that the other endpoint has failed based on any routing information (e.g., ICMP messages) or IKE messages that arrive without cryptographic protection (e.g., Notify messages complaining about unknown SPIs). An endpoint MUST conclude that the other endpoint has failed only when repeated attempts to contact it have gone unanswered for a timeout period or when a cryptographically protected INITIAL_CONTACT notification is received on a different IKE SA to the same authenticated identity. An endpoint should suspect that the other endpoint has failed based on routing information and initiate a request to see whether the other endpoint is alive. To check whether the other side is alive, IKE specifies an empty INFORMATIONAL message that (like all IKE requests) requires an acknowledgement (note that within the context of an IKE SA, an &#34;empty&#34; message consists of an IKE header followed by an Encrypted payload that contains no payloads). If a cryptographically protected (fresh, i.e., not retransmitted) message has been received from the other side recently, unprotected Notify messages MAY be ignored. Implementations MUST limit the rate at which they take actions based on unprotected messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEはネットワークからのDOS攻撃にもかかわらず動作するように設計されているため、エンドポイントは、他のエンドポイントが、暗号化されていないルーティング情報（例：ICMPメッセージ）またはIKEメッセージに基づいて失敗したと結論付けてはなりません。不明なスピスについて不平を言う）。エンドポイントは、他のエンドポイントが繰り返し接触しようとする試みがタイムアウト期間に未回答になった場合、または暗号化されたInitial_Contact通知が別のIKE SAで同じ認証されたアイデンティティに対して受信された場合にのみ失敗したと結論付ける必要があります。エンドポイントは、ルーティング情報に基づいて他のエンドポイントが失敗したことを疑うはずであり、他のエンドポイントが生きているかどうかを確認するリクエストを開始する必要があります。反対側が生きているかどうかを確認するために、IKEは（すべてのIKEリクエストと同様に）承認を必要とする空の情報メッセージを指定します（IKE SAのコンテキスト内では、「空の」メッセージはIKEヘッダーと暗号化されたもので構成されていることに注意してくださいペイロードが含まれていないペイロード）。最近、反対側から暗号化された（新鮮な、つまり再送信されない）メッセージが最近受信された場合、保護されていない通知メッセージが無視される場合があります。実装は、保護されていないメッセージに基づいてアクションを実行するレートを制限する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The number of retries and length of timeouts are not covered in this specification because they do not affect interoperability. It is suggested that messages be retransmitted at least a dozen times over a period of at least several minutes before giving up on an SA, but different environments may require different rules. To be a good network citizen, retransmission times MUST increase exponentially to avoid flooding the network and making an existing congestion situation worse. If there has only been outgoing traffic on all of the SAs associated with an IKE SA, it is essential to confirm liveness of the other endpoint to avoid black holes. If no cryptographically protected messages have been received on an IKE SA or any of its Child SAs recently, the system needs to perform a liveness check in order to prevent sending messages to a dead peer. (This is sometimes called &#34;dead peer detection&#34; or &#34;DPD&#34;, although it is really detecting live peers, not dead ones.) Receipt of a fresh cryptographically protected message on an IKE SA or any of its Child SAs ensures liveness of the IKE SA and all of its Child SAs. Note that this places requirements on the failure modes of an IKE endpoint. An implementation needs to stop sending over any SA if some failure prevents it from receiving on all of the associated SAs. If a system creates Child SAs that can fail independently from one another without the associated IKE SA being able to send a delete message, then the system MUST negotiate such Child SAs using separate IKE SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
再試行の数とタイムアウトの長さは、相互運用性に影響しないため、この仕様ではカバーされていません。SAをあきらめる前に、少なくとも数分間でメッセージを少なくとも数十回再送信することが示唆されていますが、異なる環境には異なるルールが必要になる場合があります。優れたネットワーク市民になるためには、再送信時間を指数関数的に増やして、ネットワークに浸水させ、既存の混雑の状況を悪化させることを避ける必要があります。IKE SAに関連付けられたすべてのSASに発信トラフィックしかなかった場合、ブラックホールを避けるために他のエンドポイントの活性を確認することが不可欠です。最近、IKE SAまたはその子SASの暗号化されたメッセージを受信していない場合、システムは、デッドピアにメッセージを送信するのを防ぐために、活性チェックを実行する必要があります。（これは「死んだピア検出」または「DPD」と呼ばれることもありますが、実際には死んだピアではなく、ライブピアを検出しています。）IKE SAまたはその子供のSASでの新鮮な暗号化されたメッセージの受信により、IKEの活気が保証されます。SAとその子供のすべて。これにより、IKEエンドポイントの障害モードに要件があることに注意してください。いくつかの障害が関連するすべてのSAでの受信を妨げる場合、実装は任意のSAの送信を停止する必要があります。システムが、関連するIKE SAが削除メッセージを送信できない限り、互いに独立して失敗する可能性のある子SASを作成する場合、システムは個別のIKE SASを使用してそのような子SASをネゴシエートする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There is a DoS attack on the initiator of an IKE SA that can be avoided if the initiator takes the proper care. Since the first two messages of an SA setup are not cryptographically protected, an attacker could respond to the initiator&#39;s message before the genuine responder and poison the connection setup attempt. To prevent this, the initiator MAY be willing to accept multiple responses to its first message, treat each as potentially legitimate, respond to it, and then discard all the invalid half-open connections when it receives a valid cryptographically protected response to any one of its requests. Once a cryptographically valid response is received, all subsequent responses should be ignored whether or not they are cryptographically valid.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Ike SAのイニシエーターに対するDOS攻撃があります。これは、イニシエーターが適切な注意を払っている場合に避けることができます。SAセットアップの最初の2つのメッセージは暗号化されていないため、攻撃者は本物のレスポンダーの前にイニシエーターのメッセージに応答し、接続セットアップの試みを毒することができます。これを防ぐために、イニシエーターは、最初のメッセージに対する複数の応答を受け入れ、それぞれを潜在的に合法として扱い、それに応答し、その後、有効な暗号化された暗号化された反応を受信したときにすべての無効な半分の接続を破棄することをいとわない場合があります。その要求。暗号化された有効な応答が受信されると、暗号化された有効であるかどうかにかかわらず、後続の応答はすべて無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that with these rules, there is no reason to negotiate and agree upon an SA lifetime. If IKE presumes the partner is dead, based on repeated lack of acknowledgement to an IKE message, then the IKE SA and all Child SAs set up through that IKE SA are deleted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これらのルールを使用すると、SAの寿命について交渉して同意する理由はないことに注意してください。IKEがIKEメッセージの繰り返しの承認の欠如に基づいてパートナーが死んでいると推定した場合、IKE SAとすべての子供SASがIKE SAを削除したことを設定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE endpoint may at any time delete inactive Child SAs to recover resources used to hold their state. If an IKE endpoint chooses to delete Child SAs, it MUST send Delete payloads to the other end notifying it of the deletion. It MAY similarly time out the IKE SA. Closing the IKE SA implicitly closes all associated Child SAs. In this case, an IKE endpoint SHOULD send a Delete payload indicating that it has closed the IKE SA unless the other endpoint is no longer responding.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEエンドポイントは、いつでも非アクティブな子SASを削除して、状態を保持するために使用されるリソースを回復する場合があります。IKE EndpointがChild SASを削除することを選択した場合、削除を削除することを反対側に送信する必要があります。同様にIke SAをタイムアウトする可能性があります。IKE SAを閉じると、関連するすべての子供SASを暗黙的に閉じます。この場合、IKEエンドポイントは、他のエンドポイントが応答しなくない限り、IKE SAを閉じたことを示す削除ペイロードを送信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-5--Version-Numbers-and-Forward-Compatibility">
2.5. Version Numbers and Forward Compatibility
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.5. バージョン番号と転送互換性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document describes version 2.0 of IKE, meaning the major version number is 2 and the minor version number is 0. This document is a replacement for [IKEV2]. It is likely that some implementations will want to support version 1.0 and version 2.0, and in the future, other versions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでは、IKEのバージョン2.0について説明します。つまり、メジャーバージョン番号は2で、マイナーバージョン番号は0です。このドキュメントは[IKEV2]の代替品です。一部の実装では、バージョン1.0とバージョン2.0、および将来、他のバージョンをサポートする可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The major version number should be incremented only if the packet formats or required actions have changed so dramatically that an older version node would not be able to interoperate with a newer version node if it simply ignored the fields it did not understand and took the actions specified in the older specification. The minor version number indicates new capabilities, and MUST be ignored by a node with a smaller minor version number, but used for informational purposes by the node with the larger minor version number. For example, it might indicate the ability to process a newly defined Notify message type. The node with the larger minor version number would simply note that its correspondent would not be able to understand that message and therefore would not send it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
メジャーバージョン番号は、パケット形式または必要なアクションが非常に劇的に変更された場合にのみインクリメントする必要があります。古い仕様で。マイナーバージョン番号は新しい機能を示し、小型バージョン番号を持つノードでは無視する必要がありますが、より大きなマイナーバージョン番号を持つノードで情報目的で使用されます。たとえば、新しく定義されたNotifyメッセージタイプを処理する機能を示している場合があります。マイナーバージョン番号が大きいノードは、その特派員がそのメッセージを理解できず、したがってそれを送信しないことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If an endpoint receives a message with a higher major version number, it MUST drop the message and SHOULD send an unauthenticated Notify message of type INVALID_MAJOR_VERSION containing the highest (closest) version number it supports. If an endpoint supports major version n, and major version m, it MUST support all versions between n and m. If it receives a message with a major version that it supports, it MUST respond with that version number. In order to prevent two nodes from being tricked into corresponding with a lower major version number than the maximum that they both support, IKE has a flag that indicates that the node is capable of speaking a higher major version number.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
エンドポイントがより高いメジャーバージョン番号を持つメッセージを受信した場合、メッセージをドロップする必要があり、サポートする最高の（最も近い）バージョン番号を含むタイプInvalid_major_versionの認証されていない通知メッセージを送信する必要があります。エンドポイントがメジャーバージョンnとメジャーバージョンMをサポートする場合、nとmの間のすべてのバージョンをサポートする必要があります。サポートするメジャーバージョンでメッセージを受信した場合、そのバージョン番号で応答する必要があります。2つのノードが、両方ともサポートする最大値よりも低いメジャーバージョン数に対応するのを防ぐために、ノードがより高いメジャーバージョン番号を話すことができることを示すフラグを持っています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thus, the major version number in the IKE header indicates the version number of the message, not the highest version number that the transmitter supports. If the initiator is capable of speaking versions n, n+1, and n+2, and the responder is capable of speaking versions n and n+1, then they will negotiate speaking n+1, where the initiator will set a flag indicating its ability to speak a higher version. If they mistakenly (perhaps through an active attacker sending error messages) negotiate to version n, then both will notice that the other side can support a higher version number, and they MUST break the connection and reconnect using version n+1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
したがって、IKEヘッダーのメジャーバージョン番号は、送信機がサポートする最高のバージョン番号ではなく、メッセージのバージョン番号を示します。イニシエーターがバージョンn、n 1、およびn 2を話すことができ、レスポンダーがバージョンnおよびn 1を話すことができる場合、それらはスピーキングn 1と交渉します。ここで、イニシエーターは話す能力を示すフラグを設定します。より高いバージョン。それらが誤って（おそらくアクティブな攻撃者を送信するエラーメッセージを介して）バージョンNにネゴシエートする場合、両方が反対側がより高いバージョン数をサポートできることに気付き、バージョンn 1を使用して接続を破り、再接続する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that IKEv1 does not follow these rules, because there is no way in v1 of noting that you are capable of speaking a higher version number. So an active attacker can trick two v2-capable nodes into speaking v1. When a v2-capable node negotiates down to v1, it should note that fact in its logs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV1はこれらのルールに従っていないことに注意してください。なぜなら、V1には、より高いバージョン番号を話すことができることに気付く方法はないからです。したがって、アクティブな攻撃者は、2つのV2対応ノードをトリックしてSpeaking V1になります。V2対応ノードがV1に交渉する場合、そのログにその事実に注意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Also, for forward compatibility, all fields marked RESERVED MUST be set to zero by an implementation running version 2.0, and their content MUST be ignored by an implementation running version 2.0 (&#34;Be conservative in what you send and liberal in what you receive&#34; [IP]). In this way, future versions of the protocol can use those fields in a way that is guaranteed to be ignored by implementations that do not understand them. Similarly, payload types that are not defined are reserved for future use; implementations of a version where they are undefined MUST skip over those payloads and ignore their contents.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
また、順方向の互換性のために、予約されたすべてのフィールドは、バージョン2.0を実行する実装によってゼロに設定する必要があり、そのコンテンツはバージョンを実行する実装で無視する必要があります（「あなたが送るもので保守的であり、受け取るものでリベラルである」[IP]）。このように、プロトコルの将来のバージョンは、それらを理解していない実装によって無視されることが保証されている方法でこれらのフィールドを使用できます。同様に、定義されていないペイロードタイプは、将来の使用のために予約されています。未定義のバージョンの実装は、それらのペイロードをスキップし、その内容を無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 adds a &#34;critical&#34; flag to each payload header for further flexibility for forward compatibility. If the critical flag is set and the payload type is unrecognized, the message MUST be rejected and the response to the IKE request containing that payload MUST include a Notify payload UNSUPPORTED_CRITICAL_PAYLOAD, indicating an unsupported critical payload was included. In that Notify payload, the notification data contains the one-octet payload type. If the critical flag is not set and the payload type is unsupported, that payload MUST be ignored. Payloads sent in IKE response messages MUST NOT have the critical flag set. Note that the critical flag applies only to the payload type, not the contents. If the payload type is recognized, but the payload contains something that is not (such as an unknown transform inside an SA payload, or an unknown Notify Message Type inside a Notify payload), the critical flag is ignored.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2は、各ペイロードヘッダーに「重要な」フラグを追加して、順方向の互換性を高めるためにさらに柔軟になります。批判的なフラグが設定され、ペイロードタイプが認識されていない場合、メッセージを拒否する必要があり、ペイロードを含むIKEリクエストへの応答は、notify unsupported_critical_payloadを含める必要があります。その通知ペイロードには、通知データには1オクテットのペイロードタイプが含まれています。クリティカルフラグが設定されておらず、ペイロードタイプがサポートされていない場合、そのペイロードは無視する必要があります。IKE応答メッセージで送信されたペイロードには、クリティカルフラグが設定されていない必要があります。クリティカルフラグは、コンテンツではなくペイロードタイプにのみ適用されることに注意してください。ペイロードタイプが認識されているが、ペイロードにはないものが含まれていない場合（SAペイロード内の未知の変換、または通知ペイロード内の未知のNotifyメッセージタイプなど）、クリティカルフラグは無視されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although new payload types may be added in the future and may appear interleaved with the fields defined in this specification, implementations SHOULD send the payloads defined in this specification in the order shown in the figures in Sections 1 and 2; implementations MUST NOT reject as invalid a message with those payloads in any other order.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいペイロードタイプは将来追加される可能性があり、この仕様で定義されたフィールドとインターリーブしているように見える場合がありますが、実装は、この仕様で定義されたペイロードをセクション1および2の図に示す順序で送信する必要があります。実装は、他の順序でこれらのペイロードを使用してメッセージを無効にして拒否してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-6--IKE-SA-SPIs-and-Cookies">
2.6. IKE SA SPIs and Cookies
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.6. Ike Sa SpisとCookie
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initial two eight-octet fields in the header, called the &#34;IKE SPIs&#34;, are used as a connection identifier at the beginning of IKE packets. Each endpoint chooses one of the two SPIs and MUST choose them so as to be unique identifiers of an IKE SA. An SPI value of zero is special: it indicates that the remote SPI value is not yet known by the sender.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「Ike Spis」と呼ばれるヘッダー内の最初の2つの8オクテットフィールドは、IKEパケットの開始時に接続識別子として使用されます。各エンドポイントは2つのスピスのうちの1つを選択し、IKE SAの一意の識別子になるように選択する必要があります。ゼロのSPI値は特別です。リモートSPI値が送信者によってまだわかっていないことを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Incoming IKE packets are mapped to an IKE SA only using the packet&#39;s SPI, not using (for example) the source IP address of the packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
着信IKEパケットは、パケットのSPIのみを使用してIKE SAにマッピングされ、パケットのソースIPアドレスを使用しないでください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Unlike ESP and AH where only the recipient&#39;s SPI appears in the header of a message, in IKE the sender&#39;s SPI is also sent in every message. Since the SPI chosen by the original initiator of the IKE SA is always sent first, an endpoint with multiple IKE SAs open that wants to find the appropriate IKE SA using the SPI it assigned must look at the Initiator flag in the header to determine whether it assigned the first or the second eight octets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
受信者のSPIのみがメッセージのヘッダーに表示されるESPとAHとは異なり、IKEでは、送信者のSPIもすべてのメッセージで送信されます。IKE SAの元のイニシエーターによって選択されたSPIは常に最初に送信されるため、割り当てられたSPIを使用して適切なIKE SAを見つけたい複数のIKE SASが開いているエンドポイントがヘッダーのイニシエーターフラグを確認して、それを決定する必要があります。最初または2番目の8オクテットを割り当てました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the first message of an initial IKE exchange, the initiator will not know the responder&#39;s SPI value and will therefore set that field to zero. When the IKE_SA_INIT exchange does not result in the creation of an IKE SA due to INVALID_KE_PAYLOAD, NO_PROPOSAL_CHOSEN, or COOKIE (see Section 2.6), the responder&#39;s SPI will be zero also in the response message. However, if the responder sends a non-zero responder SPI, the initiator should not reject the response for only that reason.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初のIKE Exchangeの最初のメッセージでは、イニシエーターはレスポンダーのSPI値を知らないため、そのフィールドをゼロに設定します。IKE_SA_INIT ExchangeがINVALID_KE_PAYLOAD、NO_PROPOSAL_CHOSEN、またはCookie（セクション2.6を参照）のためにIKE SAの作成につながっていない場合、応答メッセージではResponderのSPIもゼロになります。ただし、レスポンダーがゼロ以外のレスポンダーSPIを送信する場合、イニシエーターはその理由だけで応答を拒否すべきではありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two expected attacks against IKE are state and CPU exhaustion, where the target is flooded with session initiation requests from forged IP addresses. These attacks can be made less effective if a responder uses minimal CPU and commits no state to an SA until it knows the initiator can receive packets at the address from which it claims to be sending them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEに対する予想される2つの攻撃は、状態とCPUの枯渇であり、ターゲットには偽造IPアドレスからのセッション開始要求があふれています。これらの攻撃は、Responderが最小限のCPUを使用し、イニシエーターがそれらを送信していると主張するアドレスでパケットを受信できることがわかるまで、SAに状態をコミットしない場合、効果を低下させることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When a responder detects a large number of half-open IKE SAs, it SHOULD reply to IKE_SA_INIT requests with a response containing the COOKIE notification. The data associated with this notification MUST be between 1 and 64 octets in length (inclusive), and its generation is described later in this section. If the IKE_SA_INIT response includes the COOKIE notification, the initiator MUST then retry the IKE_SA_INIT request, and include the COOKIE notification containing the received data as the first payload, and all other payloads unchanged. The initial exchange will then be as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
レスポンダーが多数の半分のオープンIke SASを検出すると、Cookie通知を含む応答を使用してIKE_SA_INITリクエストに返信する必要があります。この通知に関連付けられたデータは、長さが1〜64オクテット（包括的）でなければならず、その生成については、このセクションで後述します。IKE_SA_INIT応答にCookie通知が含まれている場合、イニシエーターはIKE_SA_INIT要求を再試行し、受信したデータを最初のペイロードとして含むCookie通知を含める必要があります。最初の交換は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR(A,0), SAi1, KEi, Ni  --&gt;
                                &lt;--  HDR(A,0), N(COOKIE)
   HDR(A,0), N(COOKIE), SAi1,
       KEi, Ni  --&gt;
                                &lt;--  HDR(A,B), SAr1, KEr,
                                         Nr, [CERTREQ]
   HDR(A,B), SK {IDi, [CERT,]
       [CERTREQ,] [IDr,] AUTH,
       SAi2, TSi, TSr}  --&gt;
                                &lt;--  HDR(A,B), SK {IDr, [CERT,]
                                         AUTH, SAr2, TSi, TSr}
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first two messages do not affect any initiator or responder state except for communicating the cookie. In particular, the message sequence numbers in the first four messages will all be zero and the message sequence numbers in the last two messages will be one. &#39;A&#39; is the SPI assigned by the initiator, while &#39;B&#39; is the SPI assigned by the responder.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初の2つのメッセージは、Cookieの通信を除いて、イニシエーターまたはレスポンダー状態には影響しません。特に、最初の4つのメッセージのメッセージシーケンス番号はすべてゼロになり、最後の2つのメッセージのメッセージシーケンス番号は1つになります。「A」はイニシエーターによって割り当てられたSPI、「B」はレスポンダーによって割り当てられたSPIです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE implementation can implement its responder cookie generation in such a way as to not require any saved state to recognize its valid cookie when the second IKE_SA_INIT message arrives. The exact algorithms and syntax used to generate cookies do not affect interoperability and hence are not specified here. The following is an example of how an endpoint could use cookies to implement limited DoS protection.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEの実装は、2番目のIKE_SA_INITメッセージが到着したときに有効なCookieを認識するために保存された状態を必要としないように、レスポンダーCookieの生成を実装できます。Cookieを生成するために使用される正確なアルゴリズムと構文は、相互運用性に影響しないため、ここでは指定されません。以下は、エンドポイントがCookieを使用して限られたDOS保護を実装する方法の例です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A good way to do this is to set the responder cookie to be:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これを行う良い方法は、Responder Cookieを次のように設定することです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Cookie = &lt;VersionIDofSecret&gt; | Hash(Ni | IPi | SPIi | &lt;secret&gt;)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
where &lt;secret&gt; is a randomly generated secret known only to the responder and periodically changed and | indicates concatenation. &lt;VersionIDofSecret&gt; should be changed whenever &lt;secret&gt; is regenerated. The cookie can be recomputed when the IKE_SA_INIT arrives the second time and compared to the cookie in the received message. If it matches, the responder knows that the cookie was generated since the last change to &lt;secret&gt; and that IPi must be the same as the source address it saw the first time. Incorporating SPIi into the calculation ensures that if multiple IKE SAs are being set up in parallel they will all get different cookies (assuming the initiator chooses unique SPIi&#39;s). Incorporating Ni in the hash ensures that an attacker who sees only message 2 can&#39;t successfully forge a message 3. Also, incorporating SPIi in the hash prevents an attacker from fetching one cookie from the other end, and then initiating many IKE_SA_INIT exchanges all with different initiator SPIs (and perhaps port numbers) so that the responder thinks that there are a lot of machines behind one NAT box that are all trying to connect.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで、&lt;secret&gt;は、レスポンダーにのみ知られているランダムに生成された秘密であり、定期的に変更され、|連結を示します。&lt;versionidofsecret&gt;は、&lt;secret&gt;が再生されるたびに変更する必要があります。IKE_SA_INITが2度目に到着し、受信したメッセージのCookieと比較したときに、Cookieを再計算できます。一致する場合、レスポンダーは、&lt;secret&gt;への最後の変更以来Cookieが生成され、IPIが初めて見たソースアドレスと同じでなければならないことを知っています。SPIIを計算に組み込むことで、複数のIKE SAが並行してセットアップされている場合、すべて異なるCookieを取得します（イニシエーターが一意のSPIIを選択すると仮定します）。ハッシュにNIを組み込むことで、メッセージ2のみを見る攻撃者がメッセージ3を正常に偽造できないことが保証されます。また、ハッシュにSPIIを組み込むことで、攻撃者が1つのクッキーをもう一方の端からフェッチすることを防ぎ、多くのIKE_SA_INIT交換を開始することを防ぎます。異なるイニシエーターSPI（およびおそらくポート番号）により、レスポンダーが1つのNATボックスの背後に多くのマシンがあり、すべて接続しようとしていることを考えるようにします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a new value for &lt;secret&gt; is chosen while there are connections in the process of being initialized, an IKE_SA_INIT might be returned with other than the current &lt;VersionIDofSecret&gt;. The responder in that case MAY reject the message by sending another response with a new cookie or it MAY keep the old value of &lt;secret&gt; around for a short time and accept cookies computed from either one. The responder should not accept cookies indefinitely after &lt;secret&gt; is changed, since that would defeat part of the DoS protection. The responder should change the value of &lt;secret&gt; frequently, especially if under attack.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
初期化されているプロセスに接続があるときに&lt;secret&gt;の新しい値が選択されている場合、IKE_SA_INITは現在の&lt;versionidofsecret&gt;以外で返される場合があります。その場合のレスポンダーは、新しいCookieで別の応答を送信することによりメッセージを拒否する場合があります。または、&lt;secret&gt;の古い価値を短時間維持し、いずれかから計算されたCookieを受け入れることがあります。Responderは、&lt;Secret&gt;が変更された後、Cookieを無期限に受け入れないでください。応答者は、特に攻撃を受けている場合は、&lt;secret&gt;の価値を頻繁に変更する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When one party receives an IKE_SA_INIT request containing a cookie whose contents do not match the value expected, that party MUST ignore the cookie and process the message as if no cookie had been included; usually this means sending a response containing a new cookie. The initiator should limit the number of cookie exchanges it tries before giving up, possibly using exponential back-off. An attacker can forge multiple cookie responses to the initiator&#39;s IKE_SA_INIT message, and each of those forged cookie replies will cause two packets to be sent: one packet from the initiator to the responder (which will reject those cookies), and one response from responder to initiator that includes the correct cookie.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一方の当事者が、コンテンツが予想される値と一致しないCookieを含むIKE_SA_INITリクエストを受け取った場合、その当事者はCookieを無視し、まるでCookieが含まれていないかのようにメッセージを処理する必要があります。通常、これは新しいCookieを含む応答を送信することを意味します。イニシエーターは、あきらめる前に試行するCookie交換の数を制限する必要があります。攻撃者は、イニシエーターのIKE_SA_INITメッセージに複数のCookie応答を偽造できます。これらの鍛造Cookie返信のそれぞれは、2つのパケットを送信します。イニシエーターからレスポンダー（これらのCookieを拒否する）、および1つの応答をResponderからResponderから1つ正しいCookieを含むイニシエーター。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A note on terminology: the term &#34;cookies&#34; originates with Karn and Simpson [PHOTURIS] in Photuris, an early proposal for key management with IPsec, and it has persisted. The Internet Security Association and Key Management Protocol (ISAKMP) [ISAKMP] fixed message header includes two eight-octet fields called &#34;cookies&#34;, and that syntax is used by both IKEv1 and IKEv2, although in IKEv2 they are referred to as the &#34;IKE SPI&#34; and there is a new separate field in a Notify payload holding the cookie.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
用語に関するメモ：「Cookies」という用語は、PhoturisのKarnとSimpson [Photuris]から生まれ、IPSECの主要な管理の初期の提案であり、それが続いています。Internet Security Association and Key Management Protocol（ISAKMP）[ISAKMP]固定メッセージヘッダーには、「Cookie」と呼ばれる2つの8オクテットフィールドが含まれています。SyntaxはIKEV1とIKEV2の両方で使用されますが、IKEV2では「IKEと呼ばれます。SPI」と、Cookieを保持している通知ペイロードに新しい独立したフィールドがあります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-6-1--Interaction-of-COOKIE-and-INVALIDKEPAYLOAD">
2.6.1. Interaction of COOKIE and INVALID_KE_PAYLOAD
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.6.1. CookieとInvalid_ke_Payloadの相互作用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are two common reasons why the initiator may have to retry the IKE_SA_INIT exchange: the responder requests a cookie or wants a different Diffie-Hellman group than was included in the KEi payload. If the initiator receives a cookie from the responder, the initiator needs to decide whether or not to include the cookie in only the next retry of the IKE_SA_INIT request, or in all subsequent retries as well.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターがIKE_SA_INIT Exchangeを再試行しなければならない場合がある2つの一般的な理由があります。レスポンダーはCookieを要求するか、KEIペイロードに含まれていたものとは異なるDiffie-Hellmanグループを望んでいます。イニシエーターがレスポンダーからCookieを受信した場合、イニシエーターは、IKE_SA_INITリクエストの次の再試行のみでCookieを含めるか、またはその後のすべての再試行でも含めるかどうかを決定する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the initiator includes the cookie only in the next retry, one additional round trip may be needed in some cases. An additional round trip is needed also if the initiator includes the cookie in all retries, but the responder does not support this. For instance, if the responder includes the KEi payloads in cookie calculation, it will reject the request by sending a new cookie.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターに次の再試行でのみCookieが含まれている場合、場合によっては1回の往復が必要になる場合があります。イニシエーターにすべてのレトリにCookieが含まれている場合は、追加の往復が必要ですが、レスポンダーはこれをサポートしていません。たとえば、レスポンダーにCookie計算にKEIペイロードが含まれている場合、新しいCookieを送信することでリクエストを拒否します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If both peers support including the cookie in all retries, a slightly shorter exchange can happen.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのレトリでCookieを含む両方のピアがサポートする場合、やや短い交換が発生する可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                   Responder
   -----------------------------------------------------------
   HDR(A,0), SAi1, KEi, Ni --&gt;
                           &lt;-- HDR(A,0), N(COOKIE)
   HDR(A,0), N(COOKIE), SAi1, KEi, Ni  --&gt;
                           &lt;-- HDR(A,0), N(INVALID_KE_PAYLOAD)
   HDR(A,0), N(COOKIE), SAi1, KEi&#39;, Ni --&gt;
                           &lt;-- HDR(A,B), SAr1, KEr, Nr
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations SHOULD support this shorter exchange, but MUST NOT fail if other implementations do not support this shorter exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
実装はこの短い交換をサポートする必要がありますが、他の実装がこの短い交換をサポートしていない場合は失敗してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-7--Cryptographic-Algorithm-Negotiation">
2.7. Cryptographic Algorithm Negotiation
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.7. 暗号化アルゴリズムのネゴシエーション
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type known as &#34;SA&#34; indicates a proposal for a set of choices of IPsec protocols (IKE, ESP, or AH) for the SA as well as cryptographic algorithms associated with each protocol.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「SA」として知られるペイロードタイプは、SAのIPSECプロトコル（IKE、ESP、またはAH）の選択セットの提案と、各プロトコルに関連付けられた暗号化アルゴリズムを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An SA payload consists of one or more proposals. Each proposal includes one protocol. Each protocol contains one or more transforms -- each specifying a cryptographic algorithm. Each transform contains zero or more attributes (attributes are needed only if the Transform ID does not completely specify the cryptographic algorithm).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAペイロードは、1つ以上の提案で構成されています。各提案には1つのプロトコルが含まれます。各プロトコルには、1つ以上の変換が含まれています。それぞれが暗号化アルゴリズムを指定します。各変換にはゼロ以上の属性が含まれます（属性は、変換IDが暗号化アルゴリズムを完全に指定しない場合にのみ必要です）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This hierarchical structure was designed to efficiently encode proposals for cryptographic suites when the number of supported suites is large because multiple values are acceptable for multiple transforms. The responder MUST choose a single suite, which may be any subset of the SA proposal following the rules below.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この階層構造は、複数の変換で複数の値が許容できるため、サポートされているスイートの数が大きい場合、暗号スイートの提案を効率的にエンコードするように設計されました。レスポンダーは、以下の規則に従ってSA提案のサブセットである場合がある単一のスイートを選択する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each proposal contains one protocol. If a proposal is accepted, the SA response MUST contain the same protocol. The responder MUST accept a single proposal or reject them all and return an error. The error is given in a notification of type NO_PROPOSAL_CHOSEN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各提案には1つのプロトコルが含まれています。提案が受け入れられた場合、SA応答には同じプロトコルが含まれている必要があります。応答者は、単一の提案を受け入れるか、それらをすべて拒否し、エラーを返しなければなりません。エラーは、タイプno_proposal_chosenの通知で与えられます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each IPsec protocol proposal contains one or more transforms. Each transform contains a Transform Type. The accepted cryptographic suite MUST contain exactly one transform of each type included in the proposal. For example: if an ESP proposal includes transforms ENCR_3DES, ENCR_AES w/keysize 128, ENCR_AES w/keysize 256, AUTH_HMAC_MD5, and AUTH_HMAC_SHA, the accepted suite MUST contain one of the ENCR_ transforms and one of the AUTH_ transforms. Thus, six combinations are acceptable.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各IPSECプロトコルの提案には、1つ以上の変換が含まれています。各変換には変換タイプが含まれています。受け入れられている暗号化スイートには、提案に含まれる各タイプの1つの変換が正確に1つ含まれている必要があります。たとえば、ESP提案にTransforms encr_3desが含まれている場合、encr_aes w/keysize 128、keysize 256、auth_hmac_md5、およびauth_hmac_shaを含む場合、受け入れられたスイートには、encr_変換の1つとauth_変換の1つが含まれている必要があります。したがって、6つの組み合わせが許容されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If an initiator proposes both normal ciphers with integrity protection as well as combined-mode ciphers, then two proposals are needed. One of the proposals includes the normal ciphers with the integrity algorithms for them, and the other proposal includes all the combined-mode ciphers without the integrity algorithms (because combined-mode ciphers are not allowed to have any integrity algorithm other than &#34;none&#34;).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターが、整合性保護を備えた通常の暗号と複合モード暗号の両方を提案する場合、2つの提案が必要です。提案の1つには、それらの整合性アルゴリズムを備えた通常の暗号が含まれています。他の提案には、整合性アルゴリズムのないすべての結合モード暗号が含まれます（結合モード暗号には「none」以外の整合性アルゴリズムは許可されていないため）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-8--Rekeying">
2.8. Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.8. 再キーイング
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE, ESP, and AH Security Associations use secret keys that should be used only for a limited amount of time and to protect a limited amount of data. This limits the lifetime of the entire Security Association. When the lifetime of a Security Association expires, the Security Association MUST NOT be used. If there is demand, new Security Associations MAY be established. Reestablishment of Security Associations to take the place of ones that expire is referred to as &#34;rekeying&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Ike、ESP、およびAHセキュリティ協会は、限られた時間のためにのみ使用し、限られた量のデータを保護する必要がある秘密キーを使用します。これにより、セキュリティ協会全体の生涯が制限されます。セキュリティ協会の寿命が切れる場合、セキュリティ協会を使用してはなりません。需要がある場合、新しいセキュリティ協会が確立される可能性があります。有効期限が切れるセキュリティ協会の再確立は、「再キーイング」と呼ばれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To allow for minimal IPsec implementations, the ability to rekey SAs without restarting the entire IKE SA is optional. An implementation MAY refuse all CREATE_CHILD_SA requests within an IKE SA. If an SA has expired or is about to expire and rekeying attempts using the mechanisms described here fail, an implementation MUST close the IKE SA and any associated Child SAs and then MAY start new ones. Implementations may wish to support in-place rekeying of SAs, since doing so offers better performance and is likely to reduce the number of packets lost during the transition.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最小限のIPSEC実装を可能にするために、IKE SA全体を再起動せずにSASを再キーする機能はオプションです。実装は、IKE SA内のすべてのcreate_child_saリクエストを拒否する場合があります。SAが期限切れになっているか、ここで説明するメカニズムを使用して試行を期限切れにして再キーしようとしている場合、実装はIKE SAおよび関連する子SASを閉じてから新しいものを開始する必要があります。実装は、SASのインプレースの再キーイングをサポートすることをお勧めします。これにより、パフォーマンスが向上し、移行中に失われたパケットの数を減らす可能性が高いためです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To rekey a Child SA within an existing IKE SA, create a new, equivalent SA (see Section 2.17 below), and when the new one is established, delete the old one. Note that, when rekeying, the new Child SA SHOULD NOT have different Traffic Selectors and algorithms than the old one.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
既存のIKE SA内の子SAを再キーするには、新しい同等のSAを作成します（以下のセクション2.17を参照）。新しいものが確立されたら、古いものを削除します。再キーイングするとき、新しい子SAは、古いものとは異なるトラフィックセレクターやアルゴリズムを持つべきではないことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To rekey an IKE SA, establish a new equivalent IKE SA (see Section 2.18 below) with the peer to whom the old IKE SA is shared using a CREATE_CHILD_SA within the existing IKE SA. An IKE SA so created inherits all of the original IKE SA&#39;s Child SAs, and the new IKE SA is used for all control messages needed to maintain those Child SAs. After the new equivalent IKE SA is created, the initiator deletes the old IKE SA, and the Delete payload to delete itself MUST be the last request sent over the old IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAを再キーするには、既存のIKE SA内のcreate_child_saを使用して古いIKE SAが共有されるピアと、新しい同等のIKE SA（以下のセクション2.18を参照）を確立します。そのように作成されたIKE SAは、元のIKE SAの子供SASをすべて継承し、新しいIKE SAは、それらの子供のSASを維持するために必要なすべての制御メッセージに使用されます。新しい同等のIKE SAが作成された後、イニシエーターは古いIKE SAを削除し、削除するペイロード自体を削除することは、古いIKE SAに送信される最後の要求でなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAs should be rekeyed proactively, i.e., the new SA should be established before the old one expires and becomes unusable. Enough time should elapse between the time the new SA is established and the old one becomes unusable so that traffic can be switched over to the new SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SASは積極的に再キーにする必要があります。つまり、古いSAが失効して使用できなくなる前に、新しいSAを確立する必要があります。新しいSAが確立され、古いSAが使用できなくなって、トラフィックを新しいSAに切り替えるまでの間に十分な時間が経過するはずです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A difference between IKEv1 and IKEv2 is that in IKEv1 SA lifetimes were negotiated. In IKEv2, each end of the SA is responsible for enforcing its own lifetime policy on the SA and rekeying the SA when necessary. If the two ends have different lifetime policies, the end with the shorter lifetime will end up always being the one to request the rekeying. If an SA has been inactive for a long time and if an endpoint would not initiate the SA in the absence of traffic, the endpoint MAY choose to close the SA instead of rekeying it when its lifetime expires. It can also do so if there has been no traffic since the last time the SA was rekeyed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV1とIKEV2の違いは、IKEV1で寿命が交渉されたことです。IKEV2では、SAの各端は、SAに関する独自の生涯ポリシーを実施し、必要に応じてSAを再ケイする責任があります。2つの目的が異なる生涯ポリシーを持っている場合、寿命が短いという終わりは、常に再キーイングを要求するものになります。SAが長い間非アクティブであり、エンドポイントがトラフィックがないときにSAを開始しない場合、エンドポイントは、生涯の期限が切れるときにそれを再ケイするのではなく、SAを閉じることを選択する場合があります。また、SAが最後に再キーになったときからトラフィックがなかった場合にもそうすることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that IKEv2 deliberately allows parallel SAs with the same Traffic Selectors between common endpoints. One of the purposes of this is to support traffic quality of service (QoS) differences among the SAs (see [DIFFSERVFIELD], [DIFFSERVARCH], and Section 4.1 of [DIFFTUNNEL]). Hence unlike IKEv1, the combination of the endpoints and the Traffic Selectors may not uniquely identify an SA between those endpoints, so the IKEv1 rekeying heuristic of deleting SAs on the basis of duplicate Traffic Selectors SHOULD NOT be used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2は、一般的なエンドポイント間で同じトラフィックセレクターを持つ並列SASを意図的に許可することに注意してください。これの目的の1つは、SAS間の交通品質（QOS）の違いをサポートすることです（[Diffservarch]、[Diffservarch]、および[Difftunnel]のセクション4.1を参照）。したがって、IKEV1とは異なり、エンドポイントとトラフィックセレクターの組み合わせは、それらのエンドポイント間でSAを一意に識別できないため、IKEV1は重複したトラフィックセレクターに基づいてSASを削除することをヒューリスティックにしています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are timing windows -- particularly in the presence of lost packets -- where endpoints may not agree on the state of an SA. The responder to a CREATE_CHILD_SA MUST be prepared to accept messages on an SA before sending its response to the creation request, so there is no ambiguity for the initiator. The initiator MAY begin sending on an SA as soon as it processes the response. The initiator, however, cannot receive on a newly created SA until it receives and processes the response to its CREATE_CHILD_SA request. How, then, is the responder to know when it is OK to send on the newly created SA?
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
タイミングウィンドウ（特に失われたパケットが存在する場合）があり、エンドポイントはSAの状態に同意しない場合があります。create_child_saへの応答者は、作成要求に応答を送信する前にSAでメッセージを受け入れる準備をする必要があるため、イニシエーターには曖昧さはありません。イニシエーターは、応答を処理するとすぐにSAの送信を開始する場合があります。ただし、イニシエーターは、create_child_saリクエストに対する応答を受信および処理するまで、新しく作成されたSAで受信できません。それでは、新しく作成されたSAを送信しても大丈夫なときに、どのように対応者が知るのでしょうか？
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
From a technical correctness and interoperability perspective, the responder MAY begin sending on an SA as soon as it sends its response to the CREATE_CHILD_SA request. In some situations, however, this could result in packets unnecessarily being dropped, so an implementation MAY defer such sending.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
技術的な正しさと相互運用性の観点から、Responderはcreate_child_saリクエストに応答を送信するとすぐにSAの送信を開始する場合があります。ただし、状況によっては、これによりパケットが不必要に削除される可能性があるため、実装がそのような送信を延期する可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder can be assured that the initiator is prepared to receive messages on an SA if either (1) it has received a cryptographically valid message on the other half of the SA pair, or (2) the new SA rekeys an existing SA and it receives an IKE request to close the replaced SA. When rekeying an SA, the responder continues to send traffic on the old SA until one of those events occurs. When establishing a new SA, the responder MAY defer sending messages on a new SA until either it receives one or a timeout has occurred. If an initiator receives a message on an SA for which it has not received a response to its CREATE_CHILD_SA request, it interprets that as a likely packet loss and retransmits the CREATE_CHILD_SA request. An initiator MAY send a dummy ESP message on a newly created ESP SA if it has no messages queued in order to assure the responder that the initiator is ready to receive messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、（1）SAペアの残りの半分に暗号化的に有効なメッセージを受け取った場合、または（2）新しいSAが既存のSAとITを再キーする場合、イニシエーターがSAでメッセージを受信する準備ができていることを保証できます。交換されたSAを閉じるためのIKEリクエストを受信します。SAを再キーすると、レスポンダーは、これらのイベントの1つが発生するまで古いSAのトラフィックを送信し続けます。新しいSAを確立するとき、レスポンダーは、1つまたはタイムアウトが発生するまで、新しいSAでメッセージの送信を延期する場合があります。イニシエーターがcreate_child_saリクエストへの応答を受信していないSAでメッセージを受信した場合、パケットの損失の可能性があることを解釈し、create_child_saリクエストを再送信することを解釈します。イニシエーターは、イニシエーターがメッセージを受信する準備ができていることを応答者に保証するために、メッセージがキューになっていない場合、新しく作成されたESP SAでダミーESPメッセージを送信する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-8-1--Simultaneous-Child-SA-Rekeying">
2.8.1. Simultaneous Child SA Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.8.1. 同時に子どもが再キーリングします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the two ends have the same lifetime policies, it is possible that both will initiate a rekeying at the same time (which will result in redundant SAs). To reduce the probability of this happening, the timing of rekeying requests SHOULD be jittered (delayed by a random amount of time after the need for rekeying is noticed).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
両端に同じ生涯のポリシーがある場合、両方が同時に再キーを開始する可能性があります（これにより、冗長なSASが生じます）。この発生の可能性を減らすために、リクエストを再キーイングするタイミングをジッタにする必要があります（再キーイングの必要性が発生した後、ランダムな時間に遅れます）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This form of rekeying may temporarily result in multiple similar SAs between the same pairs of nodes. When there are two SAs eligible to receive packets, a node MUST accept incoming packets through either SA. If redundant SAs are created though such a collision, the SA created with the lowest of the four nonces used in the two exchanges SHOULD be closed by the endpoint that created it. &#34;Lowest&#34; means an octet-by-octet comparison (instead of, for instance, comparing the nonces as large integers). In other words, start by comparing the first octet; if they&#39;re equal, move to the next octet, and so on. If you reach the end of one nonce, that nonce is the lower one. The node that initiated the surviving rekeyed SA should delete the replaced SA after the new one is established.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この形式の再キーは、同じノードのペア間で複数の類似のSAを一時的にもたらす可能性があります。パケットを受信する資格が2つある場合、ノードはどちらのSAを介して着信パケットを受け入れる必要があります。このような衝突で冗長なSASが作成された場合、2つの交換で使用されている4つのノンセスのうち最も低いもので作成されたSAは、それを作成したエンドポイントによって閉じる必要があります。「最低」とは、オクテットごとの比較を意味します（たとえば、ノンセを大きな整数と比較するのではなく）。言い換えれば、最初のオクテットを比較することから始めます。それらが等しい場合は、次のオクテットに移動します。1つのノンセの終わりに達すると、そのノンセは低いものです。生き残った再キーイングSAを開始したノードは、新しいものが確立された後に交換されたSAを削除する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following is an explanation on the impact this has on implementations. Assume that hosts A and B have an existing Child SA pair with SPIs (SPIa1,SPIb1), and both start rekeying it at the same time:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下は、これが実装に与える影響に関する説明です。ホストAとBは、SPIS（SPIA1、SPIB1）を使用して既存の子SAペアを持っていると仮定し、どちらも同時にそれを再ケイし始めます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Host A                            Host B
   -------------------------------------------------------------------
   send req1: N(REKEY_SA,SPIa1),
       SA(..,SPIa2,..),Ni1,..  --&gt;
                                &lt;--  send req2: N(REKEY_SA,SPIb1),
                                         SA(..,SPIb2,..),Ni2
   recv req2 &lt;--
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At this point, A knows there is a simultaneous rekeying happening. However, it cannot yet know which of the exchanges will have the lowest nonce, so it will just note the situation and respond as usual.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この時点で、Aは同時に再キーイングが起こっていることを知っています。ただし、どの交換が最も低いものを持っているかはまだわからないため、状況に注意して通常どおりに対応するだけです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   send resp2: SA(..,SPIa3,..),
        Nr1,..  --&gt;
                                --&gt;  recv req1
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Now B also knows that simultaneous rekeying is going on. It responds as usual.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
今、Bは同時の再キーイングが続いていることも知っています。それはいつものように応答します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                               &lt;--  send resp1: SA(..,SPIb3,..),
                                        Nr2,..
   recv resp1 &lt;--
                               --&gt;  recv resp2
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At this point, there are three Child SA pairs between A and B (the old one and two new ones). A and B can now compare the nonces. Suppose that the lowest nonce was Nr1 in message resp2; in this case, B (the sender of req2) deletes the redundant new SA, and A (the node that initiated the surviving rekeyed SA), deletes the old one.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この時点で、AとB（古いものと2つの新しいもの）の間に3つの子SAペアがあります。AとBは、NONCESを比較できるようになりました。最低のノンセがメッセージresp2でNR1であったと仮定します。この場合、B（Req2の送信者）は、冗長な新しいSAとA（生き残った再キー付きSAを開始したノード）を削除し、古いものを削除します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   send req3: D(SPIa1) --&gt;
                                &lt;--  send req4: D(SPIb2)
                                --&gt;  recv req3
                                &lt;--  send resp3: D(SPIb1)
   recv req4 &lt;--
   send resp4: D(SPIa3) --&gt;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The rekeying is now finished.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
再キーイングが終了しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
However, there is a second possible sequence of events that can happen if some packets are lost in the network, resulting in retransmissions. The rekeying begins as usual, but A&#39;s first packet (req1) is lost.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ただし、ネットワークで一部のパケットが失われ、再送信が発生する場合に発生する可能性のあるイベントの2番目のシーケンスがあります。再キーイングはいつものように始まりますが、Aの最初のパケット（REQ1）は失われます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Host A                            Host B
   -------------------------------------------------------------------
   send req1: N(REKEY_SA,SPIa1),
       SA(..,SPIa2,..),
       Ni1,..  --&gt;  (lost)
                                &lt;--  send req2: N(REKEY_SA,SPIb1),
                                         SA(..,SPIb2,..),Ni2
   recv req2 &lt;--
   send resp2: SA(..,SPIa3,..),
       Nr1,.. --&gt;
                                --&gt;  recv resp2
                                &lt;--  send req3: D(SPIb1)
   recv req3 &lt;--
   send resp3: D(SPIa1) --&gt;
                                --&gt;  recv resp3
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
From B&#39;s point of view, the rekeying is now completed, and since it has not yet received A&#39;s req1, it does not even know that there was simultaneous rekeying. However, A will continue retransmitting the message, and eventually it will reach B.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Bの観点からは、再キーイングが完了し、AのReq1をまだ受け取っていないため、同時に再キーキングがあったことさえ知りません。ただし、Aはメッセージを再送信し続け、最終的にはBに到達します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   resend req1 --&gt;
                                --&gt;  recv req1
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To B, it looks like A is trying to rekey an SA that no longer exists; thus, B responds to the request with something non-fatal such as CHILD_SA_NOT_FOUND.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Bにとって、Aはもはや存在しないSAを再キーにしようとしているようです。したがって、Bは、child_sa_not_foundなどの非致命的なものでリクエストに応答します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                                &lt;--  send resp1: N(CHILD_SA_NOT_FOUND)
   recv resp1 &lt;--
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When A receives this error, it already knows there was simultaneous rekeying, so it can ignore the error message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このエラーを受信すると、同時に再キーキングがあることがすでにわかっているため、エラーメッセージを無視できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-8-2--Simultaneous-IKE-SA-Rekeying">
2.8.2. Simultaneous IKE SA Rekeying
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.8.2. 同時にIKE SA REKEYING
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Probably the most complex case occurs when both peers try to rekey the IKE_SA at the same time. Basically, the text in Section 2.8 applies to this case as well; however, it is important to ensure that the Child SAs are inherited by the correct IKE_SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
おそらく最も複雑なケースは、両方のピアがIKE_SAを同時に再キーしようとするときに発生します。基本的に、セクション2.8のテキストはこのケースにも適用されます。ただし、子供のSAが正しいIKE_SAによって継承されるようにすることが重要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The case where both endpoints notice the simultaneous rekeying works the same way as with Child SAs. After the CREATE_CHILD_SA exchanges, three IKE SAs exist between A and B: the old IKE SA and two new IKE SAs. The new IKE SA containing the lowest nonce SHOULD be deleted by the node that created it, and the other surviving new IKE SA MUST inherit all the Child SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
両方のエンドポイントが同時に再キーイングに気付いた場合、子SASと同じように機能します。create_child_sa交換の後、AとBの間に3つのIke SAが存在します。古いIke SAと2つの新しいIke SASです。最低のノンセを含む新しいIKE SAは、それを作成したノードによって削除する必要があり、他の生き残った新しいIKE SAはすべての子供SASを継承する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In addition to normal simultaneous rekeying cases, there is a special case where one peer finishes its rekey before it even notices that other peer is doing a rekey. If only one peer detects a simultaneous rekey, redundant SAs are not created. In this case, when the peer that did not notice the simultaneous rekey gets the request to rekey the IKE SA that it has already successfully rekeyed, it SHOULD return TEMPORARY_FAILURE because it is an IKE SA that it is currently trying to close (whether or not it has already sent the delete notification for the SA). If the peer that did notice the simultaneous rekey gets the delete request from the other peer for the old IKE SA, it knows that the other peer did not detect the simultaneous rekey, and the first peer can forget its own rekey attempt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常の同時の再キーキングケースに加えて、あるピアが他のピアが再キーを行っていることに気付く前に、あるピアが再キーを仕上げるという特別なケースがあります。同時の再キーを検出するピアが1つしかない場合、冗長なSASは作成されません。この場合、同時にRekeyに気付いていないピアが、すでに正常に再キーになっているというIKE SAを再キーにするリクエストを受け取った場合、現在閉じようとしているのはIke saであるため、一時的な_failureを返す必要があります（SAの削除通知を既に送信しています）。同時にRekeyに気付いたピアが、古いIke SAの他のピアから削除要求を取得した場合、他のピアが同時レキーを検出せず、最初のピアは独自のRekeの試みを忘れることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Host A                      Host B
   -------------------------------------------------------------------
   send req1:
        SA(..,SPIa1,..),Ni1,.. --&gt;
                             &lt;-- send req2: SA(..,SPIb1,..),Ni2,..
                             --&gt; recv req1
                             &lt;-- send resp1: SA(..,SPIb2,..),Nr2,..
   recv resp1 &lt;--
   send req3: D() --&gt;
                             --&gt; recv req3
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
At this point, host B sees a request to close the IKE_SA. There&#39;s not much more to do than to reply as usual. However, at this point host B should stop retransmitting req2, since once host A receives resp3, it will delete all the state associated with the old IKE_SA and will not be able to reply to it.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この時点で、ホストBはIKE_SAを閉じるリクエストを見ています。いつものように返信する以上のことはありません。ただし、この時点で、ホストBはREQ2の再送信を停止する必要があります。ホストAがRESP3を受信すると、古いIKE_SAに関連するすべての状態が削除され、返信できないためです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-29">
&lt;-- send resp3: ()
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-29">
&lt; -  resp3を送信：（）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The TEMPORARY_FAILURE notification was not included in RFC 4306, and support of the TEMPORARY_FAILURE notification is not negotiated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Companial_Failure通知はRFC 4306に含まれておらず、Companial_Failure通知のサポートは交渉されません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thus, older peers that implement RFC 4306 but not this document may receive these notifications. In that case, they will treat it the same as any other unknown error notification, and will stop the exchange. Because the other peer has already rekeyed the exchange, doing so does not have any ill effects.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
したがって、RFC 4306を実装するが、このドキュメントではない古いピアは、これらの通知を受信する場合があります。その場合、彼らはそれを他の未知のエラー通知と同じように扱い、交換を停止します。他のピアはすでに交換を再キーしているので、そうすることは悪影響を持っていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-8-3--Rekeying-the-IKE-SA-versus-Reauthentication">
2.8.3. Rekeying the IKE SA versus Reauthentication
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.8.3. Ike SAと再認証を再キーリングします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Rekeying the IKE SA and reauthentication are different concepts in IKEv2. Rekeying the IKE SA establishes new keys for the IKE SA and resets the Message ID counters, but it does not authenticate the parties again (no AUTH or EAP payloads are involved).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAとReuthenticationの再認識は、IKEV2の異なる概念です。IKE SAを再キーすると、IKE SAの新しいキーが確立され、メッセージIDカウンターをリセットしますが、パーティーを再度認証しません（AUTHまたはEAPペイロードは含まれていません）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although rekeying the IKE SA may be important in some environments, reauthentication (the verification that the parties still have access to the long-term credentials) is often more important.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAの再キーリングは一部の環境で重要かもしれませんが、再認可（当事者が依然として長期的な資格情報にアクセスできるという検証）がより重要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 does not have any special support for reauthentication. Reauthentication is done by creating a new IKE SA from scratch (using IKE_SA_INIT/IKE_AUTH exchanges, without any REKEY_SA Notify payloads), creating new Child SAs within the new IKE SA (without REKEY_SA Notify payloads), and finally deleting the old IKE SA (which deletes the old Child SAs as well).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2には、再認可に対する特別なサポートはありません。再認証は、新しいIKE SAをゼロから作成することで行われます（REKEY_SAがペイロードを通知することなく、IKE_SA_INIT/IKE_AUTH交換を使用して）、新しいIKE SA内に新しい子SAS（REKEY_SAがペイロードを通知しない）を作成し、最終的に古いIKE SA（老人SASも削除します）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This means that reauthentication also establishes new keys for the IKE SA and Child SAs. Therefore, while rekeying can be performed more often than reauthentication, the situation where &#34;authentication lifetime&#34; is shorter than &#34;key lifetime&#34; does not make sense.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これは、Ike SAとChild SASの新しいキーも確立することを意味します。したがって、再認可よりも頻繁に再キーリングを実行できますが、「認証寿命」が「キーライフタイム」よりも短い状況は意味がありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
While creation of a new IKE SA can be initiated by either party (initiator or responder in the original IKE SA), the use of EAP and/or Configuration payloads means in practice that reauthentication has to be initiated by the same party as the original IKE SA. IKEv2 does not currently allow the responder to request reauthentication in this case; however, there are extensions that add this functionality such as [REAUTH].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいIKE SAの作成は、いずれかの当事者（元のIKE SAのイニシエーターまたはレスポンダー）によって開始できますが、EAPおよび/または構成ペイロードの使用は、実際には元のIKEと同じパーティによって再認可されることを意味します。sa。IKEV2は現在、この場合にResponderが再認可を要求することを許可していません。ただし、[Reauth]などのこの機能を追加する拡張機能があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-9--Traffic-Selector-Negotiation">
2.9. Traffic Selector Negotiation
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.9. トラフィックセレクターの交渉
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When an RFC4301-compliant IPsec subsystem receives an IP packet that matches a &#34;protect&#34; selector in its Security Policy Database (SPD), the subsystem protects that packet with IPsec. When no SA exists yet, it is the task of IKE to create it. Maintenance of a system&#39;s SPD is outside the scope of IKE, although some implementations might update their SPD in connection with the running of IKE (for an example scenario, see Section 1.1.3).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC4301に準拠したIPSECサブシステムが、セキュリティポリシーデータベース（SPD）の「保護」セレクターに一致するIPパケットを受信すると、サブシステムはそのパケットをIPSECで保護します。SAがまだ存在しない場合、それを作成するのはIKEのタスクです。システムのSPDのメンテナンスはIKEの範囲外ですが、一部の実装ではIKEの実行に関連してSPDを更新する場合があります（シナリオの例については、セクション1.1.3を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Traffic Selector (TS) payloads allow endpoints to communicate some of the information from their SPD to their peers. These must be communicated to IKE from the SPD (for example, the PF_KEY API [PFKEY] uses the SADB_ACQUIRE message). TS payloads specify the selection criteria for packets that will be forwarded over the newly set up SA. This can serve as a consistency check in some scenarios to assure that the SPDs are consistent. In others, it guides the dynamic update of the SPD.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックセレクター（TS）ペイロードにより、エンドポイントはSPDからピアに情報の一部を通知できます。これらはSPDからIKEに通信する必要があります（たとえば、PF_KEY API [PFKEY]はSADB_ACQUIREメッセージを使用します）。TSペイロードは、新しくセットアップされたSAに転送されるパケットの選択基準を指定します。これは、SPDが一貫していることを保証するために、いくつかのシナリオで一貫性チェックとして機能します。その他では、SPDの動的な更新を導きます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two TS payloads appear in each of the messages in the exchange that creates a Child SA pair. Each TS payload contains one or more Traffic Selectors. Each Traffic Selector consists of an address range (IPv4 or IPv6), a port range, and an IP protocol ID.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2つのTSペイロードが、Child SAペアを作成する交換の各メッセージに表示されます。各TSペイロードには、1つ以上のトラフィックセレクターが含まれています。各トラフィックセレクターは、アドレス範囲（IPv4またはIPv6）、ポート範囲、およびIPプロトコルIDで構成されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The first of the two TS payloads is known as TSi (Traffic Selector-initiator). The second is known as TSr (Traffic Selector-responder). TSi specifies the source address of traffic forwarded from (or the destination address of traffic forwarded to) the initiator of the Child SA pair. TSr specifies the destination address of the traffic forwarded to (or the source address of the traffic forwarded from) the responder of the Child SA pair. For example, if the original initiator requests the creation of a Child SA pair, and wishes to tunnel all traffic from subnet 198.51.100.* on the initiator&#39;s side to subnet 192.0.2.* on the responder&#39;s side, the initiator would include a single Traffic Selector in each TS payload. TSi would specify the address range (198.51.100.0 - 198.51.100.255) and TSr would specify the address range (192.0.2.0 - 192.0.2.255). Assuming that proposal was acceptable to the responder, it would send identical TS payloads back.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2つのTSペイロードの最初はTSI（Traffic Selector-Initiator）として知られています。2番目はTSR（Traffic Selector-Responder）として知られています。TSIは、子SAペアのイニシエーターから転送されたトラフィックのソースアドレス（または転送されるトラフィックの宛先アドレス）を指定します。TSRは、子SAペアのレスポンダーに転送されたトラフィックの宛先アドレス（または転送されるトラフィックのソースアドレス）を指定します。たとえば、元のイニシエーターがチャイルドSAペアの作成を要求し、サブネット198.51.100からすべてのトラフィックをトンネルしたい場合**イニシエーター側のサブネット192.0.2へ。各TSペイロードの単一トラフィックセレクター。TSIはアドレス範囲（198.51.100.0-198.51.100.255）を指定し、TSRはアドレス範囲（192.0.2.0-192.0.2.255）を指定します。提案が応答者に受け入れられると仮定すると、同一のTSペイロードを返送します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 allows the responder to choose a subset of the traffic proposed by the initiator. This could happen when the configurations of the two endpoints are being updated but only one end has received the new information. Since the two endpoints may be configured by different people, the incompatibility may persist for an extended period even in the absence of errors. It also allows for intentionally different configurations, as when one end is configured to tunnel all addresses and depends on the other end to have the up-to-date list.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2を使用すると、レスポンダーはイニシエーターが提案したトラフィックのサブセットを選択できます。これは、2つのエンドポイントの構成が更新されているが、新しい情報を受け取ったのは1つの端だけである場合に発生する可能性があります。2つのエンドポイントは異なる人々によって構成される可能性があるため、エラーがない場合でも非互換性は長期間持続する場合があります。また、一方の端がすべてのアドレスをトンネルするように構成され、もう一方の端に依存して最新のリストを持つように構成されているため、意図的に異なる構成が可能になります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the responder chooses a subset of the traffic proposed by the initiator, it narrows the Traffic Selectors to some subset of the initiator&#39;s proposal (provided the set does not become the null set). If the type of Traffic Selector proposed is unknown, the responder ignores that Traffic Selector, so that the unknown type is not returned in the narrowed set.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderがイニシエーターによって提案されたトラフィックのサブセットを選択すると、トラフィックセレクターをイニシエーターの提案の一部に絞り込みます（セットがNULLセットにならない場合）。提案されているトラフィックセレクターのタイプが不明な場合、レスポンダーはそのトラフィックセレクターを無視するため、未知のタイプは狭いセットで返されません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To enable the responder to choose the appropriate range in this case, if the initiator has requested the SA due to a data packet, the initiator SHOULD include as the first Traffic Selector in each of TSi and TSr a very specific Traffic Selector including the addresses in the packet triggering the request. In the example, the initiator would include in TSi two Traffic Selectors: the first containing the address range (198.51.100.43 - 198.51.100.43) and the source port and IP protocol from the packet and the second containing (198.51.100.0 - 198.51.100.255) with all ports and IP protocols. The initiator would similarly include two Traffic Selectors in TSr. If the initiator creates the Child SA pair not in response to an arriving packet, but rather, say, upon startup, then there may be no specific addresses the initiator prefers for the initial tunnel over any other. In that case, the first values in TSi and TSr can be ranges rather than specific values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この場合、対応者が適切な範囲を選択できるようにするには、イニシエーターがデータパケットのためにSAを要求した場合、イニシエーターは、TSIとTSRのそれぞれの最初のトラフィックセレクターとして、非常に特定のトラフィックセレクターを含む非常に特定のトラフィックセレクターを含める必要があります。リクエストをトリガーするパケット。この例では、イニシエーターにはTSIの2つのトラフィックセレクターに含まれます。最初のアドレス範囲（198.51.100.43-198.51.100.43）とパケットからのソースポートおよびIPプロトコルと2番目の含有（198.51.100.0-198.51。100.255）すべてのポートとIPプロトコルを使用。イニシエーターには、同様にTSRに2つのトラフィックセレクターが含まれます。イニシエーターが到着パケットに応じてではなく、スタートアップに応じてチャイルドSAペアを作成する場合、イニシエーターが他のどのトンネルよりも初期トンネルよりも好む特定のアドレスがない場合があります。その場合、TSIおよびTSRの最初の値は、特定の値ではなく範囲になります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder performs the narrowing as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
レスポンダーは次のように狭窄を実行します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If the responder&#39;s policy does not allow it to accept any part of the proposed Traffic Selectors, it responds with a TS_UNACCEPTABLE Notify message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Responderのポリシーが提案されたトラフィックセレクターの一部を受け入れることを許可していない場合、TS_UNACTEPENAPLE NOTIFYメッセージで応答します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If the responder&#39;s policy allows the entire set of traffic covered by TSi and TSr, no narrowing is necessary, and the responder can return the same TSi and TSr values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ResponderのポリシーがTSIとTSRの対象となるトラフィックのセット全体を許可している場合、狭窄は必要ありません。また、レスポンダーは同じTSIとTSRの値を返すことができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If the responder&#39;s policy allows it to accept the first selector of TSi and TSr, then the responder MUST narrow the Traffic Selectors to a subset that includes the initiator&#39;s first choices. In this example above, the responder might respond with TSi being (198.51.100.43 - 198.51.100.43) with all ports and IP protocols.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ResponderのポリシーでTSIとTSRの最初のセレクターを受け入れることができる場合、Responderはトラフィックセレクターをイニシエーターの最初の選択を含むサブセットに絞り込む必要があります。上記のこの例では、Responderは、すべてのポートとIPプロトコルを使用して（198.51.100.43-198.51.100.43）TSIで応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If the responder&#39;s policy does not allow it to accept the first selector of TSi and TSr, the responder narrows to an acceptable subset of TSi and TSr.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ResponderのポリシーがTSIとTSRの最初のセレクターを受け入れることを許可していない場合、ResponderはTSIおよびTSRの許容可能なサブセットに狭くなります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When narrowing is done, there may be several subsets that are acceptable but their union is not. In this case, the responder arbitrarily chooses one of them, and MAY include an ADDITIONAL_TS_POSSIBLE notification in the response. The ADDITIONAL_TS_POSSIBLE notification asserts that the responder narrowed the proposed Traffic Selectors but that other Traffic Selectors would also have been acceptable, though only in a separate SA. There is no data associated with this Notify type. This case will occur only when the initiator and responder are configured differently from one another. If the initiator and responder agree on the granularity of tunnels, the initiator will never request a tunnel wider than the responder will accept.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
狭窄が行われると、許容できるいくつかのサブセットがあるかもしれませんが、彼らの組合はそうではありません。この場合、応答者はそのうちの1つを任意に選択し、応答に追加の_ts_possible通知を含めることができます。追加の_TS_POSSIBLE通知は、レスポンダーが提案されたトラフィックセレクターを絞り込んだが、他のトラフィックセレクターも別のSAでのみ受け入れられると主張しています。このNotifyタイプに関連付けられたデータはありません。このケースは、イニシエーターとレスポンダーが互いに異なって構成されている場合にのみ発生します。イニシエーターとレスポンダーがトンネルの粒度に同意した場合、イニシエーターは応答者が受け入れるよりも幅の広いトンネルを要求することはありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is possible for the responder&#39;s policy to contain multiple smaller ranges, all encompassed by the initiator&#39;s Traffic Selector, and with the responder&#39;s policy being that each of those ranges should be sent over a different SA. Continuing the example above, the responder might have a policy of being willing to tunnel those addresses to and from the initiator, but might require that each address pair be on a separately negotiated Child SA. If the initiator didn&#39;t generate its request based on the packet, but (for example) upon startup, there would not be the very specific first Traffic Selectors helping the responder to select the correct range. There would be no way for the responder to determine which pair of addresses should be included in this tunnel, and it would have to make a guess or reject the request with a SINGLE_PAIR_REQUIRED Notify message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderのポリシーは、すべてがイニシエーターのトラフィックセレクターに含まれる複数の小さな範囲を含む可能性があり、Responderのポリシーは、それらの各範囲を別のSAに送信する必要があるということです。上記の例を継続して、レスポンダーは、これらの住所をイニシエーターとの間でトンネルに導くことをいとわないという方針を持っているかもしれませんが、各アドレスペアが個別に交渉された子SAにあることを要求する場合があります。イニシエーターがパケットに基づいて要求を生成しなかったが、（たとえば）起動時に（たとえば）、応答者が正しい範囲を選択するのに役立つ非常に具体的な最初のトラフィックセレクターはありません。レスポンダーがこのトンネルにどのペアを含めるべきかを決定する方法はありません。また、Single_Pair_Required Notifyメッセージで推測を行うか、リクエストを拒否する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The SINGLE_PAIR_REQUIRED error indicates that a CREATE_CHILD_SA request is unacceptable because its sender is only willing to accept Traffic Selectors specifying a single pair of addresses. The requestor is expected to respond by requesting an SA for only the specific traffic it is trying to forward.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
single_pair_requiredエラーは、create_child_saリクエストが1つのアドレスを指定するトラフィックセレクターを受け入れるだけであるため、create_child_sa要求が受け入れられないことを示します。リクエスターは、転送しようとしている特定のトラフィックのみをSAに要求することで応答することが期待されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Few implementations will have policies that require separate SAs for each address pair. Because of this, if only some parts of the TSi and TSr proposed by the initiator are acceptable to the responder, responders SHOULD narrow the selectors to an acceptable subset rather than use SINGLE_PAIR_REQUIRED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
アドレスペアごとに個別のSASを必要とするポリシーには、実装がほとんどありません。このため、イニシエーターによって提案されたTSIとTSRの一部のみがレスポンダーに受け入れられる場合、レスポンダーはSensele_Pair_Requiredを使用するのではなく、セレクターを許容可能なサブセットに絞り込む必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-9-1--Traffic-Selectors-Violating-Own-Policy">
2.9.1. Traffic Selectors Violating Own Policy
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.9.1. 独自のポリシーに違反しているトラフィックセレクター
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When creating a new SA, the initiator needs to avoid proposing Traffic Selectors that violate its own policy. If this rule is not followed, valid traffic may be dropped. If you use decorrelated policies from [IPSECARCH], this kind of policy violations cannot happen.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいSAを作成するとき、イニシエーターは、独自のポリシーに違反するトラフィックセレクターを提案することを避ける必要があります。このルールに従わない場合、有効なトラフィックが削除される場合があります。[Ipsecarch]からの非相関ポリシーを使用する場合、この種のポリシー違反は発生することはできません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This is best illustrated by an example. Suppose that host A has a policy whose effect is that traffic to 198.51.100.66 is sent via host B encrypted using AES, and traffic to all other hosts in 198.51.100.0/24 is also sent via B, but must use 3DES. Suppose also that host B accepts any combination of AES and 3DES.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これは例で最もよく示されています。ホストAには、198.51.100.66へのトラフィックがAEを使用して暗号化されたホストBを介して送信され、198.51.100.0/24の他のすべてのホストへのトラフィックもBを介して送信されますが、3DEを使用する必要があるというポリシーがあるとします。また、ホストBがAEと3DEの任意の組み合わせを受け入れると仮定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If host A now proposes an SA that uses 3DES, and includes TSr containing (198.51.100.0-198.51.100.255), this will be accepted by host B. Now, host B can also use this SA to send traffic from 198.51.100.66, but those packets will be dropped by A since it requires the use of AES for this traffic. Even if host A creates a new SA only for 198.51.100.66 that uses AES, host B may freely continue to use the first SA for the traffic. In this situation, when proposing the SA, host A should have followed its own policy, and included a TSr containing ((198.51.100.0- 198.51.100.65),(198.51.100.67-198.51.100.255)) instead.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ホストAが3DESを使用し、TSRを含む（198.51.100.0-198.51.100.255）を含むSAを提案するようになりました。これはホストBによって受け入れられます。現在、ホストBはこのSAを使用して198.51.100.66からトラフィックを送信できます。ただし、これらのパケットは、このトラフィックにAEを使用する必要があるため、Aによって削除されます。ホストAがAESを使用する198.51.100.66のみの新しいSAを作成したとしても、ホストBはトラフィックに最初のSAを自由に使用し続けることができます。この状況では、SAを提案する場合、ホストAは独自のポリシーに従い、（（198.51.100.0-198.51.100.65）（198.51.100.67-198.51.100.255））を含むTSRを含めたはずです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In general, if (1) the initiator makes a proposal &#34;for traffic X (TSi/TSr), do SA&#34;, and (2) for some subset X&#39; of X, the initiator does not actually accept traffic X&#39; with SA, and (3) the initiator would be willing to accept traffic X&#39; with some SA&#39; (!=SA), valid traffic can be unnecessarily dropped since the responder can apply either SA or SA&#39; to traffic X&#39;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一般に、（1）イニシエーターが「トラフィックx（TSI/TSR）のために、sa」の提案を行う場合、（2）xの一部のサブセットx &#39;の場合、イニシエーターは実際にはSAでトラフィックxを受け入れません。（3）イニシエーターはトラフィックx &#39;&#39; &#39;sa&#39;（！= sa）を受け入れることをいとわないでしょう。レスポンダーがSAまたはSA &#39;のいずれかをトラフィックxに適用できるため、有効なトラフィックを不必要に削除できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-10--Nonces">
2.10. Nonces
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.10. ノンセス
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IKE_SA_INIT messages each contain a nonce. These nonces are used as inputs to cryptographic functions. The CREATE_CHILD_SA request and the CREATE_CHILD_SA response also contain nonces. These nonces are used to add freshness to the key derivation technique used to obtain keys for Child SA, and to ensure creation of strong pseudorandom bits from the Diffie-Hellman key. Nonces used in IKEv2 MUST be randomly chosen, MUST be at least 128 bits in size, and MUST be at least half the key size of the negotiated pseudorandom function (PRF). However, the initiator chooses the nonce before the outcome of the negotiation is known. Because of that, the nonce has to be long enough for all the PRFs being proposed. If the same random number source is used for both keys and nonces, care must be taken to ensure that the latter use does not compromise the former.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_SA_INITメッセージにはそれぞれnonceが含まれています。これらの非性能は、暗号化関数への入力として使用されます。create_child_saリクエストとcreate_child_sa応答には、noncesも含まれています。これらの非能力は、子SAのキーを取得するために使用されるキー派生技術に新鮮さを追加し、Diffie-Hellmanキーから強力な擬似ランダムビットを作成するために使用されるために使用されます。IKEV2で使用されている非性能は、ランダムに選択する必要があり、少なくとも128ビットがサイズでなければならず、交渉済みの疑似ランダム関数（PRF）のキーサイズの少なくとも半分でなければなりません。ただし、イニシエーターは、交渉の結果がわかっている前にNonCEを選択します。そのため、非CEはすべてのPRFが提案されているほど十分に長くなければなりません。キーとノンセの両方に同じ乱数ソースが使用されている場合、後者の使用が前者を妥協しないことを確認するために注意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-11--Address-and-Port-Agility">
2.11. Address and Port Agility
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.11. 住所とポートアジリティ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE runs over UDP ports 500 and 4500, and implicitly sets up ESP and AH associations for the same IP addresses over which it runs. The IP addresses and ports in the outer header are, however, not themselves cryptographically protected, and IKE is designed to work even through Network Address Translation (NAT) boxes. An implementation MUST accept incoming requests even if the source port is not 500 or 4500, and MUST respond to the address and port from which the request was received. It MUST specify the address and port at which the request was received as the source address and port in the response. IKE functions identically over IPv4 or IPv6.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IkeはUDPポート500および4500を介して実行され、それが実行されるのと同じIPアドレスのESPとAHの関連付けを暗黙的にセットアップします。ただし、外側ヘッダーのIPアドレスとポートは暗号化された保護されているわけではなく、IKEはネットワークアドレス変換（NAT）ボックスでも機能するように設計されています。実装は、ソースポートが500または4500でなくても、受信リクエストを受け入れる必要があり、リクエストが受信されたアドレスとポートに応答する必要があります。応答のソースアドレスとポートとしてリクエストが受信されたアドレスとポートを指定する必要があります。IKEは、IPv4またはIPv6で同じように機能します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-12--Reuse-of-Diffie-Hellman-Exponentials">
2.12. Reuse of Diffie-Hellman Exponentials
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.12. diffie-hellman指数の再利用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE generates keying material using an ephemeral Diffie-Hellman exchange in order to gain the property of &#34;perfect forward secrecy&#34;. This means that once a connection is closed and its corresponding keys are forgotten, even someone who has recorded all of the data from the connection and gets access to all of the long-term keys of the two endpoints cannot reconstruct the keys used to protect the conversation without doing a brute force search of the session key space.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Ikeは、「完全なフォワード秘密」の財産を獲得するために、はかないDiffie-Hellman Exchangeを使用してキーイング素材を生成します。これは、接続が閉じられ、対応するキーが忘れられた後、接続からすべてのデータを記録し、2つのエンドポイントのすべての長期キーにアクセスできる人でさえ、使用されるキーを保護するために使用されるキーを再構築できないことを意味します。セッションキースペースのブルートフォース検索を行わずに会話。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Achieving perfect forward secrecy requires that when a connection is closed, each endpoint MUST forget not only the keys used by the connection but also any information that could be used to recompute those keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
完全なフォワードの秘密を達成するには、接続が閉じられている場合、各エンドポイントが接続で使用されるキーだけでなく、それらのキーを再計算するために使用できる情報も忘れる必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Because computing Diffie-Hellman exponentials is computationally expensive, an endpoint may find it advantageous to reuse those exponentials for multiple connection setups. There are several reasonable strategies for doing this. An endpoint could choose a new exponential only periodically though this could result in less-than-perfect forward secrecy if some connection lasts for less than the lifetime of the exponential. Or it could keep track of which exponential was used for each connection and delete the information associated with the exponential only when some corresponding connection was closed. This would allow the exponential to be reused without losing perfect forward secrecy at the cost of maintaining more state.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
コンピューティングdiffie-hellman指数は計算高価であるため、エンドポイントは複数の接続セットアップの指数を再利用するのに有利になる場合があります。これを行うには、いくつかの合理的な戦略があります。エンドポイントは、定期的にのみ新しい指数を選択できますが、これにより、いくつかの接続が指数の寿命未満で続く場合、完璧よりも低い前方の秘密が生じる可能性があります。または、各接続にどの指数が使用されたかを追跡し、対応する接続が閉じた場合にのみ、指数に関連付けられた情報を削除することもできます。これにより、より多くの状態を維持するために完全な前方の秘密を失うことなく、指数を再利用することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Whether and when to reuse Diffie-Hellman exponentials are private decisions in the sense that they will not affect interoperability. An implementation that reuses exponentials MAY choose to remember the exponential used by the other endpoint on past exchanges and if one is reused to avoid the second half of the calculation. See [REUSE] for a security analysis of this practice and for additional security considerations when reusing ephemeral Diffie-Hellman keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Diffie-Hellman指数を再利用するかどうか、いつ再利用するかは、相互運用性に影響を与えないという意味での個人的な決定です。指数を再利用する実装は、過去の交換で他のエンドポイントで使用されている指数を覚えておくことを選択できます。このプラクティスのセキュリティ分析と、短命のdiffie-hellmanキーを再利用する際の追加のセキュリティに関する考慮事項については、[再利用]を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-13--Generating-Keying-Material">
2.13. Generating Keying Material
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.13. キーイング材料の生成
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the context of the IKE SA, four cryptographic algorithms are negotiated: an encryption algorithm, an integrity protection algorithm, a Diffie-Hellman group, and a pseudorandom function (PRF). The PRF is used for the construction of keying material for all of the cryptographic algorithms used in both the IKE SA and the Child SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAのコンテキストでは、4つの暗号化アルゴリズムがネゴシエートされます。暗号化アルゴリズム、整合性保護アルゴリズム、diffie-hellmanグループ、および擬似ランダム関数（PRF）です。PRFは、IKE SAとチャイルドSASの両方で使用されるすべての暗号化アルゴリズムのキーイング材料の構築に使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
We assume that each encryption algorithm and integrity protection algorithm uses a fixed-size key and that any randomly chosen value of that fixed size can serve as an appropriate key. For algorithms that accept a variable-length key, a fixed key size MUST be specified as part of the cryptographic transform negotiated (see Section 3.3.5 for the definition of the Key Length transform attribute). For algorithms for which not all values are valid keys (such as DES or 3DES with key parity), the algorithm by which keys are derived from arbitrary values MUST be specified by the cryptographic transform.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各暗号化アルゴリズムと整合性保護アルゴリズムが固定サイズキーを使用し、その固定サイズのランダムに選択された値が適切なキーとして機能すると仮定します。可変長キーを受け入れるアルゴリズムの場合、固定キーサイズを暗号化変換の一部として指定する必要があります（キー長変換属性の定義については、セクション3.3.5を参照）。すべての値が有効なキーではないアルゴリズム（キーパリティを持つDESまたは3DEなど）では、キーが任意の値から導出されるアルゴリズムを暗号化変換によって指定する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For integrity protection functions based on Hashed Message Authentication Code (HMAC), the fixed key size is the size of the output of the underlying hash function.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ハッシュされたメッセージ認証コード（HMAC）に基づく整合性保護関数の場合、固定キーサイズは、基礎となるハッシュ関数の出力のサイズです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is assumed that PRFs accept keys of any length, but have a preferred key size. The preferred key size MUST be used as the length of SK_d, SK_pi, and SK_pr (see Section 2.14). For PRFs based on the HMAC construction, the preferred key size is equal to the length of the output of the underlying hash function. Other types of PRFs MUST specify their preferred key size.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
PRFは任意の長さのキーを受け入れるが、好ましいキーサイズを持っていると想定されています。優先キーサイズは、SK_D、SK_PI、およびSK_PRの長さとして使用する必要があります（セクション2.14を参照）。HMAC構造に基づくPRFSの場合、優先キーサイズは、基礎となるハッシュ関数の出力の長さに等しくなります。他のタイプのPRFは、好みのキーサイズを指定する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Keying material will always be derived as the output of the negotiated PRF algorithm. Since the amount of keying material needed may be greater than the size of the output of the PRF, the PRF is used iteratively. The term &#34;prf+&#34; describes a function that outputs a pseudorandom stream based on the inputs to a pseudorandom function called &#34;prf&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
キーイング材料は、常にネゴシエートされたPRFアルゴリズムの出力として導き出されます。必要なキーイング材料の量はPRFの出力のサイズよりも大きいため、PRFは繰り返し使用されます。「PRF」という用語は、「PRF」と呼ばれる擬似ランダム関数への入力に基づいて擬似ランダムストリームを出力する関数を表します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the following, | indicates concatenation. prf+ is defined as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下では、|連結を示します。PRFは次のように定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
prf+ (K,S) = T1 | T2 | T3 | T4 | ...
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
prf（k、s）= t1 |T2 |T3 |T4 |...
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
where: T1 = prf (K, S | 0x01) T2 = prf (K, T1 | S | 0x02) T3 = prf (K, T2 | S | 0x03) T4 = prf (K, T3 | S | 0x04) ...
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここ：T1 = PRF（K、S | 0x01）T2 = PRF（K、T1 | S | S | 0x02）T3 = PRF（K、T2 | S | 0x03）T4 = PRF（K、T3 | S | S | 0x04）。。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This continues until all the material needed to compute all required keys has been output from prf+. The keys are taken from the output string without regard to boundaries (e.g., if the required keys are a 256-bit Advanced Encryption Standard (AES) key and a 160-bit HMAC key, and the prf function generates 160 bits, the AES key will come from T1 and the beginning of T2, while the HMAC key will come from the rest of T2 and the beginning of T3).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これは、必要なすべてのキーを計算するために必要なすべての材料がPRFから出力されるまで続きます。キーは境界に関係なく出力文字列から取得されます（たとえば、必要なキーが256ビットの高度な暗号化標準（AES）キーと160ビットHMACキーであり、PRF関数が160ビットを生成します。T1とT2の始まりから来ますが、HMACキーはT2の残りの部分とT3の始まりから来ます）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The constant concatenated to the end of each prf function is a single octet. The prf+ function is not defined beyond 255 times the size of the prf function output.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各PRF関数の最後まで一定の連結は、単一のオクテットです。PRF関数は、PRF関数出力のサイズの255倍を超えて定義されていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-14--Generating-Keying-Material-for-the-IKE-SA">
2.14. Generating Keying Material for the IKE SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.14. IKE SAのキーイング材料を生成します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The shared keys are computed as follows. A quantity called SKEYSEED is calculated from the nonces exchanged during the IKE_SA_INIT exchange and the Diffie-Hellman shared secret established during that exchange. SKEYSEED is used to calculate seven other secrets: SK_d used for deriving new keys for the Child SAs established with this IKE SA; SK_ai and SK_ar used as a key to the integrity protection algorithm for authenticating the component messages of subsequent exchanges; SK_ei and SK_er used for encrypting (and of course decrypting) all subsequent exchanges; and SK_pi and SK_pr, which are used when generating an AUTH payload. The lengths of SK_d, SK_pi, and SK_pr MUST be the preferred key length of the PRF agreed upon.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
共有キーは次のように計算されます。SkeySeedと呼ばれる数量は、IKE_SA_INIT Exchangeで交換されたNoncesから計算され、その交換中に確立されたDiffie-Hellmanの共有秘密を共有します。SkeySeedは、他の7つの秘密を計算するために使用されます。SK_Dは、このIKE SAで確立された子SASの新しいキーを導き出すために使用されます。Sk_aiとSk_arは、後続の交換のコンポーネントメッセージを認証するための整合性保護アルゴリズムの鍵として使用されます。SK_EIとSK_ERは、その後のすべての交換の暗号化（そしてもちろん復号化）に使用されます。およびSK_PIとSK_PRは、認証ペイロードを生成するときに使用されます。SK_D、SK_PI、およびSK_PRの長さは、合意されたPRFの好ましいキー長でなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SKEYSEED and its derivatives are computed as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
skeyseedとその導関数は次のように計算されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   SKEYSEED = prf(Ni | Nr, g^ir)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   {SK_d | SK_ai | SK_ar | SK_ei | SK_er | SK_pi | SK_pr }
                   = prf+ (SKEYSEED, Ni | Nr | SPIi | SPIr )
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
(indicating that the quantities SK_d, SK_ai, SK_ar, SK_ei, SK_er, SK_pi, and SK_pr are taken in order from the generated bits of the prf+). g^ir is the shared secret from the ephemeral Diffie-Hellman exchange. g^ir is represented as a string of octets in big endian order padded with zeros if necessary to make it the length of the modulus. Ni and Nr are the nonces, stripped of any headers. For historical backward-compatibility reasons, there are two PRFs that are treated specially in this calculation. If the negotiated PRF is AES-XCBC-PRF-128 [AESXCBCPRF128] or AES-CMAC-PRF-128 [AESCMACPRF128], only the first 64 bits of Ni and the first 64 bits of Nr are used in calculating SKEYSEED, but all the bits are used for input to the prf+ function.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
（SK_D、SK_AI、SK_AR、SK_EI、SK_ER、SK_PI、SK_PRがPRFの生成されたビットから順番に採取されていることを示します）。G^irは、Epememal Diffie-Hellman Exchangeの共有秘密です。G^irは、必要に応じてゼロをパディングしてゼロをパディングした大きなエンディアンオーダーの一連のオクテットとして表されます。NiとNRは、ヘッダーが剥がれたノンセスです。歴史的な後方互換性の理由から、この計算で特別に扱われる2つのPRFがあります。ネゴシエートされたPRFがAES-XCBC-PRF-128 [AESXCBCPRF128]またはAES-CMAC-PRF-128 [AESCMACPRF128]である場合、NIの最初の64ビットとNRの最初の64ビットのみが、すべてのSKEEDの計算に使用されますが、BITは、PRF関数への入力に使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The two directions of traffic flow use different keys. The keys used to protect messages from the original initiator are SK_ai and SK_ei. The keys used to protect messages in the other direction are SK_ar and SK_er.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックフローの2つの方向は、異なるキーを使用しています。元のイニシエーターからのメッセージを保護するために使用されるキーは、SK_AIとSK_EIです。他の方向のメッセージを保護するために使用されるキーは、SK_ARとSK_ERです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-15--Authentication-of-the-IKE-SA">
2.15. Authentication of the IKE SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.15. IKE SAの認証
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When not using extensible authentication (see Section 2.16), the peers are authenticated by having each sign (or MAC using a padded shared secret as the key, as described later in this section) a block of data. In these calculations, IDi&#39; and IDr&#39; are the entire ID payloads excluding the fixed header. For the responder, the octets to be signed start with the first octet of the first SPI in the header of the second message (IKE_SA_INIT response) and end with the last octet of the last payload in the second message. Appended to this (for the purposes of computing the signature) are the initiator&#39;s nonce Ni (just the value, not the payload containing it), and the value prf(SK_pr, IDr&#39;). Note that neither the nonce Ni nor the value prf(SK_pr, IDr&#39;) are transmitted. Similarly, the initiator signs the first message (IKE_SA_INIT request), starting with the first octet of the first SPI in the header and ending with the last octet of the last payload. Appended to this (for purposes of computing the signature) are the responder&#39;s nonce Nr, and the value prf(SK_pi, IDi&#39;). It is critical to the security of the exchange that each side sign the other side&#39;s nonce.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
拡張可能な認証を使用していない場合（セクション2.16を参照）、ピアは各サイン（またはこのセクションで説明されているように、パッド付き共有シークレットをキーとして使用して）をデータブロックにすることで認証されます。これらの計算では、IDI &#39;とIDR&#39;は、固定ヘッダーを除くIDペイロード全体です。レスポンダーの場合、署名されるオクテットは、2番目のメッセージのヘッダー（IKE_SA_INIT応答）の最初のSPIの最初のオクテットから始まり、2番目のメッセージの最後のペイロードの最後のオクテットで終了します。これに追加された（署名を計算する目的のため）は、イニシエーターのNonCe Ni（それを含むペイロードではなく、値だけ）と値PRF（SK_PR、IDR &#39;）です。Nonce NiもValue PRF（SK_PR、IDR &#39;）も送信されないことに注意してください。同様に、イニシエーターは最初のメッセージ（IKE_SA_INITリクエスト）に署名し、ヘッダーの最初のSPIの最初のオクテットから始まり、最後のペイロードの最後のオクテットで終了します。これに追加された（署名を計算するため）は、ResponderのNonCE NRとValue PRF（SK_PI、IDI &#39;）です。両側の側面のnonceに署名することは、交換のセキュリティにとって重要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator&#39;s signed octets can be described as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターの署名されたオクテットは、次のように説明できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   InitiatorSignedOctets = RealMessage1 | NonceRData | MACedIDForI
   GenIKEHDR = [ four octets 0 if using port 4500 ] | RealIKEHDR
   RealIKEHDR =  SPIi | SPIr |  . . . | Length
   RealMessage1 = RealIKEHDR | RestOfMessage1
   NonceRPayload = PayloadHeader | NonceRData
   InitiatorIDPayload = PayloadHeader | RestOfInitIDPayload
   RestOfInitIDPayload = IDType | RESERVED | InitIDData
   MACedIDForI = prf(SK_pi, RestOfInitIDPayload)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder&#39;s signed octets can be described as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderの署名されたオクテットは、次のように説明できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   ResponderSignedOctets = RealMessage2 | NonceIData | MACedIDForR
   GenIKEHDR = [ four octets 0 if using port 4500 ] | RealIKEHDR
   RealIKEHDR =  SPIi | SPIr |  . . . | Length
   RealMessage2 = RealIKEHDR | RestOfMessage2
   NonceIPayload = PayloadHeader | NonceIData
   ResponderIDPayload = PayloadHeader | RestOfRespIDPayload
   RestOfRespIDPayload = IDType | RESERVED | RespIDData
   MACedIDForR = prf(SK_pr, RestOfRespIDPayload)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that all of the payloads are included under the signature, including any payload types not defined in this document. If the first message of the exchange is sent multiple times (such as with a responder cookie and/or a different Diffie-Hellman group), it is the latest version of the message that is signed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントで定義されていないペイロードタイプを含む、すべてのペイロードは署名の下に含まれていることに注意してください。交換の最初のメッセージが複数回送信される場合（レスポンダーCookieや別のDiffie-Hellmanグループなど）、署名されたメッセージの最新バージョンです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Optionally, messages 3 and 4 MAY include a certificate, or certificate chain providing evidence that the key used to compute a digital signature belongs to the name in the ID payload. The signature or MAC will be computed using algorithms dictated by the type of key used by the signer, and specified by the Auth Method field in the Authentication payload. There is no requirement that the initiator and responder sign with the same cryptographic algorithms. The choice of cryptographic algorithms depends on the type of key each has. In particular, the initiator may be using a shared key while the responder may have a public signature key and certificate. It will commonly be the case (but it is not required) that, if a shared secret is used for authentication, the same key is used in both directions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
オプションで、メッセージ3と4には、デジタル署名の計算に使用されているキーがIDペイロードの名前に属しているという証拠を提供する証明書または証明書チェーンが含まれる場合があります。署名またはMacは、署名者が使用するキーのタイプによって決定され、認証ペイロードのAUTHメソッドフィールドで指定されたアルゴリズムを使用して計算されます。イニシエーターとレスポンダーが同じ暗号化アルゴリズムを備えた署名を要求する必要はありません。暗号化アルゴリズムの選択は、それぞれが持っているキーのタイプに依存します。特に、イニシエーターは共有キーを使用している場合があり、レスポンダーにはパブリックシグネチャーキーと証明書がある場合があります。一般的には、認証に共有された秘密が使用されている場合、同じキーが両方向に使用されるのは、一般的に（ただし不要です）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that it is a common but typically insecure practice to have a shared key derived solely from a user-chosen password without incorporating another source of randomness. This is typically insecure because user-chosen passwords are unlikely to have sufficient unpredictability to resist dictionary attacks and these attacks are not prevented in this authentication method. (Applications using password-based authentication for bootstrapping and IKE SA should use the authentication method in Section 2.16, which is designed to prevent off-line dictionary attacks.) The pre-shared key needs to contain as much unpredictability as the strongest key being negotiated. In the case of a pre-shared key, the AUTH value is computed as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ランダム性の別のソースを組み込むことなく、ユーザーが選択したパスワードのみから派生した共有キーを共有することは一般的ではあるが、通常は安全でない練習であることに注意してください。ユーザーが選択したパスワードが辞書攻撃に抵抗するのに十分な予測不可能性を持つ可能性が低く、これらの攻撃がこの認証方法では防止されていないため、これは通常安全ではありません。（ブートストラップとIKE SAにパスワードベースの認証を使用するアプリケーションは、セクション2.16の認証方法を使用する必要があります。これは、オフラインの辞書攻撃を防ぐように設計されています。）事前に共有されるキーは、交渉される最も強力なキーと同じくらい予測不可能性を含める必要があります。。事前共有キーの場合、認証値は次のように計算されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   For the initiator:
      AUTH = prf( prf(Shared Secret, &#34;Key Pad for IKEv2&#34;),
                       &lt;InitiatorSignedOctets&gt;)
   For the responder:
      AUTH = prf( prf(Shared Secret, &#34;Key Pad for IKEv2&#34;),
                       &lt;ResponderSignedOctets&gt;)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
where the string &#34;Key Pad for IKEv2&#34; is 17 ASCII characters without null termination. The shared secret can be variable length. The pad string is added so that if the shared secret is derived from a password, the IKE implementation need not store the password in cleartext, but rather can store the value prf(Shared Secret,&#34;Key Pad for IKEv2&#34;), which could not be used as a password equivalent for protocols other than IKEv2. As noted above, deriving the shared secret from a password is not secure. This construction is used because it is anticipated that people will do it anyway. The management interface by which the shared secret is provided MUST accept ASCII strings of at least 64 octets and MUST NOT add a null terminator before using them as shared secrets. It MUST also accept a hex encoding of the shared secret. The management interface MAY accept other encodings if the algorithm for translating the encoding to a binary string is specified.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで、文字列「IKEV2のキーパッド」は、ヌル終了のない17のASCII文字です。共有された秘密は、長さが変動する場合があります。共有秘密がパスワードから派生した場合、IKEの実装がパスワードをClearTextに保存する必要はなく、値PRF（共有秘密、「IKEV2のキーパッド」）を保存できます。IKEV2以外のプロトコルに相当するパスワードとして使用されます。上記のように、パスワードから共有秘密を導き出すことは安全ではありません。とにかく人々がそれをすることが予想されるため、この構造は使用されます。共有された秘密が提供される管理インターフェイスは、少なくとも64オクテットのASCII文字列を受け入れる必要があり、共有秘密として使用する前にヌルターミネーターを追加してはなりません。また、共有された秘密の16進コードを受け入れる必要があります。管理インターフェイスは、エンコードをバイナリ文字列に変換するためのアルゴリズムが指定されている場合、他のエンコーディングを受け入れる場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are two types of EAP authentication (described in Section 2.16), and each type uses different values in the AUTH computations shown above. If the EAP method is key-generating, substitute master session key (MSK) for the shared secret in the computation. For non-key-generating methods, substitute SK_pi and SK_pr, respectively, for the shared secret in the two AUTH computations.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAP認証には2つのタイプがあり（セクション2.16で説明）、各タイプは上記の認証計算で異なる値を使用します。EAPメソッドがキー生成の場合、計算の共有秘密の代替マスターセッションキー（MSK）。非キー生成方法の場合、それぞれ2つの認証計算の共有秘密にSK_PIとSK_PRを代用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-16--Extensible-Authentication-Protocol-Methods">
2.16. Extensible Authentication Protocol Methods
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.16. 拡張可能な認証プロトコルメソッド
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In addition to authentication using public key signatures and shared secrets, IKE supports authentication using methods defined in RFC 3748 [EAP]. Typically, these methods are asymmetric (designed for a user authenticating to a server), and they may not be mutual. For this reason, these protocols are typically used to authenticate the initiator to the responder and MUST be used in conjunction with a public-key-signature-based authentication of the responder to the initiator. These methods are often associated with mechanisms referred to as &#34;Legacy Authentication&#34; mechanisms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは、公開キーの署名と共有秘密を使用した認証に加えて、RFC 3748 [EAP]で定義されたメソッドを使用して認証をサポートしています。通常、これらの方法は非対称（サーバーに認証されるユーザー向けに設計されています）であり、相互ではない場合があります。このため、これらのプロトコルは通常、イニシエーターをレスポンダーに認証するために使用され、イニシエーターへの対応者のパブリックキー署名ベースの認証と併用する必要があります。これらの方法は、多くの場合、「レガシー認証」メカニズムと呼ばれるメカニズムに関連付けられています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
While this document references [EAP] with the intent that new methods can be added in the future without updating this specification, some simpler variations are documented here. [EAP] defines an authentication protocol requiring a variable number of messages. Extensible Authentication is implemented in IKE as additional IKE_AUTH exchanges that MUST be completed in order to initialize the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは[EAP]を参照して、この仕様を更新せずに新しい方法を将来追加できるという意図を参照していますが、ここにはいくつかのより単純なバリエーションが文書化されています。[EAP]は、可変数のメッセージを必要とする認証プロトコルを定義します。拡張可能な認証は、IKE SAを初期化するために完了する必要がある追加のIKE_AUTH交換としてIKEに実装されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An initiator indicates a desire to use EAP by leaving out the AUTH payload from the first message in the IKE_AUTH exchange. (Note that the AUTH payload is required for non-EAP authentication, and is thus not marked as optional in the rest of this document.) By including an IDi payload but not an AUTH payload, the initiator has declared an identity but has not proven it. If the responder is willing to use an EAP method, it will place an Extensible Authentication Protocol (EAP) payload in the response of the IKE_AUTH exchange and defer sending SAr2, TSi, and TSr until initiator authentication is complete in a subsequent IKE_AUTH exchange. In the case of a minimal EAP method, the initial SA establishment will appear as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、IKE_AUTH Exchangeの最初のメッセージから認証ペイロードを除外することにより、EAPを使用したいという要望を示します。（AUTHペイロードは非EAP認証に必要であるため、このドキュメントの残りの部分ではオプションとしてマークされていないことに注意してください。）IDIペイロードを含めるが、認証ペイロードを含めることにより、イニシエーターはアイデンティティを宣言していませんが、証明されていません。それ。ResponderがEAPメソッドを使用する意思がある場合、IKE_AUTH Exchangeの応答に拡張可能な認証プロトコル（EAP）ペイロードを配置し、その後のIKE_AUTH Exchangeで開始因子認証が完了するまでSAR2、TSI、およびTSRの送信を延期します。最小限のEAPメソッドの場合、最初のSA確立は次のように表示されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SAi1, KEi, Ni  --&gt;
                                &lt;--  HDR, SAr1, KEr, Nr, [CERTREQ]
   HDR, SK {IDi, [CERTREQ,]
       [IDr,] SAi2,
       TSi, TSr}  --&gt;
                                &lt;--  HDR, SK {IDr, [CERT,] AUTH,
                                         EAP }
   HDR, SK {EAP}  --&gt;
                                &lt;--  HDR, SK {EAP (success)}
   HDR, SK {AUTH}  --&gt;
                                &lt;--  HDR, SK {AUTH, SAr2, TSi, TSr }
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As described in Section 2.2, when EAP is used, each pair of IKE SA initial setup messages will have their message numbers incremented; the first pair of AUTH messages will have an ID of 1, the second will be 2, and so on.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション2.2で説明されているように、EAPを使用すると、IKE SAの初期セットアップメッセージの各ペアにメッセージ番号が増加します。Authメッセージの最初のペアには1のIDがあり、2番目は2になります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For EAP methods that create a shared key as a side effect of authentication, that shared key MUST be used by both the initiator and responder to generate AUTH payloads in messages 7 and 8 using the syntax for shared secrets specified in Section 2.15. The shared key from EAP is the field from the EAP specification named MSK. This shared key generated during an IKE exchange MUST NOT be used for any other purpose.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
認証の副作用として共有キーを作成するEAPメソッドの場合、共有キーをイニシエーターとレスポンダーの両方が使用して、セクション2.15で指定された共有シークレットの構文を使用して、メッセージ7および8で認証ペイロードを生成する必要があります。EAPの共有キーは、MSKという名前のEAP仕様のフィールドです。IKE交換中に生成されたこの共有キーは、他の目的に使用してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAP methods that do not establish a shared key SHOULD NOT be used, as they are subject to a number of man-in-the-middle attacks [EAPMITM] if these EAP methods are used in other protocols that do not use a server-authenticated tunnel. Please see the Security Considerations section for more details. If EAP methods that do not generate a shared key are used, the AUTH payloads in messages 7 and 8 MUST be generated using SK_pi and SK_pr, respectively.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
共有キーを確立しないEAPメソッドは、これらのEAPメソッドがServer-Authenticatedを使用しない他のプロトコルで使用されている場合、多くの中間攻撃[EAPMITM]の対象となるため、使用しないでください。トンネル。詳細については、セキュリティに関する考慮事項セクションをご覧ください。共有キーを生成しないEAPメソッドが使用される場合、メッセージ7と8の認証ペイロードは、それぞれSK_PIとSK_PRを使用して生成する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator of an IKE SA using EAP needs to be capable of extending the initial protocol exchange to at least ten IKE_AUTH exchanges in the event the responder sends notification messages and/or retries the authentication prompt. Once the protocol exchange defined by the chosen EAP authentication method has successfully terminated, the responder MUST send an EAP payload containing the Success message. Similarly, if the authentication method has failed, the responder MUST send an EAP payload containing the Failure message. The responder MAY at any time terminate the IKE exchange by sending an EAP payload containing the Failure message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAPを使用したIKE SAのイニシエーターは、Responderが通知メッセージを送信したり、認証プロンプトを取得した場合、初期プロトコル交換を少なくとも10個のIKE_AUTH取引所に拡張できる必要があります。選択したEAP認証方法によって定義されたプロトコル交換が正常に終了したら、レスポンダーは成功メッセージを含むEAPペイロードを送信する必要があります。同様に、認証方法が失敗した場合、レスポンダーは障害メッセージを含むEAPペイロードを送信する必要があります。レスポンダーは、障害メッセージを含むEAPペイロードを送信することにより、いつでもIKE Exchangeを終了する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Following such an extended exchange, the EAP AUTH payloads MUST be included in the two messages following the one containing the EAP Success message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このような延長された交換に続いて、EAP成功メッセージを含むものに続く2つのメッセージにEAP Authペイロードを含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the initiator authentication uses EAP, it is possible that the contents of the IDi payload is used only for Authentication, Authorization, and Accounting (AAA) routing purposes and selecting which EAP method to use. This value may be different from the identity authenticated by the EAP method. It is important that policy lookups and access control decisions use the actual authenticated identity. Often the EAP server is implemented in a separate AAA server that communicates with the IKEv2 responder. In this case, the authenticated identity, if different from that in the IDi payload, has to be sent from the AAA server to the IKEv2 responder.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーター認証がEAPを使用する場合、IDIペイロードの内容は、認証、承認、会計（AAA）ルーティングの目的と使用するEAPメソッドの選択にのみ使用される可能性があります。この値は、EAPメソッドによって認証されたIDとは異なる場合があります。ポリシーの検索とアクセス制御の決定が実際の認証されたIDを使用することが重要です。多くの場合、EAPサーバーは、IKEV2レスポンダーと通信する別のAAAサーバーに実装されます。この場合、認証されたアイデンティティは、IDIペイロードとは異なる場合、AAAサーバーからIKEV2レスポンダーに送信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-17--Generating-Keying-Material-for-Child-SAs">
2.17. Generating Keying Material for Child SAs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.17. 子SASのキーイング材料を生成します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A single Child SA is created by the IKE_AUTH exchange, and additional Child SAs can optionally be created in CREATE_CHILD_SA exchanges. Keying material for them is generated as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
単一の子供SAはIKE_AUTH Exchangeによって作成され、追加の子SASはcreate_child_sa取引所でオプションで作成できます。それらのキーイング材料は次のように生成されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
KEYMAT = prf+(SK_d, Ni | Nr)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
keymat = prf（sk_d、ni | nr）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Where Ni and Nr are the nonces from the IKE_SA_INIT exchange if this request is the first Child SA created or the fresh Ni and Nr from the CREATE_CHILD_SA exchange if this is a subsequent creation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで、NiとNRは、このリクエストが最初の子SAが作成した場合のIKE_SA_INIT ExchangeのNONCESまたはCREATE_CHILD_SA Exchangeの新鮮なNIとNRです。これが後続の作成である場合。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For CREATE_CHILD_SA exchanges including an optional Diffie-Hellman exchange, the keying material is defined as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
オプションのdiffie-hellman Exchangeを含むcreate_child_sa取引所の場合、キーイング素材は次のように定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   KEYMAT = prf+(SK_d, g^ir (new) | Ni | Nr )
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
where g^ir (new) is the shared secret from the ephemeral Diffie-Hellman exchange of this CREATE_CHILD_SA exchange (represented as an octet string in big endian order padded with zeros in the high-order bits if necessary to make it the length of the modulus).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで、このCreate_Child_sa ExchangeのはかないDiffie-Hellman Exchange（必要に応じて高次ビットのゼロがパッドで埋め込まれた大きなエンディアンオーダーのオクテット文字列として表される）の共有秘密です係数）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A single CHILD_SA negotiation may result in multiple Security Associations. ESP and AH SAs exist in pairs (one in each direction), so two SAs are created in a single Child SA negotiation for them. Furthermore, Child SA negotiation may include some future IPsec protocol(s) in addition to, or instead of, ESP or AH (for example, ROHC_INTEG as described in [ROHCV2]). In any case, keying material for each Child SA MUST be taken from the expanded KEYMAT using the following rules:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
単一のchild_SA交渉により、複数のセキュリティ関連が生じる場合があります。ESPとAH SASはペア（各方向に1つ）に存在するため、2つのSASが単一の子SAの交渉で作成されます。さらに、子SAの交渉には、ESPまたはAH（たとえば、[ROHCV2]に記載されているROHC_INTEGなど）に加えて、またはその代わりに、将来のIPSECプロトコルが含まれる場合があります。いずれにせよ、次のルールを使用して、各子供SAのキーイング材料を拡張されたキーマットから取得する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o All keys for SAs carrying data from the initiator to the responder are taken before SAs going from the responder to the initiator.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SASからレスポンダーにデータを運ぶSASのすべてのキーは、SASがレスポンダーからイニシエーターに移動する前に取得されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If multiple IPsec protocols are negotiated, keying material for each Child SA is taken in the order in which the protocol headers will appear in the encapsulated packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 複数のIPSECプロトコルがネゴシエートされている場合、各子SAのキーイング素材は、カプセル化されたパケットにプロトコルヘッダーが表示される順序で採取されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If an IPsec protocol requires multiple keys, the order in which they are taken from the SA&#39;s keying material needs to be described in the protocol&#39;s specification. For ESP and AH, [IPSECARCH] defines the order, namely: the encryption key (if any) MUST be taken from the first bits and the integrity key (if any) MUST be taken from the remaining bits.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IPSECプロトコルに複数のキーが必要な場合、SAのキーイング素材から取得される順序は、プロトコルの仕様で説明する必要があります。ESPとAHの場合、[IPSECARCH]は順序、つまり、暗号化キー（もしあれば）を最初のビットから取得する必要があり、整合性キー（もしあれば）を残りのビットから取得する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each cryptographic algorithm takes a fixed number of bits of keying material specified as part of the algorithm, or negotiated in SA payloads (see Section 2.13 for description of key lengths, and Section 3.3.5 for the definition of the Key Length transform attribute).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各暗号化アルゴリズムは、アルゴリズムの一部として指定された、またはSAペイロードで交渉されたキーイング材料の固定数のビットを取ります（キー長の説明についてはセクション2.13を参照し、キー長の変換属性の定義についてはセクション3.3.5を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-18--Rekeying-IKE-SAs-Using-a-CREATECHILDSA-Exchange">
2.18. Rekeying IKE SAs Using a CREATE_CHILD_SA Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.18. create_child_sa Exchangeを使用してIke SASを再キーにします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CREATE_CHILD_SA exchange can be used to rekey an existing IKE SA (see Sections 1.3.2 and 2.8). New initiator and responder SPIs are supplied in the SPI fields in the Proposal structures inside the Security Association (SA) payloads (not the SPI fields in the IKE header). The TS payloads are omitted when rekeying an IKE SA. SKEYSEED for the new IKE SA is computed using SK_d from the existing IKE SA as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
create_child_sa Exchangeを使用して、既存のIKE SAを再キーすることができます（セクション1.3.2および2.8を参照）。新しいイニシエーターとレスポンダーSPIは、セキュリティ協会（SA）ペイロード内の提案構造のSPIフィールドに提供されます（IKEヘッダーのSPIフィールドではありません）。IKE SAを再キーニングするとき、TSペイロードは省略されています。新しいIKE SAのSkeySeedは、次のように既存のIKESAからSK_Dを使用して計算されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   SKEYSEED = prf(SK_d (old), g^ir (new) | Ni | Nr)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
where g^ir (new) is the shared secret from the ephemeral Diffie-Hellman exchange of this CREATE_CHILD_SA exchange (represented as an octet string in big endian order padded with zeros if necessary to make it the length of the modulus) and Ni and Nr are the two nonces stripped of any headers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで、G^ir（新しい）は、このcreate_child_sa Exchange（必要に応じてゼロをパッドで埋め込んだ大きなエンドのオーダーのオクテット文字列として表される）およびNiとnrのdiffie-hellman Exchangeの共有秘密です。ヘッダーが剥がれた2つのノンセスです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The old and new IKE SA may have selected a different PRF. Because the rekeying exchange belongs to the old IKE SA, it is the old IKE SA&#39;s PRF that is used to generate SKEYSEED.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
古いIKEおよび新しいIKE SAは、別のPRFを選択した可能性があります。再キーイング交換は古いIke SAに属しているため、Skeyseedを生成するために使用されるのは古いIke SAのPRFです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The main reason for rekeying the IKE SA is to ensure that the compromise of old keying material does not provide information about the current keys, or vice versa. Therefore, implementations MUST perform a new Diffie-Hellman exchange when rekeying the IKE SA. In other words, an initiator MUST NOT propose the value &#34;NONE&#34; for the Diffie-Hellman transform, and a responder MUST NOT accept such a proposal. This means that a successful exchange rekeying the IKE SA always includes the KEi/KEr payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAを再キーニングする主な理由は、古いキーイング素材の妥協が現在のキーに関する情報を提供しないこと、またはその逆を確実にすることです。したがって、実装は、IKE SAを再キーニングする際に、新しいDiffie-Hellman Exchangeを実行する必要があります。言い換えれば、イニシエーターは、diffie-hellmanの変革の値「なし」を提案してはなりません。また、レスポンダーはそのような提案を受け入れてはなりません。これは、IKE SAを再キーリングする成功した交換には、常にKEI/KERペイロードが含まれていることを意味します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The new IKE SA MUST reset its message counters to 0.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
新しいIKE SAは、メッセージカウンターを0にリセットする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SK_d, SK_ai, SK_ar, SK_ei, and SK_er are computed from SKEYSEED as specified in Section 2.14, using SPIi, SPIr, Ni, and Nr from the new exchange, and using the new IKE SA&#39;s PRF.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SK_D、SK_AI、SK_AR、SK_EI、およびSK_ERは、セクション2.14で指定されたSKEYSEEDから計算され、SPII、SPIR、NI、NRを新しいExchangeから、新しいIKE SAのPRFを使用して計算します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-19--Requesting-an-Internal-Address-on-a-Remote-Network">
2.19. Requesting an Internal Address on a Remote Network
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.19. リモートネットワークで内部アドレスを要求します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Most commonly occurring in the endpoint-to-security-gateway scenario, an endpoint may need an IP address in the network protected by the security gateway and may need to have that address dynamically assigned. A request for such a temporary address can be included in any request to create a Child SA (including the implicit request in message 3) by including a CP payload. Note, however, it is usual to only assign one IP address during the IKE_AUTH exchange. That address persists at least until the deletion of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
エンドポイントからセキュリティゲートウェイのシナリオで最も一般的に発生すると、エンドポイントは、セキュリティゲートウェイによって保護されているネットワークにIPアドレスが必要になる場合があり、そのアドレスを動的に割り当てる必要があります。このような一時的な住所のリクエストは、CPペイロードを含めることにより、子SA（メッセージ3の暗黙のリクエストを含む）を作成するという要求に含めることができます。ただし、IKE_AUTH Exchange中に1つのIPアドレスのみを割り当てるのは通常です。そのアドレスは、少なくともIKE SAの削除まで持続します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This function provides address allocation to an IPsec Remote Access Client (IRAC) trying to tunnel into a network protected by an IPsec Remote Access Server (IRAS). Since the IKE_AUTH exchange creates an IKE SA and a Child SA, the IRAC MUST request the IRAS-controlled address (and optionally other information concerning the protected network) in the IKE_AUTH exchange. The IRAS may procure an address for the IRAC from any number of sources such as a DHCP/BOOTP (Bootstrap Protocol) server or its own address pool.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この関数は、IPSECリモートアクセスサーバー（IRAS）によって保護されたネットワークにトンネルを試しているIPSECリモートアクセスクライアント（IRAC）へのアドレス割り当てを提供します。IKE_AUTH ExchangeはIKE SAとチャイルドSAを作成するため、IRACはIKE_AUTH ExchangeでIRAS制御の住所（およびオプションで保護されたネットワークに関する他の情報）を要求する必要があります。IRAは、DHCP/BOOTP（Bootstrap Protocol）サーバーまたは独自のアドレスプールなどの任意の数のソースからIRACの住所を調達する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
    HDR, SK {IDi, [CERT,]
       [CERTREQ,] [IDr,] AUTH,
       CP(CFG_REQUEST), SAi2,
       TSi, TSr}  --&gt;
                                &lt;--  HDR, SK {IDr, [CERT,] AUTH,
                                         CP(CFG_REPLY), SAr2,
                                         TSi, TSr}
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In all cases, the CP payload MUST be inserted before the SA payload. In variations of the protocol where there are multiple IKE_AUTH exchanges, the CP payloads MUST be inserted in the messages containing the SA payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべての場合において、CPペイロードはSAペイロードの前に挿入する必要があります。複数のIKE_AUTH交換があるプロトコルのバリエーションでは、CPペイロードをSAペイロードを含むメッセージに挿入する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CP(CFG_REQUEST) MUST contain at least an INTERNAL_ADDRESS attribute (either IPv4 or IPv6) but MAY contain any number of additional attributes the initiator wants returned in the response.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CP（CFG_REQUEST）には、少なくともinternal_Address属性（IPv4またはIPv6のいずれか）が含まれている必要がありますが、イニシエーターが応答で返される任意の数の追加属性を含めることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For example, message from initiator to responder:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
たとえば、イニシエーターからレスポンダーへのメッセージ：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REQUEST)=
     INTERNAL_ADDRESS()
   TSi = (0, 0-65535,0.0.0.0-255.255.255.255)
   TSr = (0, 0-65535,0.0.0.0-255.255.255.255)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NOTE: Traffic Selectors contain (protocol, port range, address range).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
注：トラフィックセレクターには（プロトコル、ポート範囲、アドレス範囲）が含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Message from responder to initiator:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
レスポンダーからイニシエーターへのメッセージ：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REPLY)=
     INTERNAL_ADDRESS(192.0.2.202)
     INTERNAL_NETMASK(255.255.255.0)
     INTERNAL_SUBNET(192.0.2.0/255.255.255.0)
   TSi = (0, 0-65535,192.0.2.202-192.0.2.202)
   TSr = (0, 0-65535,192.0.2.0-192.0.2.255)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All returned values will be implementation dependent. As can be seen in the above example, the IRAS MAY also send other attributes that were not included in CP(CFG_REQUEST) and MAY ignore the non-mandatory attributes that it does not support.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべての返された値は、実装に依存します。上記の例で見られるように、IRAはCP（CFG_REQUEST）に含まれていない他の属性を送信し、サポートしていない非依存属性を無視する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder MUST NOT send a CFG_REPLY without having first received a CP(CFG_REQUEST) from the initiator, because we do not want the IRAS to perform an unnecessary configuration lookup if the IRAC cannot process the REPLY.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderは、IRACが返信を処理できない場合、IRAが不要な構成検索を実行することを望まないため、最初にイニシエーターからCP（CFG_REQUEST）を受け取ったことなくCFG_REPLYを送信してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the case where the IRAS&#39;s configuration requires that CP be used for a given identity IDi, but IRAC has failed to send a CP(CFG_REQUEST), IRAS MUST fail the request, and terminate the Child SA creation with a FAILED_CP_REQUIRED error. The FAILED_CP_REQUIRED is not fatal to the IKE SA; it simply causes the Child SA creation to fail. The initiator can fix this by later starting a new Configuration payload request. There is no associated data in the FAILED_CP_REQUIRED error.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IRASの構成では、特定のIDIにCPを使用する必要がありますが、IRACはCP（CFG_REQUEST）の送信に失敗した場合、IRAはリクエストに失敗し、失敗した_CP_requiredエラーで子SAの作成を終了する必要があります。failed_cp_requiredは、IKE SAにとって致命的ではありません。それは単に子SAの創造物を失敗させるだけです。イニシエーターは、後で新しい構成ペイロード要求を起動することでこれを修正できます。故障した_cp_requiredエラーに関連するデータはありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-20--Requesting-the-Peers-Version">
2.20. Requesting the Peer&#39;s Version
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.20. ピアバージョンをリクエストします
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE peer wishing to inquire about the other peer&#39;s IKE software version information MAY use the method below. This is an example of a configuration request within an INFORMATIONAL exchange, after the IKE SA and first Child SA have been created.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
他のピアのIKEソフトウェアバージョン情報について問い合わせたいIKEピアは、以下の方法を使用する場合があります。これは、IKE SAと最初の子SAが作成された後の情報交換内の構成要求の例です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An IKE implementation MAY decline to give out version information prior to authentication or even after authentication in case some implementation is known to have some security weakness. In that case, it MUST either return an empty string or no CP payload if CP is not supported.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEの実装は、認証の前にバージョン情報を提供することが拒否される可能性があります。その場合、CPがサポートされていない場合、空の文字列を返すか、CPペイロードを返さない必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Initiator                         Responder
   -------------------------------------------------------------------
   HDR, SK{CP(CFG_REQUEST)}  --&gt;
                                &lt;--  HDR, SK{CP(CFG_REPLY)}
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CP(CFG_REQUEST)= APPLICATION_VERSION(&#34;&#34;)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
cp（cfg_request）= application_version（ &#34;&#34;）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CP(CFG_REPLY) APPLICATION_VERSION(&#34;foobar v1.3beta, (c) Foo Bar Inc.&#34;)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CP（CFG_REPLY）Application_version（ &#34;Foobar v1.3beta、（c）foo bar Inc.&#34;）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-21--Error-Handling">
2.21. Error Handling
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.21. エラー処理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are many kinds of errors that can occur during IKE processing. The general rule is that if a request is received that is badly formatted, or unacceptable for reasons of policy (such as no matching cryptographic algorithms), the response contains a Notify payload indicating the error. The decision whether or not to send such a response depends whether or not there is an authenticated IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE処理中に発生する可能性のある多くの種類のエラーがあります。一般的なルールは、ポリシーの理由（暗号化アルゴリズムが一致しないなど）にひどくフォーマットされている、または容認できない要求を受信した場合、応答にはエラーを示す通知ペイロードが含まれているということです。そのような応答を送信するかどうかの決定は、認証されたIKE SAがあるかどうかによって異なります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If there is an error parsing or processing a response packet, the general rule is to not send back any error message because responses should not generate new requests (and a new request would be the only way to send back an error message). Such errors in parsing or processing response packets should still cause the recipient to clean up the IKE state (for example, by sending a Delete for a bad SA).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
応答パケットの解析または処理がエラーが発生した場合、一般的なルールは、応答が新しいリクエストを生成してはならないため、エラーメッセージを送信しないことです（新しいリクエストがエラーメッセージを送信する唯一の方法です）。このようなエラー解析または処理応答パケットは、受信者にIKE状態をクリーンアップする必要があります（たとえば、悪いSAの削除を送信することにより）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Only authentication failures (AUTHENTICATION_FAILED and EAP failure) and malformed messages (INVALID_SYNTAX) lead to a deletion of the IKE SA without requiring an explicit INFORMATIONAL exchange carrying a Delete payload. Other error conditions MAY require such an exchange if policy dictates that this is needed. If the exchange is terminated with EAP Failure, an AUTHENTICATION_FAILED notification is not sent.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
認証障害（Authentication_FailedおよびEAP障害）と奇形のメッセージ（Invalid_Syntax）のみが、削除ペイロードを運ぶ明示的な情報交換を必要とせずにIKE SAの削除につながります。ポリシーがこれが必要であることを指示する場合、他のエラー条件がそのような交換が必要になる場合があります。EAP障害で交換が終了した場合、Authentication_Failed通知は送信されません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-21-1--Error-Handling-in-IKESAINIT">
2.21.1. Error Handling in IKE_SA_INIT
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.21.1. ike_sa_initでのエラー処理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Errors that occur before a cryptographically protected IKE SA is established need to be handled very carefully. There is a trade-off between wanting to help the peer to diagnose a problem and thus responding to the error and wanting to avoid being part of a DoS attack based on forged messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
暗号化されたIKE SAが確立される前に発生するエラーは、非常に慎重に処理する必要があります。ピアが問題を診断するのを助けたいと思うことと、エラーに応答することと、偽造メッセージに基づいたDOS攻撃の一部であることを避けたいと思うこととの間にはトレードオフがあります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In an IKE_SA_INIT exchange, any error notification causes the exchange to fail. Note that some error notifications such as COOKIE, INVALID_KE_PAYLOAD or INVALID_MAJOR_VERSION may lead to a subsequent successful exchange. Because all error notifications are completely unauthenticated, the recipient should continue trying for some time before giving up. The recipient should not immediately act based on the error notification unless corrective actions are defined in this specification, such as for COOKIE, INVALID_KE_PAYLOAD, and INVALID_MAJOR_VERSION.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_SA_INIT Exchangeでは、エラー通知が発生すると交換が失敗します。Cookie、Invalid_ke_Payload、またはInvalid_major_versionなどのいくつかのエラー通知が、その後の交換の成功につながる可能性があることに注意してください。すべてのエラー通知は完全に認識されていないため、受信者はあきらめる前にしばらく試み続ける必要があります。Cookie、Invalid_ke_Payload、Invalid_major_versionなど、この仕様で修正アクションが定義されていない限り、受信者はすぐにエラー通知に基づいて動作しないでください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-21-2--Error-Handling-in-IKEAUTH">
2.21.2. Error Handling in IKE_AUTH
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.21.2. IKE_AUTHでのエラー処理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All errors that occur in an IKE_AUTH exchange, causing the authentication to fail for whatever reason (invalid shared secret, invalid ID, untrusted certificate issuer, revoked or expired certificate, etc.) SHOULD result in an AUTHENTICATION_FAILED notification. If the error occurred on the responder, the notification is returned in the protected response, and is usually the only payload in that response. Although the IKE_AUTH messages are encrypted and integrity protected, if the peer receiving this notification has not authenticated the other end yet, that peer needs to treat the information with caution.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_Auth Exchangeで発生するすべてのエラーが発生し、何らかの理由で認証が失敗します（無効な秘密、無効なID、信頼されていない証明書発行者、取り消された証明書または期限切れの証明書など）。レスポンダーでエラーが発生した場合、通知は保護された応答で返され、通常はその応答の唯一のペイロードです。IKE_AUTHメッセージは暗号化され、整合性が保護されていますが、この通知を受け取ったピアがまだ反対側を認証していない場合、そのピアは情報を注意して扱う必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the error occurs on the initiator, the notification MAY be returned in a separate INFORMATIONAL exchange, usually with no other payloads. This is an exception for the general rule of not starting new exchanges based on errors in responses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターでエラーが発生した場合、通知は、通常、他のペイロードがない場合に別の情報交換で返される場合があります。これは、応答のエラーに基づいて新しい交換を開始しないという一般的なルールの例外です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note, however, that request messages that contain an unsupported critical payload, or where the whole message is malformed (rather than just bad payload contents), MUST be rejected in their entirety, and MUST only lead to an UNSUPPORTED_CRITICAL_PAYLOAD or INVALID_SYNTAX Notification sent as a response. The receiver should not verify the payloads related to authentication in this case.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ただし、サポートされていない重要なペイロードを含む要求メッセージ、またはメッセージ全体が不正されている場合（単なるペイロードコンテンツではなく）要求するメッセージは、完全に拒否され、unsupported_critical_payloadまたはinvalid_syntax通知につながる必要があります。応答。この場合、受信者は認証に関連するペイロードを確認してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If authentication has succeeded in the IKE_AUTH exchange, the IKE SA is established; however, establishing the Child SA or requesting configuration information may still fail. This failure does not automatically cause the IKE SA to be deleted. Specifically, a responder may include all the payloads associated with authentication (IDr, CERT, and AUTH) while sending error notifications for the piggybacked exchanges (FAILED_CP_REQUIRED, NO_PROPOSAL_CHOSEN, and so on), and the initiator MUST NOT fail the authentication because of this. The initiator MAY, of course, for reasons of policy later delete such an IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_AUTH Exchangeで認証が成功した場合、IKE SAが確立されます。ただし、子SAを確立するか、構成情報を要求する場合でも失敗する可能性があります。この障害により、IKE SAが削除されることはありません。具体的には、レスポンダーには、ピギーバックされた交換（Failed_cp_required、no_proposal_chosenなど）のエラー通知を送信しながら、認証に関連付けられたすべてのペイロード（IDR、CERT、およびAUTH）を含めることができます。イニシエーターは、もちろん、ポリシーの理由から、後でそのようなIKE SAを削除する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In an IKE_AUTH exchange, or in the INFORMATIONAL exchange immediately following it (in case an error happened when processing a response to IKE_AUTH), the UNSUPPORTED_CRITICAL_PAYLOAD, INVALID_SYNTAX, and AUTHENTICATION_FAILED notifications are the only ones to cause the IKE SA to be deleted or not created, without a Delete payload. Extension documents may define new error notifications with these semantics, but MUST NOT use them unless the peer has been shown to understand them, such as by using the Vendor ID payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_AUTH交換、またはその直後の情報交換（IKE_AUTHへの応答の処理時にエラーが発生した場合）、UNSUPPORTED_CRITICAL_PAYLOAD、INVALID_SYNTAX、および認証_ファイル通知は、IKE SAをデレットまたは作成しないようにする唯一のものです。、削除ペイロードなし。拡張ドキュメントは、これらのセマンティクスで新しいエラー通知を定義する場合がありますが、ベンダーIDペイロードを使用するなど、ピアがそれらを理解することが示されていない限り、それらを使用してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-21-3--Error-Handling-after-IKE-SA-is-Authenticated">
2.21.3. Error Handling after IKE SA is Authenticated
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.21.3. Ike SA後のエラー処理は認証されています
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After the IKE SA is authenticated, all requests having errors MUST result in a response notifying about the error.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAが認証された後、エラーを持つすべての要求には、エラーについて通知する応答が必要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In normal situations, there should not be cases where a valid response from one peer results in an error situation in the other peer, so there should not be any reason for a peer to send error messages to the other end except as a response. Because sending such error messages as an INFORMATIONAL exchange might lead to further errors that could cause loops, such errors SHOULD NOT be sent. If errors are seen that indicate that the peers do not have the same state, it might be good to delete the IKE SA to clean up state and start over.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通常の状況では、あるピアからの有効な応答が他のピアでエラー状況をもたらす場合はない場合があるため、ピアが応答を除いて他の端にエラーメッセージを送信する理由はないはずです。情報交換などのこのようなエラーメッセージを送信すると、ループを引き起こす可能性のあるさらなるエラーが発生する可能性があるため、そのようなエラーを送信しないでください。ピアが同じ状態を持っていないことを示すエラーが見られた場合、IKE SAを削除して状態をクリーンアップして最初からやり直すのが良いかもしれません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer parsing a request notices that it is badly formatted (after it has passed the message authentication code checks and window checks) and it returns an INVALID_SYNTAX notification, then this error notification is considered fatal in both peers, meaning that the IKE SA is deleted without needing an explicit Delete payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
リクエストのピア解析は、それがひどくフォーマットされていることを通知し（メッセージ認証コードのチェックとウィンドウチェックに合格した後）、Invalid_Syntax通知を返す場合、このエラー通知は両方のピアで致命的であると見なされます。つまり、IKE SAは明示的な削除ペイロードを必要とせずに削除しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-21-4--Error-Handling-Outside-IKE-SA">
2.21.4. Error Handling Outside IKE SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.21.4. Ike SAの外でのエラー処理
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node needs to limit the rate at which it will send messages in response to unprotected messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ノードは、保護されていないメッセージに応じてメッセージを送信するレートを制限する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a node receives a message on UDP port 500 or 4500 outside the context of an IKE SA known to it (and the message is not a request to start an IKE SA), this may be the result of a recent crash of the node. If the message is marked as a response, the node can audit the suspicious event but MUST NOT respond. If the message is marked as a request, the node can audit the suspicious event and MAY send a response. If a response is sent, the response MUST be sent to the IP address and port from where it came with the same IKE SPIs and the Message ID copied. The response MUST NOT be cryptographically protected and MUST contain an INVALID_IKE_SPI Notify payload. The INVALID_IKE_SPI notification indicates an IKE message was received with an unrecognized destination SPI; this usually indicates that the recipient has rebooted and forgotten the existence of an IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ノードがUDPポート500または4500で、それを知っているIKE SAのコンテキストの外でメッセージを受信した場合（およびメッセージはIKE SAを起動するリクエストではありません）、これはノードの最近のクラッシュの結果である可能性があります。メッセージが応答としてマークされている場合、ノードは疑わしいイベントを監査できますが、応答してはなりません。メッセージがリクエストとしてマークされている場合、ノードは不審なイベントを監査し、応答を送信できます。応答が送信された場合、応答はIPアドレスとポートに送信され、同じIKEスピスとメッセージIDがコピーしたメッセージを使用して送信する必要があります。応答は暗号化されていてはならず、無効な_ike_spiがペイロードを通知する必要があります。Invalid_ike_spi通知は、認識されていない宛先SPIでIKEメッセージが受信されたことを示しています。これは通常、受信者がIKE SAの存在を再起動し、忘れていることを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A peer receiving such an unprotected Notify payload MUST NOT respond and MUST NOT change the state of any existing SAs. The message might be a forgery or might be a response that a genuine correspondent was tricked into sending. A node should treat such a message (and also a network message like ICMP destination unreachable) as a hint that there might be problems with SAs to that IP address and should initiate a liveness check for any such IKE SA. An implementation SHOULD limit the frequency of such tests to avoid being tricked into participating in a DoS attack.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このような保護されていない通知ペイロードを受け取るピアは、応答してはならず、既存のSAの状態を変更してはなりません。メッセージは偽造であるか、本物の特派員がだまされて送信されたという応答かもしれません。ノードは、そのようなメッセージ（およびICMP宛先のようなネットワークメッセージを到達不可能にする）をそのIPアドレスにSASに問題がある可能性があり、そのようなIKE SAに対してライベンチェックを開始する必要があるというヒントとして扱う必要があります。実装では、DOS攻撃への参加がだまされないように、そのようなテストの頻度を制限する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If an error occurs outside the context of an IKE request (e.g., the node is getting ESP messages on a nonexistent SPI), the node SHOULD initiate an INFORMATIONAL exchange with a Notify payload describing the problem.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEリクエストのコンテキストの外でエラーが発生した場合（たとえば、ノードが存在しないSPIでESPメッセージを取得している場合）、ノードは問題を説明する通知ペイロードで情報交換を開始する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A node receiving a suspicious message from an IP address (and port, if NAT traversal is used) with which it has an IKE SA SHOULD send an IKE Notify payload in an IKE INFORMATIONAL exchange over that SA. The recipient MUST NOT change the state of any SAs as a result, but may wish to audit the event to aid in diagnosing malfunctions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAを持っているIPアドレス（およびNATトラバーサルが使用されている場合、ポート）から疑わしいメッセージを受信するノードは、IKE通知の情報交換でIKE通知をそのSAに送信する必要があります。受信者は、結果としてSASの状態を変更してはなりませんが、誤動作の診断を支援するためにイベントを監査したい場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-22--IPComp">
2.22. IPComp
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.22. IPComp
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Use of IP Compression [IP-COMP] can be negotiated as part of the setup of a Child SA. While IP Compression involves an extra header in each packet and a compression parameter index (CPI), the virtual &#34;compression association&#34; has no life outside the ESP or AH SA that contains it. Compression associations disappear when the corresponding ESP or AH SA goes away. It is not explicitly mentioned in any Delete payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IP圧縮[IP-Comp]の使用は、子SAのセットアップの一部としてネゴシエートできます。IP圧縮には、各パケットに追加のヘッダーと圧縮パラメーターインデックス（CPI）が含まれますが、仮想「圧縮関連」には、それを含むESPまたはAH SAの外側の寿命がありません。対応するESPまたはAH SAがなくなると、圧縮関連は消えます。削除ペイロードで明示的に言及されていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Negotiation of IP Compression is separate from the negotiation of cryptographic parameters associated with a Child SA. A node requesting a Child SA MAY advertise its support for one or more compression algorithms through one or more Notify payloads of type IPCOMP_SUPPORTED. This Notify message may be included only in a message containing an SA payload negotiating a Child SA and indicates a willingness by its sender to use IPComp on this SA. The response MAY indicate acceptance of a single compression algorithm with a Notify payload of type IPCOMP_SUPPORTED. These payloads MUST NOT occur in messages that do not contain SA payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IP圧縮の交渉は、子SAに関連する暗号化パラメーターの交渉とは別のものです。子SAを要求するノードは、1つ以上のIPComp_Supportedのペイロードを1つ以上通知することにより、1つ以上の圧縮アルゴリズムのサポートを宣伝する場合があります。この通知メッセージは、子SAを交渉するSAペイロードを含むメッセージにのみ含めることができ、送信者によるこのSAでIPCOMPを使用する意欲を示しています。応答は、タイプIPComp_Supportedの通知ペイロードを使用した単一の圧縮アルゴリズムの受け入れを示している場合があります。これらのペイロードは、SAペイロードを含まないメッセージで発生してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The data associated with this Notify message includes a two-octet IPComp CPI followed by a one-octet Transform ID optionally followed by attributes whose length and format are defined by that Transform ID. A message proposing an SA may contain multiple IPCOMP_SUPPORTED notifications to indicate multiple supported algorithms. A message accepting an SA may contain at most one.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このNotifyメッセージに関連付けられたデータには、2オクテットのIPCOMP CPIが含まれ、その後に1 OCTET変換IDが続き、その後に長さと形式がその変換IDで定義されている属性が含まれます。SAを提案するメッセージには、複数のサポートされているアルゴリズムを示す複数のIPComp_Supported通知が含まれる場合があります。SAを受け入れるメッセージには、せいぜい1つが含まれている場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Transform IDs are listed here. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換IDはここにリストされています。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name              Number   Defined In
   -------------------------------------
   IPCOMP_OUI        1
   IPCOMP_DEFLATE    2        RFC 2394
   IPCOMP_LZS        3        RFC 2395
   IPCOMP_LZJH       4        RFC 3051
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although there has been discussion of allowing multiple compression algorithms to be accepted and to have different compression algorithms available for the two directions of a Child SA, implementations of this specification MUST NOT accept an IPComp algorithm that was not proposed, MUST NOT accept more than one, and MUST NOT compress using an algorithm other than one proposed and accepted in the setup of the Child SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
複数の圧縮アルゴリズムを受け入れ、子SAの2つの方向に異なる圧縮アルゴリズムを使用できるようにすることについての議論がありましたが、この仕様の実装は、提案されていないIPCompアルゴリズムを受け入れてはなりません。、そして、子SAのセットアップで提案および受け入れられたアルゴリズム以外のアルゴリズムを使用して圧縮してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A side effect of separating the negotiation of IPComp from cryptographic parameters is that it is not possible to propose multiple cryptographic suites and propose IP Compression with some of them but not others.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPCOMPの交渉を暗号化パラメーターから分離する副作用は、複数の暗号化されたスイートを提案し、それらの一部とのIP圧縮を提案することはできないが、他のものではないということです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In some cases, Robust Header Compression (ROHC) may be more appropriate than IP Compression. [ROHCV2] defines the use of ROHC with IKEv2 and IPsec.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
場合によっては、堅牢なヘッダー圧縮（ROHC）がIP圧縮よりも適切かもしれません。[ROHCV2]は、IKEV2およびIPSECを使用したROHCの使用を定義します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-23--NAT-Traversal">
2.23. NAT Traversal
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.23. ナットトラバーサル
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Network Address Translation (NAT) gateways are a controversial subject. This section briefly describes what they are and how they are likely to act on IKE traffic. Many people believe that NATs are evil and that we should not design our protocols so as to make them work better. IKEv2 does specify some unintuitive processing rules in order that NATs are more likely to work.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ネットワークアドレス変換（NAT）ゲートウェイは、物議を醸す主題です。このセクションでは、それらが何であるか、そしてIKEトラフィックにどのように行動するかについて簡単に説明します。多くの人々は、NATが悪であり、プロトコルをより良くするためにプロトコルを設計すべきではないと信じています。IKEV2は、NATが機能する可能性が高いために、いくつかの直感的でない処理ルールを指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATs exist primarily because of the shortage of IPv4 addresses, though there are other rationales. IP nodes that are &#34;behind&#34; a NAT have IP addresses that are not globally unique, but rather are assigned from some space that is unique within the network behind the NAT but that are likely to be reused by nodes behind other NATs. Generally, nodes behind NATs can communicate with other nodes behind the same NAT and with nodes with globally unique addresses, but not with nodes behind other NATs. There are exceptions to that rule. When those nodes make connections to nodes on the real Internet, the NAT gateway &#34;translates&#34; the IP source address to an address that will be routed back to the gateway. Messages to the gateway from the Internet have their destination addresses &#34;translated&#34; to the internal address that will route the packet to the correct endnode.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATは、主にIPv4アドレスが不足しているために存在しますが、他の理論的根拠があります。NATの「背後」のIPノードには、グローバルに一意ではないIPアドレスがありますが、NATの背後にあるネットワーク内で一意のスペースから割り当てられますが、他のNATの背後にあるノードによって再利用される可能性があります。一般に、NATの背後にあるノードは、同じNATの背後にある他のノードと、グローバルに一意のアドレスを持つノードと通信できますが、他のNATの背後にあるノードでは通信できません。その規則には例外があります。これらのノードが実際のインターネット上でノードに接続すると、NATゲートウェイはIPソースアドレスを「ゲートウェイにルーティングされるアドレスに「変換」」します。インターネットからゲートウェイへのメッセージには、パケットを正しいエンドノードにルーティングする内部アドレスに宛先アドレスが「翻訳」されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATs are designed to be &#34;transparent&#34; to endnodes. Neither software on the node behind the NAT nor the node on the Internet requires modification to communicate through the NAT. Achieving this transparency is more difficult with some protocols than with others. Protocols that include IP addresses of the endpoints within the payloads of the packet will fail unless the NAT gateway understands the protocol and modifies the internal references as well as those in the headers. Such knowledge is inherently unreliable, is a network layer violation, and often results in subtle problems.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATは、エンドノードに対して「透明」になるように設計されています。NATの後ろのノード上のソフトウェアもインターネット上のノードも、NATを介して通信するための変更を必要としません。この透明性を達成することは、一部のプロトコルよりも一部のプロトコルよりも困難です。パケットのペイロード内のエンドポイントのIPアドレスを含むプロトコルは、NATゲートウェイがプロトコルを理解し、内部参照とヘッダーの参照を変更しない限り、失敗します。このような知識は本質的に信頼できず、ネットワークレイヤー違反であり、しばしば微妙な問題を引き起こします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Opening an IPsec connection through a NAT introduces special problems. If the connection runs in transport mode, changing the IP addresses on packets will cause the checksums to fail and the NAT cannot correct the checksums because they are cryptographically protected. Even in tunnel mode, there are routing problems because transparently translating the addresses of AH and ESP packets requires special logic in the NAT and that logic is heuristic and unreliable in nature. For that reason, IKEv2 will use UDP encapsulation of IKE and ESP packets. This encoding is slightly less efficient but is easier for NATs to process. In addition, firewalls may be configured to pass UDP-encapsulated IPsec traffic but not plain, unencapsulated ESP/AH or vice versa.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATを介してIPSEC接続を開くと、特別な問題が発生します。接続がトランスポートモードで実行される場合、パケット上のIPアドレスを変更するとチェックサムが失敗し、Cryptographicallyが保護されているため、NATがチェックサムを修正できません。トンネルモードでさえ、AHおよびESPパケットのアドレスを透過的に翻訳するにはNATの特別なロジックが必要であり、その論理はヒューリスティックで信頼できない本質的には不可能であるため、ルーティングの問題があります。そのため、IKEV2はIKEおよびESPパケットのUDPカプセル化を使用します。このエンコードはわずかに効率が低くなりますが、NATが処理する方が簡単です。さらに、ファイアウォールは、UDPにカプセル化されたIPSECトラフィックを渡すように構成されている可能性がありますが、単純ではなく、カプセル化されていないESP/AH、またはその逆も同様です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is a common practice of NATs to translate TCP and UDP port numbers as well as addresses and use the port numbers of inbound packets to decide which internal node should get a given packet. For this reason, even though IKE packets MUST be sent to and from UDP port 500 or 4500, they MUST be accepted coming from any port and responses MUST be sent to the port from whence they came. This is because the ports may be modified as the packets pass through NATs. Similarly, IP addresses of the IKE endpoints are generally not included in the IKE payloads because the payloads are cryptographically protected and could not be transparently modified by NATs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
TCPおよびUDPポート番号を翻訳することと、インバウンドパケットのポート番号をアドレスと使用して、どの内部ノードが特定のパケットを取得するかを決定することは、NATの一般的な慣行です。このため、IKEパケットはUDPポート500または4500に送信する必要がありますが、ポートから来ることを受け入れる必要があり、応答は来た場所からポートに送信する必要があります。これは、パケットがNATを通過するときにポートが変更される可能性があるためです。同様に、ペイロードが暗号化されており、NATによって透過的に変更できなかったため、IKEエンドポイントのIPアドレスは一般にIKEペイロードに含まれていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Port 4500 is reserved for UDP-encapsulated ESP and IKE. An IPsec endpoint that discovers a NAT between it and its correspondent (as described below) MUST send all subsequent traffic from port 4500, which NATs should not treat specially (as they might with port 500).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ポート4500は、UDPにカプセル化されたESPおよびIKE用に予約されています。ITとその特派員との間にNATを発見するIPSECエンドポイント（以下に説明するように）は、NATが特別に扱うべきではないポート4500からその後のすべてのトラフィックを送信する必要があります（ポート500で可能な場合）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An initiator can use port 4500 for both IKE and ESP, regardless of whether or not there is a NAT, even at the beginning of IKE. When either side is using port 4500, sending ESP with UDP encapsulation is not required, but understanding received UDP-encapsulated ESP packets is required. UDP encapsulation MUST NOT be done on port 500. If Network Address Translation Traversal (NAT-T) is supported (that is, if NAT_DETECTION_*_IP payloads were exchanged during IKE_SA_INIT), all devices MUST be able to receive and process both UDP-encapsulated ESP and non-UDP-encapsulated ESP packets at any time. Either side can decide whether or not to use UDP encapsulation for ESP irrespective of the choice made by the other side. However, if a NAT is detected, both devices MUST use UDP encapsulation for ESP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEの先頭であっても、NATがあるかどうかにかかわらず、イニシオンはIKEとESPの両方にポート4500を使用できます。どちらかの側がポート4500を使用している場合、UDPカプセル化でESPを送信することは必要ありませんが、受け取ったUDPにカプセル化されたESPパケットの理解が必要です。UDPのカプセル化はポート500で行う必要はありません。ネットワークアドレス変換トラバーサル（NAT-T）がサポートされている場合（つまり、NAT_DETECTION _*_ IPペイロードがIKE_SA_INIT中に交換された場合）、すべてのデバイスはUDPエンコース化の両方を受信および処理できる必要がありますESPおよび非UUDPカプセル化ESPパケットはいつでも。どちらの側も、反対側が作成した選択に関係なく、UDPカプセル化を使用するかどうかを決定できます。ただし、NATが検出された場合、両方のデバイスがESPにUDPカプセル化を使用する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The specific requirements for supporting NAT traversal [NATREQ] are listed below. Support for NAT traversal is optional. In this section only, requirements listed as MUST apply only to implementations supporting NAT traversal.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATトラバーサル[NatReq]をサポートするための特定の要件を以下に示します。NATトラバーサルのサポートはオプションです。このセクションでのみ、ASがリストされている要件は、NATトラバーサルをサポートする実装にのみ適用する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Both the IKE initiator and responder MUST include in their IKE_SA_INIT packets Notify payloads of type NAT_DETECTION_SOURCE_IP and NAT_DETECTION_DESTINATION_IP. Those payloads can be used to detect if there is NAT between the hosts, and which end is behind the NAT. The location of the payloads in the IKE_SA_INIT packets is just after the Ni and Nr payloads (before the optional CERTREQ payload).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IKEイニシエーターとレスポンダーの両方が、IKE_SA_INITパケットに、NAT_DETECTION_SOURCE_IPとNAT_DETECTION_DESTINATION_IPのペイロードに通知する必要があります。これらのペイロードは、ホスト間にNATがあるかどうかを検出するために使用でき、どの端がNATの背後にありますか。IKE_SA_INITパケットのペイロードの場所は、NIおよびNRペイロードの直後（オプションのCertreqペイロードの直前）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The data associated with the NAT_DETECTION_SOURCE_IP notification is a SHA-1 digest of the SPIs (in the order they appear in the header), IP address, and port from which this packet was sent. There MAY be multiple NAT_DETECTION_SOURCE_IP payloads in a message if the sender does not know which of several network attachments will be used to send the packet.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NAT_DETECTION_SOURCE_IP通知に関連付けられているデータは、SPISのSHA-1ダイジェスト（ヘッダーに表示される順序で）、IPアドレス、およびこのパケットが送信されたポートです。送信者がパケットを送信するためにいくつかのネットワーク添付ファイルのどれを使用するかを送信者が知らない場合、メッセージに複数のNAT_DETECTION_SOURCE_IPペイロードがある場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The data associated with the NAT_DETECTION_DESTINATION_IP notification is a SHA-1 digest of the SPIs (in the order they appear in the header), IP address, and port to which this packet was sent.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NAT_DETECTION_DESTINATION_IP通知に関連付けられているデータは、SPISのSHA-1ダイジェスト（ヘッダーに表示される順序で）、IPアドレス、およびこのパケットが送信されたポートです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The recipient of either the NAT_DETECTION_SOURCE_IP or NAT_DETECTION_DESTINATION_IP notification MAY compare the supplied value to a SHA-1 hash of the SPIs, source or recipient IP address (respectively), address, and port, and if they don&#39;t match, it SHOULD enable NAT traversal. In the case there is a mismatch of the NAT_DETECTION_SOURCE_IP hash with all of the NAT_DETECTION_SOURCE_IP payloads received, the recipient MAY reject the connection attempt if NAT traversal is not supported. In the case of a mismatching NAT_DETECTION_DESTINATION_IP hash, it means that the system receiving the NAT_DETECTION_DESTINATION_IP payload is behind a NAT and that system SHOULD start sending keepalive packets as defined in [UDPENCAPS]; alternately, it MAY reject the connection attempt if NAT traversal is not supported.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NAT_DETECTION_SOURCE_IPまたはNAT_DETECTION_DESTINATION_IP通知のいずれかの受信者は、供給値をSPIS、ソースまたは受信者IPアドレス、アドレス、およびポートのSHA-1ハッシュと比較できます。トラバーサル。この場合、NAT_DETECTION_SOURCE_IPハッシュの不一致があり、NAT_DETECTION_SOURCE_IP Payloadsをすべて受け取ったすべてのもので、NATトラバーサルがサポートされていない場合、受信者は接続の試みを拒否する場合があります。nat_detection_destination_ipハッシュの不一致の場合、それはnat_detection_destination_ipペイロードを受信するシステムがNATの背後にあることを意味し、[udpencaps]で定義されているようにシステムがキープライブパケットの送信を開始することを意味します。あるいは、NATトラバーサルがサポートされていない場合、接続の試みを拒否する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o If none of the NAT_DETECTION_SOURCE_IP payload(s) received matches the expected value of the source IP and port found from the IP header of the packet containing the payload, it means that the system sending those payloads is behind a NAT (i.e., someone along the route changed the source address of the original packet to match the address of the NAT box). In this case, the system receiving the payloads should allow dynamic updates of the other systems&#39; IP address, as described later.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NAT_DETECTION_SOURCE_IP Payload（s）が受信した場合、ペイロードを含むパケットのIPヘッダーから見つかったソースIPとポートの期待値と一致しない場合、それらのペイロードを送信するシステムがNATの背後にあることを意味します（すなわち、誰かが誰かに沿って誰かがルートは、NATボックスのアドレスに一致するように、元のパケットのソースアドレスを変更しました）。この場合、ペイロードを受信するシステムは、後で説明するように、他のシステムのIPアドレスの動的な更新を可能にする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The IKE initiator MUST check the NAT_DETECTION_SOURCE_IP or NAT_DETECTION_DESTINATION_IP payloads if present, and if they do not match the addresses in the outer packet, MUST tunnel all future IKE and ESP packets associated with this IKE SA over UDP port 4500.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IKEイニシエーターは、NAT_DETECTION_SOURCE_IPまたはNAT_DETECTION_DESTINATION_IPが存在する場合はPayloadsを確認する必要があります。外側のパケットのアドレスと一致しない場合は、UDPポート4500を超えるこのIKE SAに関連するすべての将来のIKEおよびESPパケットをトンネルする必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o To tunnel IKE packets over UDP port 4500, the IKE header has four octets of zero prepended and the result immediately follows the UDP header. To tunnel ESP packets over UDP port 4500, the ESP header immediately follows the UDP header. Since the first four octets of the ESP header contain the SPI, and the SPI cannot validly be zero, it is always possible to distinguish ESP and IKE messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o UDPポート4500にIKEパケットをトンネルするには、IKEヘッダーには4オクテットのゼロが準備され、結果はすぐにUDPヘッダーに続きます。UDPポート4500にESPパケットをトンネルするには、ESPヘッダーがすぐにUDPヘッダーを追跡します。ESPヘッダーの最初の4オクテットにはSPIが含まれており、SPIは有効にゼロになることができないため、ESPメッセージとIKEメッセージを常に区別することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Implementations MUST process received UDP-encapsulated ESP packets even when no NAT was detected.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 実装は、NATが検出されない場合でも、受信したUDPカプセル化ESPパケットを処理する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The original source and destination IP address required for the transport mode TCP and UDP packet checksum fixup (see [UDPENCAPS]) are obtained from the Traffic Selectors associated with the exchange. In the case of transport mode NAT traversal, the Traffic Selectors MUST contain exactly one IP address, which is then used as the original IP address. This is covered in greater detail in Section 2.23.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o トランスポートモードTCPおよびUDPパケットチェックサムの修正に必要な元のソースおよび宛先IPアドレス（[udpencapsを参照]を参照）は、交換に関連付けられたトラフィックセレクターから取得されます。輸送モードNATトラバーサルの場合、トラフィックセレクターには正確に1つのIPアドレスを含める必要があります。これは、元のIPアドレスとして使用されます。これについては、セクション2.23.1で詳しく説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o There are cases where a NAT box decides to remove mappings that are still alive (for example, the keepalive interval is too long, or the NAT box is rebooted). This will be apparent to a host if it receives a packet whose integrity protection validates, but has a different port, address, or both from the one that was associated with the SA in the validated packet. When such a validated packet is found, a host that does not support other methods of recovery such as IKEv2 Mobility and Multihoming (MOBIKE) [MOBIKE], and that is not behind a NAT, SHOULD send all packets (including retransmission packets) to the IP address and port in the validated packet, and SHOULD store this as the new address and port combination for the SA (that is, they SHOULD dynamically update the address). A host behind a NAT SHOULD NOT do this type of dynamic address update if a validated packet has different port and/or address values because it opens a possible DoS attack (such as allowing an attacker to break the connection with a single packet). Also, dynamic address update should only be done in response to a new packet; otherwise, an attacker can revert the addresses with old replayed packets. Because of this, dynamic updates can only be done safely if replay protection is enabled. When IKEv2 is used with MOBIKE, dynamically updating the addresses described above interferes with MOBIKE&#39;s way of recovering from the same situation. See Section 3.8 of [MOBIKE] for more information.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NATボックスがまだ生きているマッピングを削除することを決定する場合があります（たとえば、キープライブ間隔が長すぎるか、NATボックスが再起動されています）。これは、整合性保護が検証されているが、検証済みのパケットのSAに関連付けられたものとは異なるポート、アドレス、またはその両方があるパケットを受け取る場合、ホストには明らかになります。このような検証済みのパケットが見つかった場合、IKEV2モビリティやマルチホミング（Mobike）[Mobike]などの他の回復方法をサポートしていないホストは、NATの背後にない場合は、すべてのパケット（再送信パケットを含む）を送信する必要があります。検証済みのパケットのIPアドレスとポートは、これをSAの新しいアドレスとポートの組み合わせとして保存する必要があります（つまり、アドレスを動的に更新する必要があります）。NATの背後にあるホストは、検証済みのパケットに異なるポートおよび/またはアドレス値がある場合、このタイプの動的アドレス更新を実行しないでください。また、動的アドレスの更新は、新しいパケットに応じてのみ実行する必要があります。それ以外の場合、攻撃者は古いリプレイされたパケットでアドレスを元に戻すことができます。このため、再生保護が有効になっている場合にのみ、動的更新は安全に行うことができます。IKEV2がMobikeで使用される場合、上記のアドレスを動的に更新すると、Mobikeの同じ状況から回復する方法が妨げられます。詳細については、[Mobike]のセクション3.8を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-23-1--Transport-Mode-NAT-Traversal">
2.23.1. Transport Mode NAT Traversal
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.23.1. トランスポートモードNATトラバーサル
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Transport mode used with NAT Traversal requires special handling of the Traffic Selectors used in the IKEv2. The complete scenario looks like:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NATトラバーサルで使用される輸送モードには、IKEV2で使用されるトラフィックセレクターの特別な取り扱いが必要です。完全なシナリオは次のように見えます：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   +------+        +------+            +------+         +------+
   |Client| IP1    | NAT  | IPN1  IPN2 | NAT  |     IP2 |Server|
   |node  |&lt;------&gt;|  A   |&lt;----------&gt;|  B   |&lt;-------&gt;|      |
   +------+        +------+            +------+         +------+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
(Other scenarios are simplifications of this complex case, so this discussion uses the complete scenario.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
（他のシナリオは、この複雑なケースの単純化であるため、このディスカッションでは完全なシナリオを使用しています。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, there are two address translating NATs: NAT A and NAT B. NAT A is a dynamic NAT that maps the client&#39;s source address IP1 to IPN1. NAT B is a static NAT configured so that connections coming to IPN2 address are mapped to the gateway&#39;s address IP2, that is, IPN2 destination address is mapped to IP2. This allows the client to connect to a server by connecting to the IPN2. NAT B does not necessarily need to be a static NAT, but the client needs to know how to connect to the server, and it can only do that if it somehow knows the outer address of the NAT B, that is, the IPN2 address. If NAT B is a static NAT, then its address can be configured to the client&#39;s configuration. Another option would be to find it using some other protocol (like DNS), but that is outside of scope of IKEv2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、NATを翻訳する2つのアドレスがあります。NATAとNAT B. NAT Aは、クライアントのソースアドレスIP1をIPN1にマップする動的なNATです。NAT Bは、IPN2アドレスに登場する接続がGatewayのアドレスIP2にマッピングされるように構成された静的NAT構成です。つまり、IPN2宛先アドレスがIP2にマッピングされます。これにより、クライアントはIPN2に接続してサーバーに接続できます。NAT Bは必ずしも静的NATである必要はありませんが、クライアントはサーバーに接続する方法を知る必要があり、NAT Bの外側アドレス、つまりIPN2アドレスを何らかの形で知っている場合にのみそれを行うことができます。NAT Bが静的NATの場合、そのアドレスはクライアントの構成に設定できます。別のオプションは、他のプロトコル（DNSなど）を使用してそれを見つけることですが、それはIKEV2の範囲外です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this scenario, both the client and server are configured to use transport mode for the traffic originating from the client node and destined to the server.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このシナリオでは、クライアントとサーバーの両方が構成されており、クライアントノードから発信され、サーバーに運命づけられているトラフィックにトランスポートモードを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the client starts creating the IKEv2 SA and Child SA for sending traffic to the server, it may have a triggering packet with source IP address of IP1, and a destination IP address of IPN2. Its Peer Authorization Database (PAD) and SPD needs to have a configuration matching those addresses (or wildcard entries covering them).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
クライアントがサーバーにトラフィックを送信するためにIKEV2 SAおよびチャイルドSAの作成を開始すると、IP1のソースIPアドレスとIPN2の宛先IPアドレスを備えたトリガーパケットがある場合があります。ピア認証データベース（PAD）とSPDには、それらのアドレス（またはそれらをカバーするワイルドカードエントリ）に一致する構成が必要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Because this is transport mode, it uses exactly same addresses as the Traffic Selectors and outer IP address of the IKE packets. For transport mode, it MUST use exactly one IP address in the TSi and TSr payloads. It can have multiple Traffic Selectors if it has, for example, multiple port ranges that it wants to negotiate, but all TSi entries must use the IP1-IP1 range as the IP addresses, and all TSr entries must have the IPN2-IPN2 range as IP addresses. The first Traffic Selector of TSi and TSr SHOULD have very specific Traffic Selectors including protocol and port numbers, such as from the packet triggering the request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これはトランスポートモードであるため、IKEパケットのトラフィックセレクターと外側のIPアドレスとまったく同じアドレスを使用します。トランスポートモードの場合、TSIおよびTSRペイロードで正確に1つのIPアドレスを使用する必要があります。たとえば、交渉したい複数のポート範囲がある場合、複数のトラフィックセレクターを持つことができますが、すべてのTSIエントリはIP1-IP1範囲をIPアドレスとして使用する必要があり、すべてのTSRエントリはIPN2-IPN2の範囲を「IPアドレス。TSIとTSRの最初のトラフィックセレクターには、リクエストをトリガーするパケットからのような、プロトコルやポート番号など、非常に特定のトラフィックセレクターが必要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NAT A will then replace the source address of the IKE packet from IP1 to IPN1, and NAT B will replace the destination address of the IKE packet from IPN2 to IP2, so when the packet arrives to the server it will still have the exactly same Traffic Selectors that were sent by the client, but the IP address of the IKE packet has been replaced by IPN1 and IP2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NAT AはIP1からIP1へのIKEパケットのソースアドレスを置き換え、NAT BはIPN2からIPN2にIKEパケットの宛先アドレスを置き換えるため、パケットがサーバーに到着すると、まったく同じトラフィックがありますクライアントによって送信されたが、IKEパケットのIPアドレスはIPN1とIP2に置き換えられました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the server receives this packet, it normally looks in the Peer Authorization Database (PAD) described in RFC 4301 [IPSECARCH] based on the ID and then searches the SPD based on the Traffic Selectors. Because IP1 does not really mean anything to the server (it is the address client has behind the NAT), it is useless to do a lookup based on that if transport mode is used. On the other hand, the server cannot know whether transport mode is allowed by its policy before it finds the matching SPD entry.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
サーバーがこのパケットを受信すると、通常、IDに基づいてRFC 4301 [IPSECARCH]に記載されているピア認証データベース（PAD）を調べ、トラフィックセレクターに基づいてSPDを検索します。IP1は実際にはサーバーにとって何も意味しないため（クライアントがNATの背後にあるアドレスは）、輸送モードが使用されている場合にそれに基づいて検索を行うことは役に立たない。一方、サーバーは、一致するSPDエントリを見つける前に、ポリシーによってトランスポートモードが許可されているかどうかを知ることができません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In this case, the server should first check that the initiator requested transport mode, and then do address substitution on the Traffic Selectors. It needs to first store the old Traffic Selector IP addresses to be used later for the incremental checksum fixup (the IP address in the TSi can be stored as the original source address and the IP address in the TSr can be stored as the original destination address). After that, if the other end was detected as being behind a NAT, the server replaces the IP address in TSi payloads with the IP address obtained from the source address of the IKE packet received (that is, it replaces IP1 in TSi with IPN1). If the server&#39;s end was detected to be behind NAT, it replaces the IP address in the TSr payloads with the IP address obtained from the destination address of the IKE packet received (that is, it replaces IPN2 in TSr with IP2).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この場合、サーバーは最初にイニシエーターが輸送モードを要求したことを確認し、次にトラフィックセレクターの代替に対処する必要があります。最初に古いトラフィックセレクターIPアドレスを保存する必要があります。インクリメンタルチェックサムの修正には後で使用します（TSIのIPアドレスは元のソースアドレスとして保存でき、TSRのIPアドレスは元の宛先アドレスとして保存できます）。その後、もう一方の端がNATの背後にあると検出された場合、サーバーはTSIペイロードのIPアドレスを、受信したIKEパケットのソースアドレスから取得したIPアドレスに置き換えます（つまり、TSIのIP1をIPN1に置き換えます）。サーバーの端がNATの背後にあるように検出された場合、TSRペイロードのIPアドレスを、受信したIKEパケットの宛先アドレスから取得したIPアドレスに置き換えます（つまり、TSRのIPN2をIP2に置き換えます）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After this address substitution, both the Traffic Selectors and the IKE UDP source/destination addresses look the same, and the server does SPD lookup based on those new Traffic Selectors. If an entry is found and it allows transport mode, then that entry is used. If an entry is found but it does not allow transport mode, then the server MAY undo the address substitution and redo the SPD lookup using the original Traffic Selectors. If the second lookup succeeds, the server will create an SA in tunnel mode using real Traffic Selectors sent by the other end.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このアドレス代替の後、トラフィックセレクターとIKE UDPソース/宛先アドレスの両方が同じように見え、サーバーはそれらの新しいトラフィックセレクターに基づいてSPD検索を行います。エントリが見つかり、輸送モードが許可されている場合、そのエントリが使用されます。エントリが見つかったがトランスポートモードが許可されていない場合、サーバーはアドレス代替を元に戻し、元のトラフィックセレクターを使用してSPDルックアップをやり直すことができます。2回目のルックアップが成功した場合、サーバーは反対側から送信された実際のトラフィックセレクターを使用してトンネルモードでSAを作成します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This address substitution in transport mode is needed because the SPD is looked up using the addresses that will be seen by the local host. This also will make sure the Security Association Database (SAD) entries for the tunnel exit checks and return packets is added using the addresses as seen by the local operating system stack.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
輸送モードでのこのアドレス置換が必要です。なぜなら、SPDはローカルホストが見るアドレスを使用して検索されるためです。また、これにより、トンネル出口チェックと戻りパケットのセキュリティ協会データベース（SAD）エントリが、ローカルオペレーティングシステムスタックで見られるアドレスを使用して追加されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The most common case is that the server&#39;s SPD will contain wildcard entries matching any addresses, but this also allows making different SPD entries, for example, for different known NATs&#39; outer addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最も一般的なケースは、サーバーのSPDにはアドレスに一致するワイルドカードエントリが含まれていることですが、これにより、たとえば、異なる既知のNATの外側アドレスに対して、異なるSPDエントリを作成できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
After the SPD lookup, the server will do Traffic Selector narrowing based on the SPD entry it found. It will again use the already substituted Traffic Selectors, and it will thus send back Traffic Selectors having IPN1 and IP2 as their IP addresses; it can still narrow down the protocol number or port ranges used by the Traffic Selectors. The SAD entry created for the Child SA will have the addresses as seen by the server, namely IPN1 and IP2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SPDの検索後、サーバーは、見つけたSPDエントリに基づいてトラフィックセレクターを絞り込みます。再び置換されたトラフィックセレクターを再度使用するため、IPN1とIP2を持つトラフィックセレクターがIPアドレスとして送信されます。トラフィックセレクターが使用するプロトコル数またはポート範囲を絞り込むことができます。Child SAのために作成された悲しいエントリには、サーバーで見られるアドレス、つまりIPN1とIP2があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When the client receives the server&#39;s response to the Child SA, it will do similar processing. If the transport mode SA was created, the client can store the original returned Traffic Selectors as original source and destination addresses. It will replace the IP addresses in the Traffic Selectors with the ones from the IP header of the IKE packet: it will replace IPN1 with IP1 and IP2 with IPN2. Then, it will use those Traffic Selectors when verifying the SA against sent Traffic Selectors, and when installing the SAD entry.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
クライアントが子SAに対するサーバーの応答を受信すると、同様の処理が行われます。トランスポートモードSAが作成された場合、クライアントは元の返品されたトラフィックセレクターを元のソースおよび宛先アドレスとして保存できます。トラフィックセレクターのIPアドレスをIKEパケットのIPヘッダーからのIPアドレスに置き換えます。IPN1をIP1およびIP2にIPN2に置き換えます。次に、送信されたトラフィックセレクターに対してSAを検証するとき、およびSADエントリをインストールするときに、これらのトラフィックセレクターを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A summary of the rules for NAT traversal in transport mode is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
輸送モードでのNATトラバーサルの規則の概要は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For the client proposing transport mode:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
輸送モードを提案するクライアントの場合：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- The TSi entries MUST have exactly one IP address, and that MUST match the source address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- TSIエントリには正確に1つのIPアドレスが必要である必要があり、IKE SAのソースアドレスと一致する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- The TSr entries MUST have exactly one IP address, and that MUST match the destination address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- TSRエントリには正確に1つのIPアドレスが必要である必要があり、IKE SAの宛先アドレスと一致する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- The first TSi and TSr Traffic Selectors SHOULD have very specific Traffic Selectors including protocol and port numbers, such as from the packet triggering the request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- 最初のTSIおよびTSRトラフィックセレクターには、リクエストをトリガーするパケットからなど、プロトコルやポート番号を含む非常に特定のトラフィックセレクターが必要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- There MAY be multiple TSi and TSr entries.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- 複数のTSIおよびTSRエントリがある場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- If transport mode for the SA was selected (that is, if the server included USE_TRANSPORT_MODE notification in its response):
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- SAのトランスポートモードが選択された場合（つまり、サーバーにその応答にuse_transport_mode通知が含まれている場合）：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- Store the original Traffic Selectors as the received source and destination address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- 元のトラフィックセレクターを受信したソースおよび宛先アドレスとして保存します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- If the server is behind a NAT, substitute the IP address in the TSr entries with the remote address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- サーバーがNATの背後にある場合は、TSRエントリのIPアドレスをIKE SAのリモートアドレスに置き換えます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- If the client is behind a NAT, substitute the IP address in the TSi entries with the local address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- クライアントがNATの背後にいる場合は、TSIエントリのIPアドレスをIKE SAのローカルアドレスに置き換えます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- Do address substitution before using those Traffic Selectors for anything other than storing original content of them. This includes verification that Traffic Selectors were narrowed correctly by the other end, creation of the SAD entry, and so on.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-5">
- それらのオリジナルコンテンツを保存する以外に、これらのトラフィックセレクターを使用する前に、代替に対処してください。これには、トラフィックセレクターがもう一方の端によって正しく狭くなっていること、悲しいエントリの作成などの検証が含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For the responder, when transport mode is proposed by client:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
応答者の場合、輸送モードがクライアントによって提案されている場合：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- Store the original Traffic Selector IP addresses as received source and destination address, in case undo address substitution is needed, to use as the &#34;real source and destination address&#34; specified by [UDPENCAPS], and for TCP/UDP checksum fixup.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- 元のトラフィックセレクターIPアドレスを受信したソースおよび宛先アドレスとして保存し、[UDPENCAPS]で指定された「実際のソースおよび宛先アドレス」として使用するために、アドレスの代替が必要な場合に備えて、TCP/UDPチェックサムの修正に使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- If the client is behind a NAT, substitute the IP address in the TSi entries with the remote address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- クライアントがNATの背後にいる場合は、TSIエントリのIPアドレスをIKE SAのリモートアドレスに置き換えます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- If the server is behind a NAT, substitute the IP address in the TSr entries with the local address of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- サーバーがNATの背後にある場合は、TSRエントリのIPアドレスをIKE SAのローカルアドレスに置き換えます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- Do PAD and SPD lookup using the ID and substituted Traffic Selectors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- IDと置換されたトラフィックセレクターを使用して、PADおよびSPDルックアップを実行します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- If no SPD entry was found, or if found SPD entry does not allow transport mode, undo the Traffic Selector substitutions. Do PAD and SPD lookup again using the ID and original Traffic Selectors, but also searching for tunnel mode SPD entry (that is, fall back to tunnel mode).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- SPDエントリが見つからなかった場合、またはSPDエントリが輸送モードを許可していない場合は、トラフィックセレクターの置換を元に戻します。IDと元のトラフィックセレクターを使用してPADとSPDの検索を再度実行しますが、トンネルモードSPDエントリ（つまり、トンネルモードに戻る）も検索します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- However, if a transport mode SPD entry was found, do normal traffic selection narrowing based on the substituted Traffic Selectors and SPD entry. Use the resulting Traffic Selectors when creating SAD entries, and when sending Traffic Selectors back to the client.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
- ただし、トランスポートモードSPDエントリが見つかった場合は、置換されたトラフィックセレクターとSPDエントリに基づいて、通常のトラフィックセレクションを絞り込みます。悲しいエントリを作成するとき、およびトラフィックセレクターをクライアントに送信するときに、結果のトラフィックセレクターを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-24--Explicit-Congestion-Notification-ECN">
2.24. Explicit Congestion Notification (ECN)
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.24. 明示的な混雑通知（ECN）
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When IPsec tunnels behave as originally specified in [IPSECARCH-OLD], ECN usage is not appropriate for the outer IP headers because tunnel decapsulation processing discards ECN congestion indications to the detriment of the network. ECN support for IPsec tunnels for IKEv1- based IPsec requires multiple operating modes and negotiation (see [ECN]). IKEv2 simplifies this situation by requiring that ECN be usable in the outer IP headers of all tunnel mode Child SAs created by IKEv2. Specifically, tunnel encapsulators and decapsulators for all tunnel mode SAs created by IKEv2 MUST support the ECN full-functionality option for tunnels specified in [ECN] and MUST implement the tunnel encapsulation and decapsulation processing specified in [IPSECARCH] to prevent discarding of ECN congestion indications.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Ipsecarch-Old]で最初に指定されたIpsecトンネルが動作する場合、Tunnel Decapsulation Processingがネットワークの不利益の誤りの表示を破棄するため、ECNの使用は外側のIPヘッダーには適していません。IKEV1ベースのIPSECのIPSECトンネルのECNサポートには、複数の動作モードと交渉が必要です（[ECN]を参照）。IKEV2は、IKEV2によって作成されたすべてのトンネルモードチャイルドSASの外側IPヘッダーでECNを使用できることを要求することにより、この状況を簡素化します。具体的には、IKEV2によって作成されたすべてのトンネルモードSASのトンネルカプセル因子とデカプセーターは、[ECN]で指定されたトンネルのECNフル機能性オプションをサポートする必要があり、[IPSECARCH]で指定されたトンネルのカプセル化と脱カプセル化処理を実装して、ECN混雑の示唆の廃棄を防ぐ必要があります。。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-25--Exchange-Collisions">
2.25. Exchange Collisions
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.25. 交換衝突
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Because IKEv2 exchanges can be initiated by either peer, it is possible that two exchanges affecting the same SA partly overlap. This can lead to a situation where the SA state information is temporarily not synchronized, and a peer can receive a request that it cannot process in a normal fashion.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2交換はどちらのピアによっても開始できるため、同じSAに部分的に重複する2つの交換が可能です。これは、SA状態情報が一時的に同期されず、ピアが通常の方法で処理できないというリクエストを受け取ることができる状況につながる可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Obviously, using a window size greater than 1 leads to more complex situations, especially if requests are processed out of order. This section concentrates on problems that can arise even with a window size of 1, and recommends solutions.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
明らかに、1を超えるウィンドウサイズを使用すると、特にリクエストが順調に処理されている場合、より複雑な状況につながります。このセクションでは、ウィンドウサイズが1の場合でも発生する可能性のある問題に集中し、ソリューションを推奨しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A TEMPORARY_FAILURE notification SHOULD be sent when a peer receives a request that cannot be completed due to a temporary condition such as a rekeying operation. When a peer receives a TEMPORARY_FAILURE notification, it MUST NOT immediately retry the operation; it MUST wait so that the sender may complete whatever operation caused the temporary condition. The recipient MAY retry the request one or more times over a period of several minutes. If a peer continues to receive TEMPORARY_FAILURE on the same IKE SA after several minutes, it SHOULD conclude that the state information is out of sync and close the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一時的な_failure通知は、ピアが再キーイング操作などの一時的な条件のために完了できないリクエストを受け取ったときに送信する必要があります。ピアが一時的な_failure通知を受け取った場合、すぐに操作を再試行してはなりません。送信者が一時的な状態を引き起こした操作を完了することができるように待つ必要があります。受信者は、数分間にわたって1回以上リクエストを再試行する場合があります。ピアが数分後に同じIKE SAで一時的な_Failureを引き続き受け取っている場合、州の情報が同期していないと結論付けて、IKE SAを閉じます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A CHILD_SA_NOT_FOUND notification SHOULD be sent when a peer receives a request to rekey a Child SA that does not exist. The SA that the initiator attempted to rekey is indicated by the SPI field in the Notify payload, which is copied from the SPI field in the REKEY_SA notification. A peer that receives a CHILD_SA_NOT_FOUND notification SHOULD silently delete the Child SA (if it still exists) and send a request to create a new Child SA from scratch (if the Child SA does not yet exist).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
child_sa_not_found通知は、ピアが存在しない子SAを再キーするリクエストを受け取ったときに送信する必要があります。イニシエーターが再キーにしようとしたSAは、NotifyペイロードのSPIフィールドによって示されます。これは、REKEY_SA通知のSPIフィールドからコピーされます。child_sa_not_found通知を受け取ったピアは、子SAを静かに削除し（まだ存在する場合）、ゼロから新しい子SAを作成するようにリクエストを送信する必要があります（子SAがまだ存在しない場合）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-25-1--Collisions-while-Rekeying-or-Closing-Child-SAs">
2.25.1. Collisions while Rekeying or Closing Child SAs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.25.1. 子どものSAを再キーまたは閉じながら衝突
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to rekey a Child SA that it is currently trying to close, it SHOULD reply with TEMPORARY_FAILURE. If a peer receives a request to rekey a Child SA that it is currently rekeying, it SHOULD reply as usual, and SHOULD prepare to close redundant SAs later based on the nonces (see Section 2.8.1). If a peer receives a request to rekey a Child SA that does not exist, it SHOULD reply with CHILD_SA_NOT_FOUND.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアが現在閉鎖しようとしている子供SAを再キーにするという要求を受け取った場合、Companial_Failureで返信する必要があります。ピアが現在再キーリングしている子供SAを再キーにするという要求を受け取った場合、それは通常どおりに返信する必要があり、後でノンセスに基づいて冗長なSAを閉じる準備をする必要があります（セクション2.8.1を参照）。ピアが存在しない子SAを再キーするリクエストを受け取った場合、child_sa_not_foundで返信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to close a Child SA that it is currently trying to close, it SHOULD reply without a Delete payload (see Section 1.4.1). If a peer receives a request to close a Child SA that it is currently rekeying, it SHOULD reply as usual, with a Delete payload. If a peer receives a request to close a Child SA that does not exist, it SHOULD reply without a Delete payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアが現在閉じようとしている子SAを閉じるという要求を受け取った場合、削除ペイロードなしで返信する必要があります（セクション1.4.1を参照）。ピアが現在再キーリングしている子供saを閉じるという要求を受け取った場合、削除ペイロードでいつものように返信する必要があります。ピアが存在しない子供SAを閉じるというリクエストを受け取った場合、削除ペイロードなしで返信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to rekey the IKE SA, and it is currently creating, rekeying, or closing a Child SA of that IKE SA, it SHOULD reply with TEMPORARY_FAILURE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアがIKE SAを再キーするリクエストを受け取り、現在そのIKE SAの子SAを作成、再キーリング、または閉鎖している場合、Companial_Failureで返信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="2-25-2--Collisions-while-Rekeying-or-Closing-IKE-SAs">
2.25.2. Collisions while Rekeying or Closing IKE SAs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
2.25.2. Ike sasを再キーまたは閉じながら衝突
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to rekey an IKE SA that it is currently rekeying, it SHOULD reply as usual, and SHOULD prepare to close redundant SAs and move inherited Child SAs later based on the nonces (see Section 2.8.2). If a peer receives a request to rekey an IKE SA that it is currently trying to close, it SHOULD reply with TEMPORARY_FAILURE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアが現在再キーリングしているというIKE SAを再キーするリクエストを受け取った場合、通常どおり返信し、冗長なSASを閉じて、後で非筋に基づいて継承された子SASを移動する準備をする必要があります（セクション2.8.2を参照）。ピアが現在閉鎖しようとしているIKE SAを再キーするリクエストを受け取った場合、Companial_Failureで返信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to close an IKE SA that it is currently rekeying, it SHOULD reply as usual, and forget about its own rekeying request. If a peer receives a request to close an IKE SA that it is currently trying to close, it SHOULD reply as usual, and forget about its own close request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアが現在再キーリングしているというIKE SAを閉じるための要求を受け取った場合、それはいつものように返信し、独自の再キーイングリクエストを忘れてください。ピアが現在閉鎖しようとしているIKE SAを閉鎖するリクエストを受け取った場合、それはいつものように返信し、独自の緊密なリクエストを忘れてください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If a peer receives a request to create or rekey a Child SA when it is currently rekeying the IKE SA, it SHOULD reply with TEMPORARY_FAILURE. If a peer receives a request to delete a Child SA when it is currently rekeying the IKE SA, it SHOULD reply as usual, with a Delete payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ピアが現在IKE SAを再キーキングしているときに子供SAを作成または再キーするというリクエストを受け取った場合、Companial_Failureで返信する必要があります。ピアが現在IKE SAを再キーニングしているときに子供SAを削除するリクエストを受け取った場合、削除ペイロードで通常どおり返信する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3--Header-and-Payload-Formats">
3. Header and Payload Formats
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3. ヘッダーとペイロード形式
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the tables in this section, some cryptographic primitives and configuration attributes are marked as &#34;UNSPECIFIED&#34;. These are items for which there are no known specifications and therefore interoperability is currently impossible. A future specification may describe their use, but until such specification is made, implementations SHOULD NOT attempt to use items marked as &#34;UNSPECIFIED&#34; in implementations that are meant to be interoperable.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このセクションの表では、いくつかの暗号化プリミティブと構成属性が「不特定」としてマークされています。これらは、既知の仕様がない項目であり、したがって相互運用性は現在不可能です。将来の仕様では、それらの使用を説明する場合がありますが、そのような仕様が作成されるまで、実装は相互運用可能なものである実装で「不特定」としてマークされたアイテムを使用しようとするべきではありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-1--The-IKE-Header">
3.1. The IKE Header
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.1. IKEヘッダー
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE messages use UDP ports 500 and/or 4500, with one IKE message per UDP datagram. Information from the beginning of the packet through the UDP header is largely ignored except that the IP addresses and UDP ports from the headers are reversed and used for return packets. When sent on UDP port 500, IKE messages begin immediately following the UDP header. When sent on UDP port 4500, IKE messages have prepended four octets of zero. These four octets of zeros are not part of the IKE message and are not included in any of the length fields or checksums defined by IKE. Each IKE message begins with the IKE header, denoted HDR in this document. Following the header are one or more IKE payloads each identified by a &#34;Next Payload&#34; field in the preceding payload. Payloads are identified in the order in which they appear in an IKE message by looking in the &#34;Next Payload&#34; field in the IKE header, and subsequently according to the &#34;Next Payload&#34; field in the IKE payload itself until a &#34;Next Payload&#34; field of zero indicates that no payloads follow. If a payload of type &#34;Encrypted&#34; is found, that payload is decrypted and its contents parsed as additional payloads. An Encrypted payload MUST be the last payload in a packet and an Encrypted payload MUST NOT contain another Encrypted payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEメッセージは、UDPポート500および/または4500を使用し、UDPデータグラムごとに1つのIKEメッセージを使用します。UDPヘッダーを介したパケットの先頭からの情報は、ヘッダーからのIPアドレスとUDPポートが逆になり、返品パケットに使用されることを除いて、ほとんど無視されます。UDPポート500で送信されると、IKEメッセージはUDPヘッダーの直後に開始されます。UDPポート4500で送信されると、IKEメッセージは4オクテットのゼロを準備しました。ゼロのこれらの4オクテットは、IKEメッセージの一部ではなく、IKEによって定義された長さフィールドまたはチェックサムのいずれにも含まれていません。各IKEメッセージは、このドキュメントでHDRを示したIKEヘッダーから始まります。ヘッダーに続くのは、前のペイロードの「次のペイロード」フィールドで識別される1つ以上のIKEペイロードです。ペイロードは、IKEヘッダーの「次のペイロード」フィールドを見ることにより、IKEメッセージに表示される順序で識別され、その後、IKEペイロードの「次のペイロード」フィールドまで「次のペイロード」フィールドに従って識別されます。ゼロは、ペイロードが続いていないことを示します。「暗号化された」タイプのペイロードが見つかった場合、そのペイロードは復号化され、その内容は追加のペイロードとして解析されます。暗号化されたペイロードは、パケット内の最後のペイロードである必要があり、暗号化されたペイロードには別の暗号化されたペイロードが含まれてはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The responder&#39;s SPI in the header identifies an instance of an IKE Security Association. It is therefore possible for a single instance of IKE to multiplex distinct sessions with multiple peers, including multiple sessions per peer.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ヘッダー内のレスポンダーのSPIは、IKEセキュリティ協会のインスタンスを識別します。したがって、IKEの単一のインスタンスでは、ピアごとの複数のセッションを含む複数のピアとの別個のセッションを多重化することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All multi-octet fields representing integers are laid out in big endian order (also known as &#34;most significant byte first&#34;, or &#34;network byte order&#34;).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
整数を表すすべてのマルチオクテットフィールドは、ビッグエンディアンオーダー（「最も重要なバイト」または「ネットワークバイト順」とも呼ばれます）でレイアウトされています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The format of the IKE header is shown in Figure 4.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEヘッダーの形式を図4に示します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       IKE SA Initiator&#39;s SPI                  |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       IKE SA Responder&#39;s SPI                  |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Next Payload | MjVer | MnVer | Exchange Type |     Flags     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Message ID                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            Length                             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
Figure 4: IKE Header Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-20">
図4：IKEヘッダー形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Initiator&#39;s SPI (8 octets) - A value chosen by the initiator to identify a unique IKE Security Association. This value MUST NOT be zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o イニシエーターのSPI（8オクテット） - ユニークなIKEセキュリティ協会を特定するためにイニシエーターによって選択された値。この値はゼロであってはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Responder&#39;s SPI (8 octets) - A value chosen by the responder to identify a unique IKE Security Association. This value MUST be zero in the first message of an IKE initial exchange (including repeats of that message including a cookie).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Responder&#39;s SPI（8オクテット） - 一意のIKEセキュリティ協会を特定するために、レスポンダーによって選択された値。この値は、IKE初期交換の最初のメッセージ（Cookieを含むそのメッセージの繰り返しを含む）でゼロでなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Next Payload (1 octet) - Indicates the type of payload that immediately follows the header. The format and value of each payload are defined below.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 次のペイロード（1オクテット） - ヘッダーの直後のペイロードのタイプを示します。各ペイロードの形式と値を以下に定義します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Major Version (4 bits) - Indicates the major version of the IKE protocol in use. Implementations based on this version of IKE MUST set the major version to 2. Implementations based on previous versions of IKE and ISAKMP MUST set the major version to 1. Implementations based on this version of IKE MUST reject or ignore messages containing a version number greater than 2 with an INVALID_MAJOR_VERSION notification message as described in Section 2.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o メジャーバージョン（4ビット） - 使用中のIKEプロトコルのメジャーバージョンを示します。IKEのこのバージョンに基づく実装は、メジャーバージョンを2に設定する必要があります。IKEおよびISAKMPの以前のバージョンに基づく実装は、メジャーバージョンを1に設定する必要があります。2セクション2.5で説明されているように、Invalid_major_version通知メッセージ付き。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Minor Version (4 bits) - Indicates the minor version of the IKE protocol in use. Implementations based on this version of IKE MUST set the minor version to 0. They MUST ignore the minor version number of received messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o マイナーバージョン（4ビット） - 使用中のIKEプロトコルのマイナーバージョンを示します。IKEのこのバージョンに基づく実装は、マイナーバージョンを0に設定する必要があります。受信メッセージのマイナーバージョン数を無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Exchange Type (1 octet) - Indicates the type of exchange being used. This constrains the payloads sent in each message in an exchange. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Exchange Type（1 Octet） - 使用されている交換のタイプを示します。これにより、交換中に各メッセージに送信されるペイロードが制約されます。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Exchange Type             Value
      ----------------------------------
      IKE_SA_INIT               34
      IKE_AUTH                  35
      CREATE_CHILD_SA           36
      INFORMATIONAL             37
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Flags (1 octet) - Indicates specific options that are set for the message. Presence of options is indicated by the appropriate bit in the flags field being set. The bits are as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o フラグ（1オクテット） - メッセージ用に設定された特定のオプションを示します。オプションの存在は、設定されているフラグフィールドの適切なビットによって示されます。ビットは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
        +-+-+-+-+-+-+-+-+
        |X|X|R|V|I|X|X|X|
        +-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In the description below, a bit being &#39;set&#39; means its value is &#39;1&#39;, while &#39;cleared&#39; means its value is &#39;0&#39;. &#39;X&#39; bits MUST be cleared when sending and MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下の説明では、少し「セット」であることはその値が「1」であることを意味し、「クリア」はその値が「0」であることを意味します。「x」ビットは送信中にクリアする必要があり、受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* R (Response) - This bit indicates that this message is a response to a message containing the same Message ID. This bit MUST be cleared in all request messages and MUST be set in all responses. An IKE endpoint MUST NOT generate a response to a message that is marked as being a response (with one exception; see Section 2.21.2).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* r（応答） - このビットは、このメッセージが同じメッセージIDを含むメッセージへの応答であることを示しています。このビットは、すべての要求メッセージでクリアされる必要があり、すべての応答で設定する必要があります。IKEエンドポイントは、応答としてマークされたメッセージに対する応答を生成してはなりません（1つの例外を除き、セクション2.21.2を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* V (Version) - This bit indicates that the transmitter is capable of speaking a higher major version number of the protocol than the one indicated in the major version number field. Implementations of IKEv2 MUST clear this bit when sending and MUST ignore it in incoming messages.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* V（バージョン） - このビットは、送信機がメジャーバージョン番号フィールドに示されているプロトコルよりも高いメジャーバージョン数のプロトコルを話すことができることを示しています。IKEV2の実装は、送信時にこのビットをクリアする必要があり、着信メッセージでそれを無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* I (Initiator) - This bit MUST be set in messages sent by the original initiator of the IKE SA and MUST be cleared in messages sent by the original responder. It is used by the recipient to determine which eight octets of the SPI were generated by the recipient. This bit changes to reflect who initiated the last rekey of the IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* i（initiator） - このビットは、IKE SAの元のイニシエーターによって送信されたメッセージに設定され、元のレスポンダーから送信されたメッセージでクリアされる必要があります。受信者は、受信者によって生成されたSPIの8オクテットを決定するために使用されます。このビットは、Ike SAの最後の再キーを誰が開始したかを反映するために変更されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Message ID (4 octets, unsigned integer) - Message identifier used to control retransmission of lost packets and matching of requests and responses. It is essential to the security of the protocol because it is used to prevent message replay attacks. See Sections 2.1 and 2.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o メッセージID（4オクテット、符号なし整数） - 失われたパケットの再送信とリクエストと応答のマッチングを制御するために使用されるメッセージ識別子。プロトコルは、メッセージのリプレイ攻撃を防ぐために使用されるため、プロトコルのセキュリティに不可欠です。セクション2.1および2.2を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Length (4 octets, unsigned integer) - Length of the total message (header + payloads) in octets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 長さ（4オクテット、符号なし整数） - オクテットの合計メッセージ（ヘッダーペイロード）の長さ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-2--Generic-Payload-Header">
3.2. Generic Payload Header
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.2. 一般的なペイロードヘッダー
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each IKE payload defined in Sections 3.3 through 3.16 begins with a generic payload header, shown in Figure 5. Figures for each payload below will include the generic payload header, but for brevity, the description of each field will be omitted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セクション3.3から3.16で定義されている各IKEペイロードは、図5に示す一般的なペイロードヘッダーで始まります。以下の各ペイロードの図には、汎用ペイロードヘッダーが含まれますが、簡潔にするために、各フィールドの説明は省略されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
Figure 5: Generic Payload Header
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-22">
図5：一般的なペイロードヘッダー
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Generic Payload Header fields are defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一般的なペイロードヘッダーフィールドは、次のように定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Next Payload (1 octet) - Identifier for the payload type of the next payload in the message. If the current payload is the last in the message, then this field will be 0. This field provides a &#34;chaining&#34; capability whereby additional payloads can be added to a message by appending each one to the end of the message and setting the &#34;Next Payload&#34; field of the preceding payload to indicate the new payload&#39;s type. An Encrypted payload, which must always be the last payload of a message, is an exception. It contains data structures in the format of additional payloads. In the header of an Encrypted payload, the Next Payload field is set to the payload type of the first contained payload (instead of 0); conversely, the Next Payload field of the last contained payload is set to zero). The payload type values are listed here. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 次のペイロード（1オクテット） - メッセージ内の次のペイロードのペイロードタイプの識別子。現在のペイロードがメッセージの最後である場合、このフィールドは0になります。このフィールドは、メッセージの最後にそれぞれを追加して「次の」を設定することにより、メッセージに追加のペイロードを追加できる「チェーン」機能を提供します。ペイロード「前のペイロードのフィールド」は、新しいペイロードのタイプを示します。常にメッセージの最後のペイロードでなければならない暗号化されたペイロードは、例外です。追加のペイロードの形式のデータ構造が含まれています。暗号化されたペイロードのヘッダーでは、次のペイロードフィールドは、最初のコンテッドペイロードのペイロードタイプ（0ではなく）に設定されます。逆に、最後に含まれるペイロードの次のペイロードフィールドはゼロに設定されています）。ペイロードタイプの値はここにリストされています。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Next Payload Type                Notation  Value
      --------------------------------------------------
      No Next Payload                             0
      Security Association             SA         33
      Key Exchange                     KE         34
      Identification - Initiator       IDi        35
      Identification - Responder       IDr        36
      Certificate                      CERT       37
      Certificate Request              CERTREQ    38
      Authentication                   AUTH       39
      Nonce                            Ni, Nr     40
      Notify                           N          41
      Delete                           D          42
      Vendor ID                        V          43
      Traffic Selector - Initiator     TSi        44
      Traffic Selector - Responder     TSr        45
      Encrypted and Authenticated      SK         46
      Configuration                    CP         47
      Extensible Authentication        EAP        48
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
(Payload type values 1-32 should not be assigned in the future so that there is no overlap with the code assignments for IKEv1.)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
（ペイロードタイプ値1-32は、IKEV1のコード割り当てと重複しないように、将来割り当てられないでください。）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Critical (1 bit) - MUST be set to zero if the sender wants the recipient to skip this payload if it does not understand the payload type code in the Next Payload field of the previous payload. MUST be set to one if the sender wants the recipient to reject this entire message if it does not understand the payload type. MUST be ignored by the recipient if the recipient understands the payload type code. MUST be set to zero for payload types defined in this document. Note that the critical bit applies to the current payload rather than the &#34;next&#34; payload whose type code appears in the first octet. The reasoning behind not setting the critical bit for payloads defined in this document is that all implementations MUST understand all payload types defined in this document and therefore must ignore the critical bit&#39;s value. Skipped payloads are expected to have valid Next Payload and Payload Length fields. See Section 2.5 for more information on this bit.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o クリティカル（1ビット） - 送信者が、前のペイロードの次のペイロードフィールドでペイロードタイプコードを理解していない場合、送信者が受信者にこのペイロードをスキップすることを望んでいる場合は、ゼロに設定する必要があります。送信者がペイロードタイプを理解していない場合、受信者にこのメッセージ全体を拒否することを望んでいる場合は、1に設定する必要があります。受信者がペイロードタイプコードを理解している場合、受信者は無視する必要があります。このドキュメントで定義されているペイロードタイプの場合、ゼロに設定する必要があります。クリティカルビットは、タイプコードが最初のオクテットに表示される「次の」ペイロードではなく、現在のペイロードに適用されることに注意してください。このドキュメントで定義されているペイロードの重要なビットを設定しない背後にある理由は、すべての実装がこのドキュメントで定義されているすべてのペイロードタイプを理解する必要があるため、クリティカルビットの値を無視する必要があることです。スキップされたペイロードには、次のペイロード長とペイロードの長さフィールドが有効であると予想されます。このビットの詳細については、セクション2.5を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED (7 bits) - MUST be sent as zero; MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約済み（7ビット） - ゼロとして送信する必要があります。受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Payload Length (2 octets, unsigned integer) - Length in octets of the current payload, including the generic payload header.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ペイロード長（2オクテット、署名されていない整数） - 汎用ペイロードヘッダーを含む現在のペイロードのオクテットの長さ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Many payloads contain fields marked as &#34;RESERVED&#34;. Some payloads in IKEv2 (and historically in IKEv1) are not aligned to 4-octet boundaries.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
多くのペイロードには、「予約済み」とマークされたフィールドが含まれています。IKEV2（および歴史的にはIKEV1の）の一部のペイロードは、4オクテットの境界に整列されていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3--Security-Association-Payload">
3.3. Security Association Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3. セキュリティ協会のペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Security Association payload, denoted SA in this document, is used to negotiate attributes of a Security Association. Assembly of Security Association payloads requires great peace of mind. An SA payload MAY contain multiple proposals. If there is more than one, they MUST be ordered from most preferred to least preferred. Each proposal contains a single IPsec protocol (where a protocol is IKE, ESP, or AH), each protocol MAY contain multiple transforms, and each transform MAY contain multiple attributes. When parsing an SA, an implementation MUST check that the total Payload Length is consistent with the payload&#39;s internal lengths and counts. Proposals, Transforms, and Attributes each have their own variable-length encodings. They are nested such that the Payload Length of an SA includes the combined contents of the SA, Proposal, Transform, and Attribute information. The length of a Proposal includes the lengths of all Transforms and Attributes it contains. The length of a Transform includes the lengths of all Attributes it contains.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでSAと表示されたセキュリティ協会のペイロードは、セキュリティ協会の属性をネゴシエートするために使用されます。セキュリティ協会のペイロードの集会には、大きな安心が必要です。SAペイロードには複数の提案が含まれる場合があります。複数の場合は、最小の好みから最も好まれたものから注文する必要があります。各提案には、単一のIPSECプロトコル（プロトコルがIKE、ESP、またはAH）が含まれ、各プロトコルには複数の変換が含まれ、各変換には複数の属性が含まれる場合があります。SAを解析する場合、実装は、ペイロードの総長さがペイロードの内部長とカウントと一致していることを確認する必要があります。提案、変換、および属性には、それぞれ独自の長さのエンコーディングがあります。SAのペイロード長に、SAのコンテンツ、提案、変換、および属性情報が含まれるようにネストされています。提案の長さには、含まれるすべての変換と属性の長さが含まれます。変換の長さには、含まれるすべての属性の長さが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The syntax of Security Associations, Proposals, Transforms, and Attributes is based on ISAKMP; however, the semantics are somewhat different. The reason for the complexity and the hierarchy is to allow for multiple possible combinations of algorithms to be encoded in a single SA. Sometimes there is a choice of multiple algorithms, whereas other times there is a combination of algorithms. For example, an initiator might want to propose using ESP with either (3DES and HMAC_MD5) or (AES and HMAC_SHA1).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セキュリティ関連、提案、変換、および属性の構文は、ISAKMPに基づいています。ただし、セマンティクスは多少異なります。複雑さと階層の理由は、単一のSAでアルゴリズムの複数の可能な組み合わせを可能にすることです。複数のアルゴリズムの選択がある場合もあれば、アルゴリズムの組み合わせがある場合もあります。たとえば、イニシエーターは、（3DESおよびHMAC_MD5）または（AESおよびHMAC_SHA1）のいずれかでESPを使用することを提案する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
One of the reasons the semantics of the SA payload have changed from ISAKMP and IKEv1 is to make the encodings more compact in common cases.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAペイロードのセマンティクスがISAKMPとIKEV1から変更された理由の1つは、共通の場合にエンコーディングをよりコンパクトにすることです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Proposal structure contains within it a Proposal Num and an IPsec protocol ID. Each structure MUST have a proposal number one (1) greater than the previous structure. The first Proposal in the initiator&#39;s SA payload MUST have a Proposal Num of one (1). One reason to use multiple proposals is to propose both standard crypto ciphers and combined-mode ciphers. Combined-mode ciphers include both integrity and encryption in a single encryption algorithm, and MUST either offer no integrity algorithm or a single integrity algorithm of &#34;none&#34;, with no integrity algorithm being the RECOMMENDED method. If an initiator wants to propose both combined-mode ciphers and normal ciphers, it must include two proposals: one will have all the combined-mode ciphers, and the other will have all the normal ciphers with the integrity algorithms. For example, one such proposal would have two proposal structures. Proposal 1 is ESP with AES-128, AES-192, and AES-256 bits in Cipher Block Chaining (CBC) mode, with either HMAC-SHA1-96 or XCBC-96 as the integrity algorithm; Proposal 2 is AES-128 or AES-256 in GCM mode with an 8-octet Integrity Check Value (ICV). Both proposals allow but do not require the use of ESNs (Extended Sequence Numbers). This can be illustrated as:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
提案構造には、その中に提案番号とIPSECプロトコルIDが含まれています。各構造には、以前の構造よりも大きい提案ナンバーワン（1）が必要です。イニシエーターのSAペイロードにおける最初の提案には、1つの提案数が必要です（1）。複数の提案を使用する理由の1つは、標準の暗号暗号と複合モード暗号の両方を提案することです。複合モード暗号には、単一の暗号化アルゴリズムの整合性と暗号化の両方が含まれており、「NONE」の完全性アルゴリズムまたは単一の整合性アルゴリズムを提供しない必要があります。イニシエーターが複合モード暗号と通常の暗号の両方を提案したい場合、2つの提案を含める必要があります。1つはすべての複合モード暗号を持ち、もう1つは整合性アルゴリズムを持つすべての通常の暗号を持っています。たとえば、そのような提案には2つの提案構造があります。提案1は、AES-128、AES-192、および暗号ブロックチェーン（CBC）モードのAES-256ビットを備えたESPで、HMAC-SHA1-96またはXCBC-96が整合性アルゴリズムです。提案2は、8-OCTETの整合性チェック値（ICV）を備えたGCMモードのAES-128またはAES-256です。どちらの提案も許可されていますが、ESNの使用を必要としません（拡張シーケンス番号）。これは次のように説明できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   SA Payload
      |
      +--- Proposal #1 ( Proto ID = ESP(3), SPI size = 4,
      |     |            7 transforms,      SPI = 0x052357bb )
      |     |
      |     +-- Transform ENCR ( Name = ENCR_AES_CBC )
      |     |     +-- Attribute ( Key Length = 128 )
      |     |
      |     +-- Transform ENCR ( Name = ENCR_AES_CBC )
      |     |     +-- Attribute ( Key Length = 192 )
      |     |
      |     +-- Transform ENCR ( Name = ENCR_AES_CBC )
      |     |     +-- Attribute ( Key Length = 256 )
      |     |
      |     +-- Transform INTEG ( Name = AUTH_HMAC_SHA1_96 )
      |     +-- Transform INTEG ( Name = AUTH_AES_XCBC_96 )
      |     +-- Transform ESN ( Name = ESNs )
      |     +-- Transform ESN ( Name = No ESNs )
      |
      +--- Proposal #2 ( Proto ID = ESP(3), SPI size = 4,
            |            4 transforms,      SPI = 0x35a1d6f2 )
            |
            +-- Transform ENCR ( Name = AES-GCM with a 8 octet ICV )
            |     +-- Attribute ( Key Length = 128 )
            |
            +-- Transform ENCR ( Name = AES-GCM with a 8 octet ICV )
            |     +-- Attribute ( Key Length = 256 )
            |
            +-- Transform ESN ( Name = ESNs )
            +-- Transform ESN ( Name = No ESNs )
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each Proposal/Protocol structure is followed by one or more transform structures. The number of different transforms is generally determined by the Protocol. AH generally has two transforms: Extended Sequence Numbers (ESNs) and an integrity check algorithm. ESP generally has three: ESN, an encryption algorithm, and an integrity check algorithm. IKE generally has four transforms: a Diffie-Hellman group, an integrity check algorithm, a PRF algorithm, and an encryption algorithm. For each Protocol, the set of permissible transforms is assigned Transform ID numbers, which appear in the header of each transform.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
各提案/プロトコル構造の後に、1つ以上の変換構造が続きます。異なる変換の数は、一般にプロトコルによって決定されます。AHには通常、拡張シーケンス番号（ESN）と整合性チェックアルゴリズムの2つの変換があります。ESPには、一般に3つのESN、暗号化アルゴリズム、および整合性チェックアルゴリズムがあります。IKEには一般に、Diffie-Hellmanグループ、整合性チェックアルゴリズム、PRFアルゴリズム、暗号化アルゴリズムの4つの変換があります。各プロトコルについて、許容変換のセットには、各変換のヘッダーに表示される変換ID番号が割り当てられます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If there are multiple transforms with the same Transform Type, the proposal is an OR of those transforms. If there are multiple transforms with different Transform Types, the proposal is an AND of the different groups. For example, to propose ESP with (3DES or AES-CBC) and (HMAC_MD5 or HMAC_SHA), the ESP proposal would contain two Transform Type 1 candidates (one for 3DES and one for AEC-CBC) and two Transform Type 3 candidates (one for HMAC_MD5 and one for HMAC_SHA). This effectively proposes four combinations of algorithms. If the initiator wanted to propose only a subset of those, for example (3DES and HMAC_MD5) or (IDEA and HMAC_SHA), there is no way to encode that as multiple transforms within a single Proposal. Instead, the initiator would have to construct two different Proposals, each with two transforms.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
同じ変換タイプを持つ複数の変換がある場合、提案はそれらの変換のものです。異なる変換タイプを持つ複数の変換がある場合、提案は異なるグループのものです。たとえば、（3DESまたはAES-CBC）および（HMAC_MD5またはHMAC_SHA）を使用してESPを提案するには、ESP提案には2つの変換タイプ1候補（3DESの1つとAEC-CBC用）と2つの変換タイプ3候補（1つ）が含まれます。hmac_md5の場合は、1つはhmac_shaの場合）。これは、アルゴリズムの4つの組み合わせを効果的に提案します。イニシエーターがそれらのサブセットのみを提案したい場合、たとえば（3DESおよびHMAC_MD5）または（IDEAとhmac_sha）を提案したい場合、単一の提案内で複数の変換としてそれをエンコードする方法はありません。代わりに、イニシエーターは2つの異なる提案を作成する必要があり、それぞれ2つの変換があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A given transform MAY have one or more Attributes. Attributes are necessary when the transform can be used in more than one way, as when an encryption algorithm has a variable key size. The transform would specify the algorithm and the attribute would specify the key size. Most transforms do not have attributes. A transform MUST NOT have multiple attributes of the same type. To propose alternate values for an attribute (for example, multiple key sizes for the AES encryption algorithm), an implementation MUST include multiple transforms with the same Transform Type each with a single Attribute.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
特定の変換には、1つ以上の属性がある場合があります。暗号化アルゴリズムのキーサイズが可変の場合、変換を複数の方法で使用できる場合は属性が必要です。変換はアルゴリズムを指定し、属性はキーサイズを指定します。ほとんどの変換には属性がありません。変換には、同じタイプの複数の属性が必要です。属性（たとえば、AES暗号化アルゴリズムの複数のキーサイズ）の代替値を提案するには、実装には、それぞれが単一の属性を持つ同じ変換タイプの複数の変換を含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that the semantics of Transforms and Attributes are quite different from those in IKEv1. In IKEv1, a single Transform carried multiple algorithms for a protocol with one carried in the Transform and the others carried in the Attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換と属性のセマンティクスは、IKEV1のセマンティクスとはまったく異なることに注意してください。IKEV1では、単一の変換がプロトコルに複数のアルゴリズムを運び、1つが変換に持ち込まれ、他は属性に携帯されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                          &lt;Proposals&gt;                          ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 6: Security Association Payload
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図6：セキュリティ協会のペイロード
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Proposals (variable) - One or more proposal substructures.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 提案（変数） -  1つ以上の提案の下部構造。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Security Association payload is thirty-three (33).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セキュリティ協会のペイロードのペイロードタイプは33（33）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-1--Proposal-Substructure">
3.3.1. Proposal Substructure
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.1. 提案の下部構造
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | 0 (last) or 2 |   RESERVED    |         Proposal Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Proposal Num  |  Protocol ID  |    SPI Size   |Num  Transforms|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                        SPI (variable)                         ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                        &lt;Transforms&gt;                           ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 7: Proposal Substructure
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図7：提案の下部構造
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 0 (last) or 2 (more) (1 octet) - Specifies whether this is the last Proposal Substructure in the SA. This syntax is inherited from ISAKMP, but is unnecessary because the last Proposal could be identified from the length of the SA. The value (2) corresponds to a payload type of Proposal in IKEv1, and the first four octets of the Proposal structure are designed to look somewhat like the header of a payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 0（最後）または2（その他）（1オクテット） - これがSAの最後の提案の下部構造であるかどうかを指定します。この構文はISAKMPから継承されますが、最後の提案がSAの長さから識別できるため不要です。値（2）は、IKEV1の提案のペイロードタイプに対応しており、提案構造の最初の4オクテットは、ペイロードのヘッダーのように見えるように設計されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED (1 octet) - MUST be sent as zero; MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約済み（1オクテット） - ゼロとして送信する必要があります。受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Proposal Length (2 octets, unsigned integer) - Length of this proposal, including all transforms and attributes that follow.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 提案の長さ（2オクテット、署名されていない整数） - この提案の長さ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Proposal Num (1 octet) - When a proposal is made, the first proposal in an SA payload MUST be 1, and subsequent proposals MUST be one more than the previous proposal (indicating an OR of the two proposals). When a proposal is accepted, the proposal number in the SA payload MUST match the number on the proposal sent that was accepted.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 提案num（1 octet） - 提案が行われる場合、SAペイロードの最初の提案は1でなければならず、その後の提案は以前の提案（2つの提案または2つの提案を示す）よりも1つでなければなりません。提案が受け入れられた場合、SAペイロードの提案番号は、受け入れられた提案の数値と一致する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Protocol ID (1 octet) - Specifies the IPsec protocol identifier for the current negotiation. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o プロトコルID（1 Octet） - 現在の交渉のIPSECプロトコル識別子を指定します。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Protocol                Protocol ID
      -----------------------------------
      IKE                     1
      AH                      2
      ESP                     3
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI Size (1 octet) - For an initial IKE SA negotiation, this field MUST be zero; the SPI is obtained from the outer header. During subsequent negotiations, it is equal to the size, in octets, of the SPI of the corresponding protocol (8 for IKE, 4 for ESP and AH).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPIサイズ（1オクテット） - 最初のIKE SA交渉の場合、このフィールドはゼロでなければなりません。SPIは外側のヘッダーから取得されます。その後の交渉中、それは対応するプロトコルのSPIのサイズ、オクテットのサイズに等しくなります（IKEで8、ESPおよびAHの場合4）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Num Transforms (1 octet) - Specifies the number of transforms in this proposal.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o num transforms（1 octet） - この提案で変換の数を指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI (variable) - The sending entity&#39;s SPI. Even if the SPI Size is not a multiple of 4 octets, there is no padding applied to the payload. When the SPI Size field is zero, this field is not present in the Security Association payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI（変数） - 送信エンティティのSPI。SPIサイズが4オクテットの倍数でなくても、ペイロードに適用されるパディングはありません。SPIサイズのフィールドがゼロの場合、このフィールドはセキュリティ協会のペイロードに存在しません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Transforms (variable) - One or more transform substructures.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 変換（変数） -  1つ以上の変換基板。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-2--Transform-Substructure">
3.3.2. Transform Substructure
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.2. 下部構造を変換します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | 0 (last) or 3 |   RESERVED    |        Transform Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Transform Type |   RESERVED    |          Transform ID         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                      Transform Attributes                     ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 8: Transform Substructure
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図8：下部構造を変換します
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 0 (last) or 3 (more) (1 octet) - Specifies whether this is the last Transform Substructure in the Proposal. This syntax is inherited from ISAKMP, but is unnecessary because the last transform could be identified from the length of the proposal. The value (3) corresponds to a payload type of Transform in IKEv1, and the first four octets of the Transform structure are designed to look somewhat like the header of a payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 0（最後）または3（その他）（1 Octet） - これが提案の最後の変換基底であるかどうかを指定します。この構文はISAKMPから継承されますが、最後の変換が提案の長さから識別できるため、不要です。値（3）は、IKEV1のペイロードタイプの変換に対応し、変換構造の最初の4オクテットはペイロードのヘッダーのように見えるように設計されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED - MUST be sent as zero; MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約 - ゼロとして送信する必要があります。受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Transform Length - The length (in octets) of the Transform Substructure including Header and Attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 変換長 - ヘッダーと属性を含む変換基盤の長さ（オクテット）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Transform Type (1 octet) - The type of transform being specified in this transform. Different protocols support different Transform Types. For some protocols, some of the transforms may be optional. If a transform is optional and the initiator wishes to propose that the transform be omitted, no transform of the given type is included in the proposal. If the initiator wishes to make use of the transform optional to the responder, it includes a transform substructure with Transform ID = 0 as one of the options.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 変換タイプ（1オクテット） - この変換で指定されている変換のタイプ。異なるプロトコルは、異なる変換タイプをサポートしています。一部のプロトコルでは、いくつかの変換がオプションである場合があります。変換がオプションであり、イニシエーターが変換を省略することを提案したい場合、指定されたタイプの変換は提案に含まれていません。イニシエーターがレスポンダーにオプションの変換を使用したい場合、オプションの1つとして変換ID = 0を備えた変換サブ構造が含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Transform ID (2 octets) - The specific instance of the Transform Type being proposed.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 変換ID（2オクテット） - 提案されている変換タイプの特定のインスタンス。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Transform Type values are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換タイプの値は以下にリストされています。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Description                     Trans.  Used In
                                   Type
   ------------------------------------------------------------------
   Encryption Algorithm (ENCR)     1       IKE and ESP
   Pseudorandom Function (PRF)     2       IKE
   Integrity Algorithm (INTEG)     3       IKE*, AH, optional in ESP
   Diffie-Hellman group (D-H)      4       IKE, optional in AH &amp; ESP
   Extended Sequence Numbers (ESN) 5       AH and ESP
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
(*) Negotiating an integrity algorithm is mandatory for the Encrypted payload format specified in this document. For example, [AEAD] specifies additional formats based on authenticated encryption, in which a separate integrity algorithm is not negotiated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
（*）このドキュメントで指定された暗号化されたペイロード形式には、整合性アルゴリズムのネゴシエートが必須です。たとえば、[AEAD]は、認証された暗号化に基づいて追加の形式を指定します。この形式では、個別の整合性アルゴリズムがネゴシエートされません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For Transform Type 1 (Encryption Algorithm), the Transform IDs are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換タイプ1（暗号化アルゴリズム）の場合、変換IDを以下に示します。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name                 Number      Defined In
   ---------------------------------------------------
   ENCR_DES_IV64        1           (UNSPECIFIED)
   ENCR_DES             2           (RFC2405), [DES]
   ENCR_3DES            3           (RFC2451)
   ENCR_RC5             4           (RFC2451)
   ENCR_IDEA            5           (RFC2451), [IDEA]
   ENCR_CAST            6           (RFC2451)
   ENCR_BLOWFISH        7           (RFC2451)
   ENCR_3IDEA           8           (UNSPECIFIED)
   ENCR_DES_IV32        9           (UNSPECIFIED)
   ENCR_NULL            11          (RFC2410)
   ENCR_AES_CBC         12          (RFC3602)
   ENCR_AES_CTR         13          (RFC3686)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For Transform Type 2 (Pseudorandom Function), the Transform IDs are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換タイプ2（擬似ランダム関数）の場合、変換IDを以下にリストします。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name                        Number    Defined In
   ------------------------------------------------------
   PRF_HMAC_MD5                1         (RFC2104), [MD5]
   PRF_HMAC_SHA1               2         (RFC2104), [SHA]
   PRF_HMAC_TIGER              3         (UNSPECIFIED)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For Transform Type 3 (Integrity Algorithm), defined Transform IDs are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
transform Type 3（Integrity Algorithm）の場合、定義された変換IDを以下にリストします。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name                 Number   Defined In
   ----------------------------------------
   NONE                 0
   AUTH_HMAC_MD5_96     1        (RFC2403)
   AUTH_HMAC_SHA1_96    2        (RFC2404)
   AUTH_DES_MAC         3        (UNSPECIFIED)
   AUTH_KPDK_MD5        4        (UNSPECIFIED)
   AUTH_AES_XCBC_96     5        (RFC3566)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For Transform Type 4 (Diffie-Hellman group), defined Transform IDs are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換タイプ4（diffie-hellmanグループ）の場合、定義された変換IDを以下にリストします。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name               Number     Defined In
   ----------------------------------------
   NONE               0
   768-bit MODP       1          Appendix B
   1024-bit MODP      2          Appendix B
   1536-bit MODP      5          [ADDGROUP]
   2048-bit MODP      14         [ADDGROUP]
   3072-bit MODP      15         [ADDGROUP]
   4096-bit MODP      16         [ADDGROUP]
   6144-bit MODP      17         [ADDGROUP]
   8192-bit MODP      18         [ADDGROUP]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although ESP and AH do not directly include a Diffie-Hellman exchange, a Diffie-Hellman group MAY be negotiated for the Child SA. This allows the peers to employ Diffie-Hellman in the CREATE_CHILD_SA exchange, providing perfect forward secrecy for the generated Child SA keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESPとAHにはDiffie-Hellman Exchangeを直接含めるわけではありませんが、Diffie-HellmanグループはChild SAのために交渉される場合があります。これにより、ピアはcreate_child_sa Exchangeでdiffie-hellmanを採用することができ、生成された子SAキーに完全な方式の秘密を提供します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For Transform Type 5 (Extended Sequence Numbers), defined Transform IDs are listed below. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
変換タイプ5（拡張シーケンス番号）の場合、定義された変換IDを以下にリストします。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Name                               Number
   --------------------------------------------
   No Extended Sequence Numbers       0
   Extended Sequence Numbers          1
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that an initiator who supports ESNs will usually include two ESN transforms, with values &#34;0&#34; and &#34;1&#34;, in its proposals. A proposal containing a single ESN transform with value &#34;1&#34; means that using normal (non-extended) sequence numbers is not acceptable.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESNをサポートするイニシエーターには、通常、その提案には値「0」と「1」の2つのESN変換が含まれることに注意してください。値「1」を持つ単一のESN変換を含む提案は、通常（拡張されていない）シーケンス番号を使用することが受け入れられないことを意味します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Numerous additional Transform Types have been defined since the publication of RFC 4306. Please refer to the IANA IKEv2 registry for details.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 4306の公開以来、多数の追加の変換タイプが定義されています。詳細については、IANA IKEV2レジストリを参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-3--Valid-Transform-Types-by-Protocol">
3.3.3. Valid Transform Types by Protocol
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.3. プロトコルによる有効な変換タイプ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The number and type of transforms that accompany an SA payload are dependent on the protocol in the SA itself. An SA payload proposing the establishment of an SA has the following mandatory and optional Transform Types. A compliant implementation MUST understand all mandatory and optional types for each protocol it supports (though it need not accept proposals with unacceptable suites). A proposal MAY omit the optional types if the only value for them it will accept is NONE.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SAペイロードに伴う変換の数とタイプは、SA自体のプロトコルに依存します。SAの確立を提案するSAペイロードには、次の必須およびオプションの変換タイプがあります。準拠した実装は、サポートする各プロトコルのすべての必須およびオプションのタイプを理解する必要があります（ただし、受け入れられないスイートで提案を受け入れる必要はありません）。提案は、それが受け入れる唯一の値がなしである場合、オプションのタイプを省略する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Protocol    Mandatory Types          Optional Types
   ---------------------------------------------------
   IKE         ENCR, PRF, INTEG*, D-H
   ESP         ENCR, ESN                INTEG, D-H
   AH          INTEG, ESN               D-H
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
(*) Negotiating an integrity algorithm is mandatory for the Encrypted payload format specified in this document. For example, [AEAD] specifies additional formats based on authenticated encryption, in which a separate integrity algorithm is not negotiated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
（*）このドキュメントで指定された暗号化されたペイロード形式には、整合性アルゴリズムのネゴシエートが必須です。たとえば、[AEAD]は、認証された暗号化に基づいて追加の形式を指定します。この形式では、個別の整合性アルゴリズムがネゴシエートされません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-4--Mandatory-Transform-IDs">
3.3.4. Mandatory Transform IDs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.4. 必須の変換ID
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The specification of suites that MUST and SHOULD be supported for interoperability has been removed from this document because they are likely to change more rapidly than this document evolves. At the time of publication of this document, [RFC4307] specifies these suites, but note that it might be updated in the future, and other RFCs might specify different sets of suites.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
相互運用性のためにサポートする必要があり、サポートされなければならないスイートの仕様は、このドキュメントが進化するよりも迅速に変化する可能性が高いため、このドキュメントから削除されました。このドキュメントの公開時には、[RFC4307]はこれらのスイートを指定しますが、将来更新される可能性があり、他のRFCはさまざまなスイートセットを指定する可能性があることに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An important lesson learned from IKEv1 is that no system should only implement the mandatory algorithms and expect them to be the best choice for all customers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV1から学んだ重要な教訓は、必須のアルゴリズムのみを実装し、それらがすべての顧客にとって最良の選択であることを期待するシステムはないということです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is likely that IANA will add additional transforms in the future, and some users may want to use private suites, especially for IKE where implementations should be capable of supporting different parameters, up to certain size limits. In support of this goal, all implementations of IKEv2 SHOULD include a management facility that allows specification (by a user or system administrator) of Diffie-Hellman parameters (the generator, modulus, and exponent lengths and values) for new Diffie-Hellman groups. Implementations SHOULD provide a management interface through which these parameters and the associated Transform IDs may be entered (by a user or system administrator), to enable negotiating such groups.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANAは将来追加の変換を追加する可能性があり、一部のユーザーは、特に実装が特定のサイズの制限までさまざまなパラメーターをサポートできるIKEでプライベートスイートを使用したい場合があります。この目標をサポートするために、IKEV2のすべての実装には、新しいdiffie-hellmanグループのDiffie-hellmanパラメーター（ジェネレーター、モジュラス、および指数の長さと値）の仕様（ユーザーまたはシステム管理者による）を許可する管理施設を含める必要があります。実装は、これらのパラメーターと関連する変換IDを（ユーザーまたはシステム管理者が）入力して、そのようなグループの交渉を可能にする管理インターフェイスを提供する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
All implementations of IKEv2 MUST include a management facility that enables a user or system administrator to specify the suites that are acceptable for use with IKE. Upon receipt of a payload with a set of Transform IDs, the implementation MUST compare the transmitted Transform IDs against those locally configured via the management controls, to verify that the proposed suite is acceptable based on local policy. The implementation MUST reject SA proposals that are not authorized by these IKE suite controls. Note that cryptographic suites that MUST be implemented need not be configured as acceptable to local policy.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2のすべての実装には、ユーザーまたはシステム管理者がIKEで使用できるスイートを指定できる管理施設を含める必要があります。一連の変換IDを使用したペイロードを受信すると、実装は、提案されたスイートがローカルポリシーに基づいて許容できることを確認するために、局所的に構成されたものと送信された変換IDを比較する必要があります。実装は、これらのIKEスイートコントロールによって許可されていないSA提案を拒否する必要があります。実装しなければならない暗号化されたスイートは、ローカルポリシーに受け入れられると構成する必要はないことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-5--Transform-Attributes">
3.3.5. Transform Attributes
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.5. 属性を変換します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Each transform in a Security Association payload may include attributes that modify or complete the specification of the transform. The set of valid attributes depends on the transform. Currently, only a single attribute type is defined: the Key Length attribute is used by certain encryption transforms with variable-length keys (see below for details).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セキュリティ協会のペイロードの各変換には、変換の仕様を変更または完了する属性が含まれる場合があります。有効な属性のセットは、変換に依存します。現在、単一の属性タイプのみが定義されています。キー長属性は、可変長キーを使用した特定の暗号化変換によって使用されます（詳細については以下を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The attributes are type/value pairs and are defined below. Attributes can have a value with a fixed two-octet length or a variable-length value. For the latter, the attribute is encoded as type/length/value.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
属性はタイプ/値のペアであり、以下に定義されています。属性は、固定された2オクテットの長さまたは変数長値を持つ値を持つことができます。後者の場合、属性はタイプ/長さ/値としてエンコードされます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |A|       Attribute Type        |    AF=0  Attribute Length     |
   |F|                             |    AF=1  Attribute Value      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   AF=0  Attribute Value                       |
   |                   AF=1  Not Transmitted                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
Figure 9: Data Attributes
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
図9：データ属性
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Attribute Format (AF) (1 bit) - Indicates whether the data attribute follows the Type/Length/Value (TLV) format or a shortened Type/Value (TV) format. If the AF bit is zero (0), then the attribute uses TLV format; if the AF bit is one (1), the TV format (with two-byte value) is used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 属性形式（AF）（1ビット） - データ属性がType/Length/Value（TLV）形式に従うか、Type/Value（TV）形式を短縮するかを示します。AFビットがゼロ（0）の場合、属性はTLV形式を使用します。AFビットが1（1）の場合、TV形式（2バイト値の）が使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Attribute Type (15 bits) - Unique identifier for each type of attribute (see below).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 属性タイプ（15ビット） - 各タイプの属性の一意の識別子（以下を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Attribute Value (variable length) - Value of the attribute associated with the attribute type. If the AF bit is a zero (0), this field has a variable length defined by the Attribute Length field. If the AF bit is a one (1), the Attribute Value has a length of 2 octets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 属性値（変数長） - 属性タイプに関連付けられた属性の値。AFビットがゼロ（0）の場合、このフィールドには、属性の長さフィールドで定義された変数長があります。AFビットが1（1）の場合、属性値の長さは2オクテットです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The only currently defined attribute type (Key Length) is fixed length; the variable-length encoding specification is included only for future extensions. Attributes described as fixed length MUST NOT be encoded using the variable-length encoding unless that length exceeds two bytes. Variable-length attributes MUST NOT be encoded as fixed-length even if their value can fit into two octets. Note: This is a change from IKEv1, where increased flexibility may have simplified the composer of messages but certainly complicated the parser.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
現在定義されている唯一の属性タイプ（キー長）は固定長です。可変長エンコード仕様は、将来の拡張機能にのみ含まれています。固定長として説明されている属性は、その長さが2バイトを超えない限り、可変長エンコードを使用してエンコードする必要はありません。変数の長さの属性は、2つのオクテットに値に収まる場合でも、固定層としてエンコードする必要はありません。注：これはIKEV1からの変更です。これは、柔軟性の向上がメッセージの作曲家を簡素化したかもしれませんが、確かにパーサーを複雑にした可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Attribute Type         Value         Attribute Format
   ------------------------------------------------------------
   Key Length (in bits)   14            TV
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Values 0-13 and 15-17 were used in a similar context in IKEv1, and should not be assigned except to matching values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
値0-13および15-17は、IKEV1の同様のコンテキストで使用され、一致する値を除いて割り当ててはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Key Length attribute specifies the key length in bits (MUST use network byte order) for certain transforms as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
キーの長さの属性は、特定の変換のビットのキー長（ネットワークバイト順序を使用する必要があります）を次のように指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o The Key Length attribute MUST NOT be used with transforms that use a fixed-length key. For example, this includes ENCR_DES, ENCR_IDEA, and all the Type 2 (Pseudorandom function) and Type 3 (Integrity Algorithm) transforms specified in this document. It is recommended that future Type 2 or 3 transforms do not use this attribute.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o キーの長さの属性は、固定長キーを使用する変換で使用してはなりません。たとえば、これには、ENCR_DES、ENCR_IDEA、およびこのドキュメントで指定されたすべてのタイプ2（擬似ランダム関数）およびタイプ3（整合性アルゴリズム）変換が含まれます。将来のタイプ2または3変換では、この属性を使用しないことをお勧めします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Some transforms specify that the Key Length attribute MUST be always included (omitting the attribute is not allowed, and proposals not containing it MUST be rejected). For example, this includes ENCR_AES_CBC and ENCR_AES_CTR.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 一部の変換では、キー長属性を常に含める必要があることを指定します（属性を省略することは許可されておらず、それを含む提案は拒否する必要があります）。たとえば、これにはENCR_AES_CBCおよびENCR_AES_CTRが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Some transforms allow variable-length keys, but also specify a default key length if the attribute is not included. For example, these transforms include ENCR_RC5 and ENCR_BLOWFISH.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 一部の変換では、可変長キーが許可されていますが、属性が含まれていない場合はデフォルトのキー長を指定します。たとえば、これらの変換にはENCR_RC5とENCR_BLOWFISHが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementation note: To further interoperability and to support upgrading endpoints independently, implementers of this protocol SHOULD accept values that they deem to supply greater security. For instance, if a peer is configured to accept a variable-length cipher with a key length of X bits and is offered that cipher with a larger key length, the implementation SHOULD accept the offer if it supports use of the longer key.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
実装注：相互運用性をさらに高め、エンドポイントのアップグレードを独立してサポートするには、このプロトコルの実装者は、より大きなセキュリティを提供するとみなす価値を受け入れる必要があります。たとえば、ピアがキーの長さのXビットを持つ可変長の暗号を受け入れるように構成されている場合、キーの長さが大きい暗号が提供されている場合、実装は長いキーの使用をサポートする場合、オファーを受け入れる必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Support for this capability allows a responder to express a concept of &#34;at least&#34; a certain level of security -- &#34;a key length of _at least_ X bits for cipher Y&#34;. However, as the attribute is always returned unchanged (see the next section), an initiator willing to accept multiple key lengths has to include multiple transforms with the same Transform Type, each with a different Key Length attribute.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この機能のサポートにより、レスポンダーは、少なくとも一定レベルのセキュリティである「少なくとも」という概念を表現できます。ただし、属性は常に変更されていないため（次のセクションを参照）、複数のキーの長さを受け入れる意思のあるイニシエーターには、それぞれ異なるキー長属性を持つ同じ変換タイプの複数の変換を含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-3-6--Attribute-Negotiation">
3.3.6. Attribute Negotiation
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.3.6. 属性交渉
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
During Security Association negotiation initiators present offers to responders. Responders MUST select a single complete set of parameters from the offers (or reject all offers if none are acceptable). If there are multiple proposals, the responder MUST choose a single proposal. If the selected proposal has multiple transforms with the same type, the responder MUST choose a single one. Any attributes of a selected transform MUST be returned unmodified. The initiator of an exchange MUST check that the accepted offer is consistent with one of its proposals, and if not MUST terminate the exchange.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
セキュリティ協会の交渉中に、イニシエーターはレスポンダーへの申し出を提示します。レスポンダーは、オファーからパラメーターのパラメーターのパラメーターを1つ選択する必要があります（または、認められない場合はすべてのオファーを拒否します）。複数の提案がある場合、レスポンダーは単一の提案を選択する必要があります。選択した提案に同じタイプの複数の変換がある場合、レスポンダーは単一のものを選択する必要があります。選択された変換の属性は、変更されていない返品を返す必要があります。交換の開始者は、受け入れられた申し出がその提案の1つと一致していることを確認する必要があり、そうでない場合は交換を終了する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the responder receives a proposal that contains a Transform Type it does not understand, or a proposal that is missing a mandatory Transform Type, it MUST consider this proposal unacceptable; however, other proposals in the same SA payload are processed as usual. Similarly, if the responder receives a transform that it does not understand, or one that contains a Transform Attribute it does not understand, it MUST consider this transform unacceptable; other transforms with the same Transform Type are processed as usual. This allows new Transform Types and Transform Attributes to be defined in the future.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
レスポンダーが、理解できない変換タイプを含む提案、または必須の変換タイプを欠いている提案を受け取った場合、この提案は受け入れられないと考える必要があります。ただし、同じSAペイロードの他の提案は通常どおり処理されます。同様に、レスポンダーが理解できない変換、または理解していない変換属性を含む変換を受け取った場合、この変換は許容できないと考える必要があります。同じ変換タイプの他の変換は、通常どおり処理されます。これにより、新しい変換タイプが可能になり、将来的に変換属性を定義できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Negotiating Diffie-Hellman groups presents some special challenges. SA offers include proposed attributes and a Diffie-Hellman public number (KE) in the same message. If in the initial exchange the initiator offers to use one of several Diffie-Hellman groups, it SHOULD pick the one the responder is most likely to accept and include a KE corresponding to that group. If the responder selects a proposal using a different Diffie-Hellman group (other than NONE), the responder will indicate the correct group in the response and the initiator SHOULD pick an element of that group for its KE value when retrying the first message. It SHOULD, however, continue to propose its full supported set of groups in order to prevent a man-in-the-middle downgrade attack. If one of the proposals offered is for the Diffie-Hellman group of NONE, and the responder selects that Diffie-Hellman group, then it MUST ignore the initiator&#39;s KE payload and omit the KE payload from the response.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Diffie-Hellmanグループの交渉は、いくつかの特別な課題を提示します。SAオファーには、同じメッセージに提案された属性とdiffie-hellman公開番号（KE）が含まれます。最初の交換で、イニシエーターがいくつかのdiffie-hellmanグループの1つを使用することを申し出る場合、そのグループに対応するKEを受け入れ、含める可能性が最も高いものを選択する必要があります。Responderが異なるDiffie-Hellmanグループ（なし以外）を使用して提案を選択した場合、Responderは応答の正しいグループを示し、イニシエーターは最初のメッセージを再試行するときにそのグループの要素を選択する必要があります。ただし、中間のダウングレード攻撃を防ぐために、完全にサポートされているグループのセットを提案し続ける必要があります。提供される提案の1つがNOのDiffie-Hellmanグループのためであり、ResponderがDiffie-Hellmanグループを選択する場合、イニシエーターのKEペイロードを無視し、応答からKEペイロードを省略する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-4--Key-Exchange-Payload">
3.4. Key Exchange Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.4. キーエクスチェンジペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Key Exchange payload, denoted KE in this document, is used to exchange Diffie-Hellman public numbers as part of a Diffie-Hellman key exchange. The Key Exchange payload consists of the IKE generic payload header followed by the Diffie-Hellman public value itself.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでKEと表示されているキーエクスチェンジペイロードは、Diffie-Hellman Key Exchangeの一部としてDiffie-Hellmanの公共番号を交換するために使用されます。キーエクスチェンジペイロードは、IKEジェネリックペイロードヘッダーとそれに続くDiffie-Hellmanのパブリックバリュー自体で構成されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Diffie-Hellman Group Num    |           RESERVED            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       Key Exchange Data                       ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Figure 10: Key Exchange Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
図10：キーエクスチェンジペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Key Exchange payload is constructed by copying one&#39;s Diffie-Hellman public value into the &#34;Key Exchange Data&#34; portion of the payload. The length of the Diffie-Hellman public value for modular exponentiation group (MODP) groups MUST be equal to the length of the prime modulus over which the exponentiation was performed, prepending zero bits to the value if necessary.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
キーエクスチェンジペイロードは、diffie-hellmanの公開価値をペイロードの「キーエクスチェンジデータ」部分にコピーすることにより構築されます。モジュラー指数グループ（MODP）グループのdiffie-hellmanの公共値の長さは、指数が実行されたプライムモジュラスの長さに等しく、必要に応じて値にゼロビットを準備する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Diffie-Hellman Group Num identifies the Diffie-Hellman group in which the Key Exchange Data was computed (see Section 3.3.2). This Diffie-Hellman Group Num MUST match a Diffie-Hellman group specified in a proposal in the SA payload that is sent in the same message, and SHOULD match the Diffie-Hellman group in the first group in the first proposal, if such exists. If none of the proposals in that SA payload specifies a Diffie-Hellman group, the KE payload MUST NOT be present. If the selected proposal uses a different Diffie-Hellman group (other than NONE), the message MUST be rejected with a Notify payload of type INVALID_KE_PAYLOAD. See also Sections 1.2 and 2.7.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Diffie-HellmanグループNUMは、キー交換データが計算されたDiffie-Hellmanグループを識別します（セクション3.3.2を参照）。このDiffie-HellmanグループNUMは、同じメッセージで送信されるSAペイロードの提案で指定されたDiffie-Hellmanグループと一致し、最初の提案の最初のグループのDiffie-Hellmanグループと一致する必要があります。そのSAペイロードの提案がどれもDiffie-Hellmanグループを指定していない場合、KEペイロードが存在してはなりません。選択された提案が別のdiffie-hellmanグループ（なし以外）を使用している場合、メッセージはinvalid_ke_payloadタイプの通知ペイロードで拒否する必要があります。セクション1.2および2.7も参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Key Exchange payload is thirty-four (34).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
キーエクスチェンジペイロードのペイロードタイプは34（34）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-5--Identification-Payloads">
3.5. Identification Payloads
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.5. 識別ペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Identification payloads, denoted IDi and IDr in this document, allow peers to assert an identity to one another. This identity may be used for policy lookup, but does not necessarily have to match anything in the CERT payload; both fields may be used by an implementation to perform access control decisions. When using the ID_IPV4_ADDR/ID_IPV6_ADDR identity types in IDi/IDr payloads, IKEv2 does not require this address to match the address in the IP header of IKEv2 packets, or anything in the TSi/TSr payloads. The contents of IDi/IDr are used purely to fetch the policy and authentication data related to the other party.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでIDIとIDRを示した識別ペイロードは、ピアが互いにアイデンティティを主張できるようにします。このアイデンティティは、ポリシーの検索に使用される場合がありますが、必ずしもCERTペイロード内のものを一致させる必要はありません。両方のフィールドは、アクセス制御の決定を実行するために実装によって使用できます。IDI/IDRペイロードでID_IPV4_ADDR/ID_IPV6_ADDRアイデンティティタイプを使用する場合、IKEV2はIKEV2パケットのIPヘッダー、またはTSI/TSRペイロード内の何かのアドレスと一致するようにこのアドレスを必要としません。IDI/IDRの内容は、相手に関連するポリシーと認証データを取得するために純粋に使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NOTE: In IKEv1, two ID payloads were used in each direction to hold Traffic Selector (TS) information for data passing over the SA. In IKEv2, this information is carried in TS payloads (see Section 3.13).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
注：IKEV1では、SAを通過するデータのトラフィックセレクター（TS）情報を保持するために、各方向に2つのIDペイロードが使用されました。IKEV2では、この情報はTSペイロードで伝えられています（セクション3.13を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Peer Authorization Database (PAD) as described in RFC 4301 [IPSECARCH] describes the use of the ID payload in IKEv2 and provides a formal model for the binding of identity to policy in addition to providing services that deal more specifically with the details of policy enforcement. The PAD is intended to provide a link between the SPD and the IKE Security Association management. See Section 4.4.3 of RFC 4301 for more details.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
RFC 4301 [IPSecarch]に記載されているピア認証データベース（PAD）は、IKEV2でのIDペイロードの使用を説明し、ポリシーの詳細をより具体的に扱うサービスを提供するサービスを提供することに加えて、アイデンティティをポリシーに結合する正式なモデルを提供します執行。パッドは、SPDとIKEセキュリティ協会の管理との間のリンクを提供することを目的としています。詳細については、RFC 4301のセクション4.4.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Identification payload consists of the IKE generic payload header followed by identification fields as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
識別ペイロードは、次のようにIKEジェネリックペイロードヘッダーと識別フィールドが続きます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   ID Type     |                 RESERVED                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                   Identification Data                         ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 11: Identification Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図11：識別ペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ID Type (1 octet) - Specifies the type of Identification being used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IDタイプ（1 Octet） - 使用されている識別のタイプを指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED - MUST be sent as zero; MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約 - ゼロとして送信する必要があります。受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Identification Data (variable length) - Value, as indicated by the Identification Type. The length of the Identification Data is computed from the size in the ID payload header.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 識別データ（変数長） - 識別タイプで示されているように。識別データの長さは、IDペイロードヘッダーのサイズから計算されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload types for the Identification payload are thirty-five (35) for IDi and thirty-six (36) for IDr.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
識別ペイロードのペイロードタイプは、IDIの場合は35（35）、IDRの場合は36（36）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following table lists the assigned semantics for the Identification Type field. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の表には、識別型フィールドに割り当てられたセマンティクスを示します。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   ID Type                           Value
   -------------------------------------------------------------------
   ID_IPV4_ADDR                        1
      A single four (4) octet IPv4 address.
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_FQDN 2 A fully-qualified domain name string. An example of an ID_FQDN is &#34;example.com&#34;. The string MUST NOT contain any terminators (e.g., NULL, CR, etc.). All characters in the ID_FQDN are ASCII; for an &#34;internationalized domain name&#34;, the syntax is as defined in [IDNA], for example &#34;xn--tmonesimerkki-bfbb.example.net&#34;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_FQDN 2完全に資格のあるドメイン名文字列。ID_FQDNの例は「Example.com」です。文字列には、ターミネーター（ヌル、CRなど）を含めてはなりません。ID_FQDNのすべての文字はASCIIです。「国際化されたドメイン名」の場合、構文は[idna]、たとえば「xn  -  tmonesimerkki-bfbb.example.net」で定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_RFC822_ADDR 3 A fully-qualified RFC 822 email address string. An example of a ID_RFC822_ADDR is &#34;jsmith@example.com&#34;. The string MUST NOT contain any terminators. Because of [EAI], implementations would be wise to treat this field as UTF-8 encoded text, not as pure ASCII.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_RFC822_ADDR 3完全に資格のあるRFC 822メールアドレス文字列。ID_RFC822_ADDRの例は「jsmith@example.com」です。文字列にはターミネーターを含めてはなりません。[EAI]のため、実装は、このフィールドを純粋なASCIIとしてではなく、UTF-8エンコードされたテキストとして扱うのが賢明です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_IPV6_ADDR 5 A single sixteen (16) octet IPv6 address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
id_ipv6_addr 5単一の16（16）Octet IPv6アドレス。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_DER_ASN1_DN 9 The binary Distinguished Encoding Rules (DER) encoding of an ASN.1 X.500 Distinguished Name [PKIX].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
id_der_asn1_dn 9 asn.1 x.500の著名な名前[pkix]のバイナリ特異エンコードルール（der）エンコード。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_DER_ASN1_GN 10 The binary DER encoding of an ASN.1 X.509 GeneralName [PKIX].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
id_der_asn1_gn 10 asn.1 x.509 generalname [pkix]のバイナリderエンコード。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_KEY_ID 11 An opaque octet stream that may be used to pass vendor-specific information necessary to do certain proprietary types of identification.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ID_KEY_ID 11特定の独自のタイプの識別を行うために必要なベンダー固有の情報を渡すために使用される不透明なオクテットストリーム。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two implementations will interoperate only if each can generate a type of ID acceptable to the other. To assure maximum interoperability, implementations MUST be configurable to send at least one of ID_IPV4_ADDR, ID_FQDN, ID_RFC822_ADDR, or ID_KEY_ID, and MUST be configurable to accept all of these four types. Implementations SHOULD be capable of generating and accepting all of these types. IPv6-capable implementations MUST additionally be configurable to accept ID_IPV6_ADDR. IPv6-only implementations MAY be configurable to send only ID_IPV6_ADDR instead of ID_IPV4_ADDR for IP addresses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2つの実装は、それぞれが他方に許容できるタイプのIDを生成できる場合にのみ相互運用します。最大の相互運用性を保証するには、実装を設定して、ID_IPV4_ADDR、ID_FQDN、ID_RFC822_ADDR、またはID_KEY_IDの少なくとも1つを送信する必要があり、これらの4つのタイプをすべて受け入れるように設定可能でなければなりません。実装は、これらすべてのタイプを生成および受け入れることができる必要があります。IPv6対応の実装は、ID_IPV6_ADDRを受け入れるように設定可能である必要があります。ipv6のみの実装は、IPアドレスのID_IPV4_ADDRの代わりにID_IPV6_ADDRのみを送信するように構成できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAP [EAP] does not mandate the use of any particular type of identifier, but often EAP is used with Network Access Identifiers (NAIs) defined in [NAI]. Although NAIs look a bit like email addresses (e.g., &#34;joe@example.com&#34;), the syntax is not exactly the same as the syntax of email address in [MAILFORMAT]. For those NAIs that include the realm component, the ID_RFC822_ADDR identification type SHOULD be used. Responder implementations should not attempt to verify that the contents actually conform to the exact syntax given in [MAILFORMAT], but instead should accept any reasonable-looking NAI. For NAIs that do not include the realm component, the ID_KEY_ID identification type SHOULD be used.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAP [EAP]は、特定のタイプの識別子の使用を義務付けませんが、多くの場合、EAPは[NAI]で定義されたネットワークアクセス識別子（NAIS）で使用されます。NAISは、メールアドレスのように見えますが（「joe@example.com」など）、構文は[MailFormat]の電子メールアドレスの構文とまったく同じではありません。レルムコンポーネントを含むNAISの場合、ID_RFC822_ADDR識別タイプを使用する必要があります。レスポンダーの実装は、コンテンツが実際に[MailFormat]で与えられた正確な構文に適合していることを確認しようとするのではなく、合理的に見えるNAIを受け入れる必要があります。レルムコンポーネントを含めないNAISの場合、ID_KEY_ID識別タイプを使用する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-6--Certificate-Payload">
3.6. Certificate Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.6. 証明書のペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Certificate payload, denoted CERT in this document, provides a means to transport certificates or other authentication-related information via IKE. Certificate payloads SHOULD be included in an exchange if certificates are available to the sender. The Hash and URL formats of the Certificate payloads should be used in case the peer has indicated an ability to retrieve this information from elsewhere using an HTTP_CERT_LOOKUP_SUPPORTED Notify payload. Note that the term &#34;Certificate payload&#34; is somewhat misleading, because not all authentication mechanisms use certificates and data other than certificates may be passed in this payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントで証明された証明書のペイロードは、IKEを介して証明書またはその他の認証関連情報を輸送する手段を提供します。証明書のペイロードは、送信者が証明書を利用できる場合は、交換に含める必要があります。証明書のペイロードのハッシュおよびURL形式は、ピアがhttp_cert_lookup_supported通知ペイロードを使用して他の場所からこの情報を取得する能力を示した場合に使用する必要があります。すべての認証メカニズムが証明書を使用しているわけではないため、「証明書のペイロード」という用語はやや誤解を招くことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Certificate payload is defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書のペイロードは、次のように定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Cert Encoding |                                               |
   +-+-+-+-+-+-+-+-+                                               |
   ~                       Certificate Data                        ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
Figure 12: Certificate Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-13">
図12：証明書のペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Certificate Encoding (1 octet) - This field indicates the type of certificate or certificate-related information contained in the Certificate Data field. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 証明書エンコーディング（1 Octet） - このフィールドは、証明書データフィールドに含まれる証明書または証明書関連情報の種類を示します。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Certificate Encoding                 Value
      ----------------------------------------------------
      PKCS #7 wrapped X.509 certificate    1   UNSPECIFIED
      PGP Certificate                      2   UNSPECIFIED
      DNS Signed Key                       3   UNSPECIFIED
      X.509 Certificate - Signature        4
      Kerberos Token                       6   UNSPECIFIED
      Certificate Revocation List (CRL)    7
      Authority Revocation List (ARL)      8   UNSPECIFIED
      SPKI Certificate                     9   UNSPECIFIED
      X.509 Certificate - Attribute        10  UNSPECIFIED
      Raw RSA Key                          11
      Hash and URL of X.509 certificate    12
      Hash and URL of X.509 bundle         13
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Certificate Data (variable length) - Actual encoding of certificate data. The type of certificate is indicated by the Certificate Encoding field.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 証明書データ（変動長） - 証明書データの実際のエンコード。証明書のタイプは、証明書をエンコードするフィールドで示されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Certificate payload is thirty-seven (37).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書のペイロードのペイロードタイプは37（37）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Specific syntax for some of the certificate type codes above is not defined in this document. The types whose syntax is defined in this document are:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
上記の一部の証明書タイプコードの特定の構文は、このドキュメントでは定義されていません。このドキュメントで構文が定義されているタイプは次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o &#34;X.509 Certificate - Signature&#34; contains a DER-encoded X.509 certificate whose public key is used to validate the sender&#39;s AUTH payload. Note that with this encoding, if a chain of certificates needs to be sent, multiple CERT payloads are used, only the first of which holds the public key used to validate the sender&#39;s AUTH payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 「X.509証明書 - 署名」には、送信者の認証ペイロードを検証するために公開キーを使用しているDer -Encoded X.509証明書が含まれています。このエンコードでは、証明書のチェーンを送信する必要がある場合、複数の証明書のペイロードが使用され、その最初の証明書のみが送信者の認証ペイロードを検証するために使用される公開キーを保持することに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o &#34;Certificate Revocation List&#34; contains a DER-encoded X.509 certificate revocation list.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 「証明書の取り消しリスト」には、Der-Encoded X.509証明書の取り消しリストが含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o &#34;Raw RSA Key&#34; contains a PKCS #1 encoded RSA key, that is, a DER-encoded RSAPublicKey structure (see [RSA] and [PKCS1]).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 「RAW RSAキー」には、PKCS＃1エンコードされたRSAキー、つまりDer-Encoded RSapublickey構造（[RSA]および[PKCS1]を参照）が含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Hash and URL encodings allow IKE messages to remain short by replacing long data structures with a 20-octet SHA-1 hash (see [SHA]) of the replaced value followed by a variable-length URL that resolves to the DER-encoded data structure itself. This improves efficiency when the endpoints have certificate data cached and makes IKE less subject to DoS attacks that become easier to mount when IKE messages are large enough to require IP fragmentation [DOSUDPPROT].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ハッシュおよびURLエンコーディングにより、長いデータ構造を置き換えられた値の20オクテットSHA-1ハッシュ（[SHA]を参照）に置き換えることにより、IKEメッセージが短いままになり、その後にderエンコードされたデータ構造に分解される可変長URLが続きます。自体。これにより、エンドポイントに証明書データがキャッシュされ、IKEがIPフラグメンテーション[DOSUDPPROT]を必要とするのに十分な大きさの場合、IKEの攻撃の対象となるDOS攻撃の影響を少なくします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The &#34;Hash and URL of a bundle&#34; type uses the following ASN.1 definition for the X.509 bundle:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「バンドルのハッシュとURL」タイプは、X.509バンドルの次のASN.1定義を使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CertBundle
     { iso(1) identified-organization(3) dod(6) internet(1)
       security(5) mechanisms(5) pkix(7) id-mod(0)
       id-mod-cert-bundle(34) }
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   DEFINITIONS EXPLICIT TAGS ::=
   BEGIN
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   IMPORTS
     Certificate, CertificateList
     FROM PKIX1Explicit88
        { iso(1) identified-organization(3) dod(6)
          internet(1) security(5) mechanisms(5) pkix(7)
          id-mod(0) id-pkix1-explicit(18) } ;
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CertificateOrCRL ::= CHOICE {
     cert [0] Certificate,
     crl  [1] CertificateList }
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CertificateBundle ::= SEQUENCE OF CertificateOrCRL
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
END
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
終わり
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations MUST be capable of being configured to send and accept up to four X.509 certificates in support of authentication, and also MUST be capable of being configured to send and accept the Hash and URL format (with HTTP URLs). Implementations SHOULD be capable of being configured to send and accept Raw RSA keys. If multiple certificates are sent, the first certificate MUST contain the public key used to sign the AUTH payload. The other certificates may be sent in any order.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
実装は、認証をサポートするために最大4つのX.509証明書を送信および受け入れるように構成でき、またハッシュおよびURL形式を送信および受け入れるように構成できる必要があります（HTTP URLを使用）。実装は、生のRSAキーを送信および受け入れるように構成できる必要があります。複数の証明書が送信された場合、最初の証明書には、認証ペイロードに署名するために使用される公開キーを含める必要があります。他の証明書は任意の順序で送信できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations MUST support the HTTP [HTTP] method for hash-and-URL lookup. The behavior of other URL methods [URLS] is not currently specified, and such methods SHOULD NOT be used in the absence of a document specifying them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
実装は、ハッシュアンド-URLルックアップのHTTP [HTTP]メソッドをサポートする必要があります。他のURLメソッド[URL]の動作は現在指定されておらず、そのような方法を指定するドキュメントがない場合は使用しないでください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-7--Certificate-Request-Payload">
3.7. Certificate Request Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.7. 証明書リクエストペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Certificate Request payload, denoted CERTREQ in this document, provides a means to request preferred certificates via IKE and can appear in the IKE_INIT_SA response and/or the IKE_AUTH request. Certificate Request payloads MAY be included in an exchange when the sender needs to get the certificate of the receiver.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでCertreqと表示された証明書要求のペイロードは、IKEを介して優先証明書を要求する手段を提供し、IKE_INIT_SA応答および/またはIKE_AUTHリクエストに表示できます。送信者が受信者の証明書を取得する必要がある場合、証明書リクエストのペイロードは、交換に含まれる場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   The Certificate Request payload is defined as follows:
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Cert Encoding |                                               |
   +-+-+-+-+-+-+-+-+                                               |
   ~                    Certification Authority                    ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
Figure 13: Certificate Request Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-9">
図13：証明書リクエストペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Certificate Encoding (1 octet) - Contains an encoding of the type or format of certificate requested. Values are listed in Section 3.6.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 証明書エンコーディング（1 Octet） - 要求された証明書のタイプまたは形式のエンコードが含まれています。値はセクション3.6にリストされています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Certification Authority (variable length) - Contains an encoding of an acceptable certification authority for the type of certificate requested.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 認証機関（変動長） - 要求された証明書の種類について、許容可能な認証機関のエンコードが含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Certificate Request payload is thirty-eight (38).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書リクエストのペイロードのペイロードタイプは38です（38）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Certificate Encoding field has the same values as those defined in Section 3.6. The Certification Authority field contains an indicator of trusted authorities for this certificate type. The Certification Authority value is a concatenated list of SHA-1 hashes of the public keys of trusted Certification Authorities (CAs). Each is encoded as the SHA-1 hash of the Subject Public Key Info element (see section 4.1.2.7 of [PKIX]) from each Trust Anchor certificate. The 20-octet hashes are concatenated and included with no other formatting.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書エンコーディングフィールドは、セクション3.6で定義されている値と同じ値を持っています。認定機関フィールドには、この証明書タイプの信頼できる当局の指標が含まれています。認証当局の価値は、信頼できる認証当局（CAS）の公共鍵のSHA-1ハッシュの連結リストです。それぞれが、各トラストアンカー証明書の主題公開鍵情報要素（[PKIX]のセクション4.1.2.7を参照）のSHA-1ハッシュとしてエンコードされます。20オクテットのハッシュは連結され、他のフォーマットなしで含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The contents of the &#34;Certification Authority&#34; field are defined only for X.509 certificates, which are types 4, 12, and 13. Other values SHOULD NOT be used until Standards-Track specifications that specify their use are published.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「認証機関」フィールドの内容は、タイプ4、12、および13のX.509証明書に対してのみ定義されます。その他の値が公開される標準トラック仕様が公開されるまで使用しないでください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that the term &#34;Certificate Request&#34; is somewhat misleading, in that values other than certificates are defined in a &#34;Certificate&#34; payload and requests for those values can be present in a Certificate Request payload. The syntax of the Certificate Request payload in such cases is not defined in this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
「証明書リクエスト」という用語はやや誤解を招くことに注意してください。証明書以外の値は「証明書」ペイロードで定義され、それらの値のリクエストは証明書リクエストペイロードに存在する可能性があります。このような場合の証明書要求ペイロードの構文は、このドキュメントでは定義されていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Certificate Request payload is processed by inspecting the &#34;Cert Encoding&#34; field to determine whether the processor has any certificates of this type. If so, the &#34;Certification Authority&#34; field is inspected to determine if the processor has any certificates that can be validated up to one of the specified certification authorities. This can be a chain of certificates.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書リクエストのペイロードは、「証明書エンコード」フィールドを検査して、プロセッサにこのタイプの証明書があるかどうかを判断することにより処理されます。その場合、「認定機関」フィールドが検査され、プロセッサが特定の認定当局の1つまで検証できる証明書を持っているかどうかを判断します。これは、証明書のチェーンになる可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If an end-entity certificate exists that satisfies the criteria specified in the CERTREQ, a certificate or certificate chain SHOULD be sent back to the certificate requestor if the recipient of the CERTREQ:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Certreqで指定された基準を満たすエンドエンティティ証明書が存在する場合、Certreqの受信者がいる場合は、証明書または証明書チェーンを証明書要求者に送り返す必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o is configured to use certificate authentication,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 証明書認証を使用するように構成されています、
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o is allowed to send a CERT payload,
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 証明書のペイロードを送信することが許可されています、
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o has matching CA trust policy governing the current negotiation, and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 現在の交渉を管理するCAトラストポリシーが一致しており、
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o has at least one time-wise and usage-appropriate end-entity certificate chaining to a CA provided in the CERTREQ.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Certreqで提供されたCAにチェーンを接続する、少なくとも1回、使用に適したエンドエンティティ証明書を持っています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Certificate revocation checking must be considered during the chaining process used to select a certificate. Note that even if two peers are configured to use two different CAs, cross-certification relationships should be supported by appropriate selection logic.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
証明書の取り消しチェックは、証明書の選択に使用されるチェーンプロセス中に考慮する必要があります。2つの異なるCAを使用するように2つのピアが構成されていても、適切な選択ロジックによって相互認定関係をサポートする必要があることに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The intent is not to prevent communication through the strict adherence of selection of a certificate based on CERTREQ, when an alternate certificate could be selected by the sender that would still enable the recipient to successfully validate and trust it through trust conveyed by cross-certification, CRLs, or other out-of-band configured means. Thus, the processing of a CERTREQ should be seen as a suggestion for a certificate to select, not a mandated one. If no certificates exist, then the CERTREQ is ignored. This is not an error condition of the protocol. There may be cases where there is a preferred CA sent in the CERTREQ, but an alternate might be acceptable (perhaps after prompting a human operator).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
意図は、Certreqに基づいた証明書の厳密な遵守を通じて通信を防ぐことではなく、送信者が代替証明書を選択できる場合、受信者は相互認証によって伝えられた信頼を通じてそれを正常に検証および信頼できるようにすることができます。CRL、またはその他の帯域外構成平均。したがって、certreqの処理は、義務付けられたものではなく、証明書を選択するための提案と見なすべきです。証明書が存在しない場合、Certreqは無視されます。これは、プロトコルのエラー条件ではありません。Certreqに送信される優先CAがある場合がありますが、代替は許容される場合があります（おそらく人間のオペレーターを促した後）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The HTTP_CERT_LOOKUP_SUPPORTED notification MAY be included in any message that can include a CERTREQ payload and indicates that the sender is capable of looking up certificates based on an HTTP-based URL (and hence presumably would prefer to receive certificate specifications in that format).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
http_cert_lookup_supported通知は、certreqペイロードを含む可能性のあるメッセージに含まれる場合があり、送信者がHTTPベースのURLに基づいて証明書を検索できることを示します（したがって、おそらくその形式で証明書仕様を受信することを好むでしょう）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-8--Authentication-Payload">
3.8. Authentication Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.8. 認証ペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Authentication payload, denoted AUTH in this document, contains data used for authentication purposes. The syntax of the Authentication data varies according to the Auth Method as specified below.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントで認証されている認証ペイロードには、認証目的で使用されるデータが含まれています。認証データの構文は、以下に指定されているAUTHメソッドによって異なります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Authentication payload is defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
認証ペイロードは、次のように定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Auth Method   |                RESERVED                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                      Authentication Data                      ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 14: Authentication Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
図14：認証ペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Auth Method (1 octet) - Specifies the method of authentication used. The types of signatures are listed here. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o AUTHメソッド（1 Octet） - 使用される認証方法を指定します。署名の種類はここにリストされています。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   Mechanism                              Value
   -----------------------------------------------------------------
   RSA Digital Signature                  1
      Computed as specified in Section 2.15 using an RSA private key
      with RSASSA-PKCS1-v1_5 signature scheme specified in [PKCS1]
      (implementers should note that IKEv1 used a different method for
      RSA signatures).  To promote interoperability, implementations
      that support this type SHOULD support signatures that use SHA-1
      as the hash function and SHOULD use SHA-1 as the default hash
      function when generating signatures.  Implementations can use the
      certificates received from a given peer as a hint for selecting a
      mutually understood hash function for the AUTH payload signature.
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
Note, however, that the hash algorithm used in the AUTH payload signature doesn&#39;t have to be the same as any hash algorithm(s) used in the certificate(s).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
ただし、認証ペイロード署名で使用されるハッシュアルゴリズムは、証明書で使用されるハッシュアルゴリズムと同じである必要はないことに注意してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Shared Key Message Integrity Code 2 Computed as specified in Section 2.15 using the shared key associated with the identity in the ID payload and the negotiated PRF.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
共有キーメッセージ整合性コード2セクション2.15で指定されているように計算され、IDペイロードとネゴシエートされたPRFのIDに関連付けられている共有キーを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
DSS Digital Signature 3 Computed as specified in Section 2.15 using a DSS private key (see [DSS]) over a SHA-1 hash.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
DSSデジタル署名3セクション2.15で指定されているように計算されたDSS秘密キー（[DSS]を参照）を使用してSHA-1ハッシュを使用します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Authentication Data (variable length) - see Section 2.15.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 認証データ（変数長） - セクション2.15を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Authentication payload is thirty-nine (39).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
認証ペイロードのペイロードタイプは39（39）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-9--Nonce-Payload">
3.9. Nonce Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.9. NonCeペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Nonce payload, denoted as Ni and Nr in this document for the initiator&#39;s and responder&#39;s nonce, respectively, contains random data used to guarantee liveness during an exchange and protect against replay attacks.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターとレスポンダーのNonCEのこのドキュメントでNIおよびNRとして示されるNonCEペイロードには、交換中の活性を保証し、リプレイ攻撃から保護するために使用されるランダムデータが含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Nonce payload is defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ノンセペイロードは次のように定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                            Nonce Data                         ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-16">
Figure 15: Nonce Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-16">
図15：NonCEペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Nonce Data (variable length) - Contains the random data generated by the transmitting entity.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NONCEデータ（変数長） - 送信エンティティによって生成されたランダムデータが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Nonce payload is forty (40).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NonCeペイロードのペイロードタイプは40です（40）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The size of the Nonce Data MUST be between 16 and 256 octets, inclusive. Nonce values MUST NOT be reused.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
非CEデータのサイズは、包括的で16〜256オクテットでなければなりません。NONCE値を再利用してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-10--Notify-Payload">
3.10. Notify Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.10. ペイロードに通知します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Notify payload, denoted N in this document, is used to transmit informational data, such as error conditions and state transitions, to an IKE peer. A Notify payload may appear in a response message (usually specifying why a request was rejected), in an INFORMATIONAL Exchange (to report an error not in an IKE request), or in any other message to indicate sender capabilities or to modify the meaning of the request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでnと表示されている通知ペイロードは、エラー条件や状態遷移などの情報データをIKEピアに送信するために使用されます。通知のペイロードは、応答メッセージ（通常、リクエストが拒否された理由を指定）、情報交換（IKEリクエストではないエラーを報告するため）、または送信者機能を示すための他のメッセージ、またはの意味を変更する他のメッセージに表示される場合があります。リクエスト。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   The Notify payload is defined as follows:
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Protocol ID  |   SPI Size    |      Notify Message Type      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                Security Parameter Index (SPI)                 ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       Notification Data                       ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 16: Notify Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図16：ペイロード形式に通知します
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Protocol ID (1 octet) - If this notification concerns an existing SA whose SPI is given in the SPI field, this field indicates the type of that SA. For notifications concerning Child SAs, this field MUST contain either (2) to indicate AH or (3) to indicate ESP. Of the notifications defined in this document, the SPI is included only with INVALID_SELECTORS and REKEY_SA. If the SPI field is empty, this field MUST be sent as zero and MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o プロトコルID（1 Octet） - この通知がSPIフィールドにSPIが与えられた既存のSAに関係する場合、このフィールドはそのSAのタイプを示します。子SASに関する通知の場合、このフィールドには（2）AHまたは（3）を示すために（2）を含む必要があります。このドキュメントで定義されている通知のうち、SPIはInvalid_SelectorsとREKEY_SAでのみ含まれています。SPIフィールドが空の場合、このフィールドはゼロとして送信され、受信時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI Size (1 octet) - Length in octets of the SPI as defined by the IPsec protocol ID or zero if no SPI is applicable. For a notification concerning the IKE SA, the SPI Size MUST be zero and the field must be empty.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPIサイズ（1オクテット） -  SPIが適用されない場合は、IPSECプロトコルIDまたはゼロで定義されているSPIのオクテットの長さ。IKE SAに関する通知の場合、SPIサイズはゼロでなければならず、フィールドは空でなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Notify Message Type (2 octets) - Specifies the type of notification message.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 通知メッセージタイプ（2オクテット） - 通知メッセージのタイプを指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI (variable length) - Security Parameter Index.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI（変数長） - セキュリティパラメーターインデックス。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Notification Data (variable length) - Status or error data transmitted in addition to the Notify Message Type. Values for this field are type specific (see below).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 通知データ（変動長） - 通知メッセージタイプに加えて送信されたステータスまたはエラーデータ。このフィールドの値はタイプ固有です（以下を参照）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Notify payload is forty-one (41).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Notifyペイロードのペイロードタイプは41です（41）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-10-1--Notify-Message-Types">
3.10.1. Notify Message Types
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.10.1. メッセージタイプに通知します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Notification information can be error messages specifying why an SA could not be established. It can also be status data that a process managing an SA database wishes to communicate with a peer process.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
通知情報は、SAを確立できなかった理由を指定するエラーメッセージにすることができます。また、SAデータベースを管理するプロセスがピアプロセスとの通信を希望するステータスデータにすることもできます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The table below lists the Notification messages and their corresponding values. The number of different error statuses was greatly reduced from IKEv1 both for simplification and to avoid giving configuration information to probers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
以下の表には、通知メッセージと対応する値を示します。異なるエラーステータスの数は、単純化とプロバーに構成情報を提供することを避けるために、IKEV1から大幅に減少しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Types in the range 0 - 16383 are intended for reporting errors. An implementation receiving a Notify payload with one of these types that it does not recognize in a response MUST assume that the corresponding request has failed entirely. Unrecognized error types in a request and status types in a request or response MUST be ignored, and they should be logged.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
範囲0〜16383のタイプは、エラーの報告を目的としています。応答で認識されないこれらのタイプのいずれかを使用して通知ペイロードを受信する実装は、対応する要求が完全に失敗したと仮定する必要があります。要求またはステータスタイプの認識されていないエラータイプまたは応答は無視する必要があり、記録する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Notify payloads with status types MAY be added to any message and MUST be ignored if not recognized. They are intended to indicate capabilities, and as part of SA negotiation, are used to negotiate non-cryptographic parameters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ステータスタイプのペイロードが任意のメッセージに追加される場合があり、認識されない場合は無視する必要があります。それらは能力を示すことを目的としており、SA交渉の一部として、非暗号化パラメーターの交渉に使用されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
More information on error handling can be found in Section 2.21.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
エラー処理の詳細については、セクション2.21をご覧ください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The values in the following table are only current as of the publication date of RFC 4306, plus two error types added in this document. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の表の値は、RFC 4306の発行日の時点でのみであり、このドキュメントに追加された2つのエラータイプが追加されます。それ以来、他の値が追加されている可能性があります。または、このドキュメントの公開後に追加されます。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
  NOTIFY messages: error types              Value
  -------------------------------------------------------------------
  UNSUPPORTED_CRITICAL_PAYLOAD              1
      See Section 2.5.
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_IKE_SPI 4 See Section 2.21.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_ike_spi 4セクション2.21を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_MAJOR_VERSION 5 See Section 2.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_major_version 5セクション2.5を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_SYNTAX 7 Indicates the IKE message that was received was invalid because some type, length, or value was out of range or because the request was rejected for policy reasons. To avoid a DoS attack using forged messages, this status may only be returned for and in an encrypted packet if the Message ID and cryptographic checksum were valid. To avoid leaking information to someone probing a node, this status MUST be sent in response to any error not covered by one of the other status types. To aid debugging, more detailed error information should be written to a console or log.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_syntax 7は、受信されたIKEメッセージが無効であることを示します。これは、何らかのタイプ、長さ、または価値が範囲外であるか、リクエストがポリシー上の理由で拒否されたためです。偽造メッセージを使用してDOS攻撃を回避するために、このステータスは、メッセージIDと暗号化チェックサムが有効である場合にのみ、暗号化されたパケットに対して、および暗号化されたパケットでのみ返される場合があります。ノードを調査する人への情報の漏れを避けるために、このステータスは、他のステータスタイプのいずれかでカバーされていないエラーに応じて送信する必要があります。デバッグを支援するには、より詳細なエラー情報をコンソールまたはログに書き込む必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_MESSAGE_ID 9 See Section 2.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_message_id 9セクション2.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_SPI 11 See Section 1.5.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_spi 11セクション1.5を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
NO_PROPOSAL_CHOSEN 14 None of the proposed crypto suites was acceptable. This can be sent in any case where the offered proposals (including but not limited to SA payload values, USE_TRANSPORT_MODE notify, IPCOMP_SUPPORTED notify) are not acceptable for the responder. This can also be used as &#34;generic&#34; Child SA error when Child SA cannot be created for some other reason. See also Section 2.7.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
NO_PROPOSAL_CHOSEN 14提案された暗号スイートのいずれも受け入れられませんでした。これは、提供された提案（SAペイロード値を含むがこれらに限定されない、use_transport_mode notify、ipcomp_supported notifyを含む）で送信者に受け入れられない場合に送信できます。これは、他の理由でチャイルドSAを作成できない場合、「ジェネリック」チャイルドSAエラーとしても使用できます。セクション2.7も参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_KE_PAYLOAD 17 See Sections 1.2 and 1.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
invalid_ke_payload 17セクション1.2および1.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
AUTHENTICATION_FAILED 24 Sent in the response to an IKE_AUTH message when, for some reason, the authentication failed. There is no associated data. See also Section 2.21.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Authentication_Failed 24何らかの理由で認証が失敗した場合、IKE_AUTHメッセージへの応答で送信されました。関連するデータはありません。セクション2.21.2も参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
SINGLE_PAIR_REQUIRED 34 See Section 2.9.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
single_pair_required 34セクション2.9を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
NO_ADDITIONAL_SAS 35 See Section 1.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
NO_ADDITIONAL_SAS 35セクション1.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INTERNAL_ADDRESS_FAILURE 36 See Section 3.15.4.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
internal_address_failure 36セクション3.15.4を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
FAILED_CP_REQUIRED 37 See Section 2.19.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Failed_cp_required 37セクション2.19を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
TS_UNACCEPTABLE 38 See Section 2.9.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
TS_UNACTELL 38セクション2.9を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
INVALID_SELECTORS 39 MAY be sent in an IKE INFORMATIONAL exchange when a node receives an ESP or AH packet whose selectors do not match those of the SA on which it was delivered (and that caused the packet to be dropped). The Notification Data contains the start of the offending packet (as in ICMP messages) and the SPI field of the notification is set to match the SPI of the Child SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
Invalid_Selectors 39は、ノードがセレクターが配信されたSAのものと一致しないESPまたはAHパケットを受信した場合、IKE情報交換で送信できます（パケットがドロップされました）。通知データには、問題のあるパケットの開始（ICMPメッセージのように）が含まれており、通知のSPIフィールドには、子SAのSPIと一致するように設定されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
TEMPORARY_FAILURE 43 See section 2.25.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
一時的なfailure 43セクション2.25を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
CHILD_SA_NOT_FOUND 44 See section 2.25.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-2">
child_sa_not_found 44セクション2.25を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   NOTIFY messages: status types            Value
   -------------------------------------------------------------------
   INITIAL_CONTACT                          16384
       See Section 2.4.
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
SET_WINDOW_SIZE 16385 See Section 2.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
set_window_size 16385セクション2.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ADDITIONAL_TS_POSSIBLE 16386 See Section 2.9.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Addational_ts_possible 16386セクション2.9を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPCOMP_SUPPORTED 16387 See Section 2.22.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPComp_Supported 16387セクション2.22を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NAT_DETECTION_SOURCE_IP 16388 See Section 2.23.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
nat_detection_source_ip 16388セクション2.23を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NAT_DETECTION_DESTINATION_IP 16389 See Section 2.23.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
nat_detection_destination_ip 16389セクション2.23を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
COOKIE 16390 See Section 2.6.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Cookie 16390セクション2.6を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
USE_TRANSPORT_MODE 16391 See Section 1.3.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
use_transport_mode 16391セクション1.3.1を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
HTTP_CERT_LOOKUP_SUPPORTED 16392 See Section 3.6.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
http_cert_lookup_supported 16392セクション3.6を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
REKEY_SA 16393 See Section 1.3.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Rekey_sa 16393セクション1.3.3を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ESP_TFC_PADDING_NOT_SUPPORTED 16394 See Section 1.3.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
esp_tfc_padding_not_supported 16394セクション1.3.1を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NON_FIRST_FRAGMENTS_ALSO 16395 See Section 1.3.1.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
non_first_fragments_also 16395セクション1.3.1を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-11--Delete-Payload">
3.11. Delete Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.11. ペイロードを削除します
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Delete payload, denoted D in this document, contains a protocol-specific Security Association identifier that the sender has removed from its Security Association database and is, therefore, no longer valid. Figure 17 shows the format of the Delete payload. It is possible to send multiple SPIs in a Delete payload; however, each SPI MUST be for the same protocol. Mixing of protocol identifiers MUST NOT be performed in the Delete payload. It is permitted, however, to include multiple Delete payloads in a single INFORMATIONAL exchange where each Delete payload lists SPIs for a different protocol.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでDを示した削除ペイロードには、送信者がセキュリティ協会データベースから削除したため、もはや有効ではないプロトコル固有のセキュリティ協会識別子が含まれています。図17は、削除ペイロードの形式を示しています。削除ペイロードに複数のスピスを送信することが可能です。ただし、各SPIは同じプロトコル用でなければなりません。プロトコル識別子のミキシングは、削除ペイロードで実行しないでください。ただし、それぞれの削除ペイロードが異なるプロトコルのSPIを削除する単一の情報交換に複数の削除ペイロードを含めることが許可されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Deletion of the IKE SA is indicated by a protocol ID of 1 (IKE) but no SPIs. Deletion of a Child SA, such as ESP or AH, will contain the IPsec protocol ID of that protocol (2 for AH, 3 for ESP), and the SPI is the SPI the sending endpoint would expect in inbound ESP or AH packets.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE SAの削除は、1（IKE）のプロトコルIDで示されますが、SPIはありません。ESPやAHなどの子SAの削除には、そのプロトコルのIPSECプロトコルIDが含まれます（AHの場合は2、ESPの場合は3）。SPIは、送信エンドポイントがインバウンドESPまたはAHパケットで予想されるSPIです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Delete payload is defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
削除ペイロードは次のように定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Protocol ID   |   SPI Size    |          Num of SPIs          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~               Security Parameter Index(es) (SPI)              ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-15">
Figure 17: Delete Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-15">
図17：ペイロード形式を削除します
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Protocol ID (1 octet) - Must be 1 for an IKE SA, 2 for AH, or 3 for ESP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o プロトコルID（1 Octet） -  IKE SAの場合は1、AHの場合は2、ESPの場合は3でなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPI Size (1 octet) - Length in octets of the SPI as defined by the protocol ID. It MUST be zero for IKE (SPI is in message header) or four for AH and ESP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SPIサイズ（1オクテット） - プロトコルIDで定義されているSPIのオクテットの長さ。IKEの場合はゼロ（SPIはメッセージヘッダーにあります）、またはAHおよびESPの場合は4でなければなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Num of SPIs (2 octets, unsigned integer) - The number of SPIs contained in the Delete payload. The size of each SPI is defined by the SPI Size field.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o スピスの数（2オクテット、符号なし整数） - 削除ペイロードに含まれるスピスの数。各SPIのサイズは、SPIサイズフィールドで定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Security Parameter Index(es) (variable length) - Identifies the specific Security Association(s) to delete. The length of this field is determined by the SPI Size and Num of SPIs fields.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o セキュリティパラメーターインデックス（ES）（可変長） - 削除する特定のセキュリティ協会を識別します。このフィールドの長さは、SPIサイズとSPISフィールドの数によって決定されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Delete payload is forty-two (42).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
削除ペイロードのペイロードタイプは42です（42）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-12--Vendor-ID-Payload">
3.12. Vendor ID Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.12. ベンダーIDペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Vendor ID payload, denoted V in this document, contains a vendor-defined constant. The constant is used by vendors to identify and recognize remote instances of their implementations. This mechanism allows a vendor to experiment with new features while maintaining backward compatibility.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでVと表示されるベンダーIDペイロードには、ベンダー定義の定数が含まれています。定数は、ベンダーが実装のリモートインスタンスを特定して認識するために使用されます。このメカニズムにより、ベンダーは後方互換性を維持しながら、新しい機能を実験することができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Vendor ID payload MAY announce that the sender is capable of accepting certain extensions to the protocol, or it MAY simply identify the implementation as an aid in debugging. A Vendor ID payload MUST NOT change the interpretation of any information defined in this specification (i.e., the critical bit MUST be set to 0). Multiple Vendor ID payloads MAY be sent. An implementation is not required to send any Vendor ID payload at all.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ベンダーIDペイロードは、送信者が特定の拡張機能をプロトコルに受け入れることができることを発表する場合や、デバッグの支援として実装を単に特定することができます。ベンダーIDペイロードは、この仕様で定義されている情報の解釈を変更してはなりません（つまり、批判的ビットを0に設定する必要があります）。複数のベンダーIDペイロードを送信できます。ベンダーIDペイロードをまったく送信するために実装は必要ありません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A Vendor ID payload may be sent as part of any message. Reception of a familiar Vendor ID payload allows an implementation to make use of private use numbers described throughout this document, such as private payloads, private exchanges, private notifications, etc. Unfamiliar Vendor IDs MUST be ignored.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ベンダーIDペイロードは、メッセージの一部として送信される場合があります。おなじみのベンダーIDペイロードの受信により、プライベートペイロード、プライベート交換、プライベート通知など、このドキュメント全体で説明されているプライベート使用番号を実装できます。なじみのないベンダーIDは無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Writers of documents who wish to extend this protocol MUST define a Vendor ID payload to announce the ability to implement the extension in the document. It is expected that documents that gain acceptance and are standardized will be given &#34;magic numbers&#34; out of the Future Use range by IANA, and the requirement to use a Vendor ID will go away.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このプロトコルを拡張したいドキュメントの作家は、ベンダーIDペイロードを定義して、ドキュメントに拡張機能を実装する機能を発表する必要があります。受け入れを獲得し、標準化された文書には、IANAによって将来の使用範囲から「マジック番号」が与えられ、ベンダーIDを使用するための要件はなくなります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Vendor ID payload fields are defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ベンダーIDペイロードフィールドは、次のように定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                        Vendor ID (VID)                        ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
Figure 18: Vendor ID Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-14">
図18：ベンダーIDペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Vendor ID (variable length) - It is the responsibility of the person choosing the Vendor ID to assure its uniqueness in spite of the absence of any central registry for IDs. Good practice is to include a company name, a person name, or some such information. If you want to show off, you might include the latitude and longitude and time where you were when you chose the ID and some random input. A message digest of a long unique string is preferable to the long unique string itself.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ベンダーID（変動長） -  IDSの中央レジストリがないにもかかわらず、ベンダーIDを選択する人の責任です。良い実践は、会社名、個人名、またはそのような情報を含めることです。誇示したい場合は、IDを選択したときの緯度と経度、時間を含めることができます。長い一意の文字列のメッセージダイジェストは、長い一意の文字列自体よりも望ましいです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Vendor ID payload is forty-three (43).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ベンダーIDペイロードのペイロードタイプは43（43）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-13--Traffic-Selector-Payload">
3.13. Traffic Selector Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.13. トラフィックセレクターペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Traffic Selector payload, denoted TS in this document, allows peers to identify packet flows for processing by IPsec security services. The Traffic Selector payload consists of the IKE generic payload header followed by individual Traffic Selectors as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでTSを示したトラフィックセレクターのペイロードにより、ピアはIPSECセキュリティサービスによる処理のためのパケットフローを特定できます。トラフィックセレクターのペイロードは、次のように、IKEジェネリックペイロードヘッダーと個々のトラフィックセレクターが続きます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Number of TSs |                 RESERVED                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       &lt;Traffic Selectors&gt;                     ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 19: Traffic Selectors Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図19：トラフィックセレクターペイロードフォーマット
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Number of TSs (1 octet) - Number of Traffic Selectors being provided.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o TSSの数（1オクテット） - 提供されるトラフィックセレクターの数。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED - This field MUST be sent as zero and MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約 - このフィールドはゼロとして送信する必要があり、受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Traffic Selectors (variable length) - One or more individual Traffic Selectors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o トラフィックセレクター（可変長） -  1つ以上の個別のトラフィックセレクター。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The length of the Traffic Selector payload includes the TS header and all the Traffic Selectors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックセレクターのペイロードの長さには、TSヘッダーとすべてのトラフィックセレクターが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Traffic Selector payload is forty-four (44) for addresses at the initiator&#39;s end of the SA and forty-five (45) for addresses at the responder&#39;s end.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックセレクターのペイロードのペイロードタイプは、SAのイニシエーターエンドのアドレスの44（44）、レスポンダーの端でのアドレスの45（45）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There is no requirement that TSi and TSr contain the same number of individual Traffic Selectors. Thus, they are interpreted as follows: a packet matches a given TSi/TSr if it matches at least one of the individual selectors in TSi, and at least one of the individual selectors in TSr.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
TSIとTSRには、同じ数の個々のトラフィックセレクターが含まれているという要件はありません。したがって、それらは次のように解釈されます：パケットは、TSIの個々のセレクターの少なくとも1つと一致する場合、特定のTSI/TSRと一致します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For instance, the following Traffic Selectors:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
たとえば、次のトラフィックセレクター：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   TSi = ((17, 100, 198.51.100.66-198.51.100.66),
          (17, 200, 198.51.100.66-198.51.100.66))
   TSr = ((17, 300, 0.0.0.0-255.255.255.255),
          (17, 400, 0.0.0.0-255.255.255.255))
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
would match UDP packets from 198.51.100.66 to anywhere, with any of the four combinations of source/destination ports (100,300), (100,400), (200,300), and (200, 400).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
UDPパケットは、198.51.100.66からどこにでも一致し、ソース/宛先ポート（100,300）、（100,400）、（200,300）、および（200、400）の4つの組み合わせのいずれかと一致します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Thus, some types of policies may require several Child SA pairs. For instance, a policy matching only source/destination ports (100,300) and (200,400), but not the other two combinations, cannot be negotiated as a single Child SA pair.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
したがって、いくつかのタイプのポリシーには、いくつかの子SAペアが必要になる場合があります。たとえば、他の2つの組み合わせではなく、ソース/宛先ポート（100,300）と（200,400）のみを一致させるポリシーは、単一の子SAペアとして交渉することはできません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-13-1--Traffic-Selector">
3.13.1. Traffic Selector
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.13.1. トラフィックセレクター
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   TS Type     |IP Protocol ID*|       Selector Length         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Start Port*         |           End Port*           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                         Starting Address*                     ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                         Ending Address*                       ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-15">
Figure 20: Traffic Selector
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-15">
図20：トラフィックセレクター
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
*Note: All fields other than TS Type and Selector Length depend on the TS Type. The fields shown are for TS Types 7 and 8, the only two values currently defined.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
*注：TSタイプとセレクターの長さ以外のすべてのフィールドは、TSタイプに依存します。表示されているフィールドは、TSタイプ7および8のもので、現在定義されている2つの値のみです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o TS Type (one octet) - Specifies the type of Traffic Selector.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o TSタイプ（One Octet） - トラフィックセレクターのタイプを指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IP protocol ID (1 octet) - Value specifying an associated IP protocol ID (such as UDP, TCP, and ICMP). A value of zero means that the protocol ID is not relevant to this Traffic Selector -- the SA can carry all protocols.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IPプロトコルID（1 Octet） - 関連するIPプロトコルID（UDP、TCP、ICMPなど）を指定する値。ゼロの値は、プロトコルIDがこのトラフィックセレクターに関連していないことを意味します -  SAはすべてのプロトコルを運ぶことができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Selector Length - Specifies the length of this Traffic Selector substructure including the header.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o セレクターの長さ - ヘッダーを含むこのトラフィックセレクターの下部構造の長さを指定します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Start Port (2 octets, unsigned integer) - Value specifying the smallest port number allowed by this Traffic Selector. For protocols for which port is undefined (including protocol 0), or if all ports are allowed, this field MUST be zero. ICMP and ICMPv6 Type and Code values, as well as Mobile IP version 6 (MIPv6) mobility header (MH) Type values, are represented in this field as specified in Section 4.4.1.1 of [IPSECARCH]. ICMP Type and Code values are treated as a single 16-bit integer port number, with Type in the most significant eight bits and Code in the least significant eight bits. MIPv6 MH Type values are treated as a single 16-bit integer port number, with Type in the most significant eight bits and the least significant eight bits set to zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 開始ポート（2オクテット、符号なし整数） - このトラフィックセレクターで許可されている最小のポート番号を指定する値。ポートが未定義のプロトコル（プロトコル0を含む）、またはすべてのポートが許可されている場合、このフィールドはゼロでなければなりません。ICMPおよびICMPV6タイプとコード値、およびモバイルIPバージョン6（MIPV6）モビリティヘッダー（MH）タイプ値は、[IPSECARCH]のセクション4.4.1.1で指定されているように、このフィールドで表されます。ICMPタイプとコード値は、単一の16ビット整数ポート番号として扱われ、タイプは最も重要な8ビットで、コードは最も重要な8ビットでコードです。MIPV6 MHタイプの値は、単一の16ビット整数ポート番号として扱われ、最も重要な8ビットでタイプがゼロに設定されていない最低8ビットがあります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o End Port (2 octets, unsigned integer) - Value specifying the largest port number allowed by this Traffic Selector. For protocols for which port is undefined (including protocol 0), or if all ports are allowed, this field MUST be 65535. ICMP and ICMPv6 Type and Code values, as well as MIPv6 MH Type values, are represented in this field as specified in Section 4.4.1.1 of [IPSECARCH]. ICMP Type and Code values are treated as a single 16-bit integer port number, with Type in the most significant eight bits and Code in the least significant eight bits. MIPv6 MH Type values are treated as a single 16-bit integer port number, with Type in the most significant eight bits and the least significant eight bits set to zero.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o エンドポート（2オクテット、符号なし整数） - このトラフィックセレクターで許可されている最大のポート番号を指定する値。ポートが定義されていないプロトコル（プロトコル0を含む）、またはすべてのポートが許可されている場合、このフィールドは65535でなければなりません。ICMPおよびICMPV6タイプとコード値、およびMIPV6 MHタイプの値は、このフィールドで指定されたこのフィールドに表されています。[Ipsecarch]のセクション4.4.1.1。ICMPタイプとコード値は、単一の16ビット整数ポート番号として扱われ、タイプは最も重要な8ビットで、コードは最も重要な8ビットでコードです。MIPV6 MHタイプの値は、単一の16ビット整数ポート番号として扱われ、最も重要な8ビットでタイプがゼロに設定されていない最低8ビットがあります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Starting Address - The smallest address included in this Traffic Selector (length determined by TS Type).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 開始アドレス - このトラフィックセレクターに含まれる最小のアドレス（TSタイプで決定される長さ）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ending Address - The largest address included in this Traffic Selector (length determined by TS Type).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 終了アドレス - このトラフィックセレクターに含まれる最大のアドレス（TSタイプで決定される長さ）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Systems that are complying with [IPSECARCH] that wish to indicate &#34;ANY&#34; ports MUST set the start port to 0 and the end port to 65535; note that according to [IPSECARCH], &#34;ANY&#34; includes &#34;OPAQUE&#34;. Systems working with [IPSECARCH] that wish to indicate &#34;OPAQUE&#34; ports, but not &#34;ANY&#34; ports, MUST set the start port to 65535 and the end port to 0.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[任意の]ポートを示したい[Ipsecarch]に準拠しているシステムは、開始ポートを0に、エンドポートを65535に設定する必要があります。[Ipsecarch]によれば、「任意の「不透明」には「任意の」に含まれることに注意してください。[任意の]ポートではなく「不透明」ポートを示したい[Ipsecarch]で動作するシステムは、開始ポートを65535に、エンドポートを0に設定する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Traffic Selector types 7 and 8 can also refer to ICMP or ICMPv6 type and code fields, as well as MH Type fields for the IPv6 mobility header [MIPV6]. Note, however, that neither ICMP nor MIPv6 packets have separate source and destination fields. The method for specifying the Traffic Selectors for ICMP and MIPv6 is shown by example in Section 4.4.1.3 of [IPSECARCH].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
トラフィックセレクターのタイプ7および8は、ICMPまたはICMPV6タイプおよびコードフィールド、ならびにIPv6モビリティヘッダー[MIPV6]のMHタイプフィールドを参照することもできます。ただし、ICMPもMipv6パケットも個別のソースと宛先フィールドを持たないことに注意してください。ICMPおよびMIPV6のトラフィックセレクターを指定する方法は、[IPSECARCH]のセクション4.4.1.3の例で示されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The following table lists values for the Traffic Selector Type field and the corresponding Address Selector Data. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の表には、トラフィックセレクタータイプフィールドと対応するアドレスセレクターデータの値が示されています。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   TS Type                            Value
   -------------------------------------------------------------------
   TS_IPV4_ADDR_RANGE                  7
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
A range of IPv4 addresses, represented by two four-octet values. The first value is the beginning IPv4 address (inclusive) and the second value is the ending IPv4 address (inclusive). All addresses falling between the two specified addresses are considered to be within the list.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
2つの4オクテット値で表されるIPv4アドレスの範囲。最初の値は開始IPv4アドレス（包括的）で、2番目の値は終了IPv4アドレス（包括的）です。指定された2つのアドレスの間にあるすべてのアドレスは、リスト内にあると見なされます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
TS_IPV6_ADDR_RANGE 8
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
TS_IPV6_ADDR_RANGE 8
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
A range of IPv6 addresses, represented by two sixteen-octet values. The first value is the beginning IPv6 address (inclusive) and the second value is the ending IPv6 address (inclusive). All addresses falling between the two specified addresses are considered to be within the list.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-7">
2つの16-OCTET値で表されるIPv6アドレスの範囲。最初の値は開始IPv6アドレス（包括的）で、2番目の値は終了IPv6アドレス（包括的）です。指定された2つのアドレスの間にあるすべてのアドレスは、リスト内にあると見なされます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-14--Encrypted-Payload">
3.14. Encrypted Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.14. 暗号化されたペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Encrypted payload, denoted SK{...} in this document, contains other payloads in encrypted form. The Encrypted payload, if present in a message, MUST be the last payload in the message. Often, it is the only payload in the message. This payload is also called the &#34;Encrypted and Authenticated&#34; payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
暗号化されたペイロードは、このドキュメントでSK {...}と表示されており、暗号化された形式の他のペイロードが含まれています。暗号化されたペイロードは、メッセージに存在する場合、メッセージの最後のペイロードでなければなりません。多くの場合、メッセージ内の唯一のペイロードです。このペイロードは、「暗号化および認証された」ペイロードとも呼ばれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The algorithms for encryption and integrity protection are negotiated during IKE SA setup, and the keys are computed as specified in Sections 2.14 and 2.18.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
暗号化と整合性保護のアルゴリズムは、IKE SAセットアップ中にネゴシエートされ、キーはセクション2.14および2.18で指定されているように計算されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document specifies the cryptographic processing of Encrypted payloads using a block cipher in CBC mode and an integrity check algorithm that computes a fixed-length checksum over a variable size message. The design is modeled after the ESP algorithms described in RFCs 2104 [HMAC], 4303 [ESP], and 2451 [ESPCBC]. This document completely specifies the cryptographic processing of IKE data, but those documents should be consulted for design rationale. Future documents may specify the processing of Encrypted payloads for other types of transforms, such as counter mode encryption and authenticated encryption algorithms. Peers MUST NOT negotiate transforms for which no such specification exists.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、CBCモードのブロック暗号を使用して、暗号化されたペイロードの暗号化処理と、可変サイズメッセージで固定長のチェックサムを計算する整合性チェックアルゴリズムを指定します。この設計は、RFCS 2104 [HMAC]、4303 [ESP]、および2451 [ESPCBC]で説明されているESPアルゴリズムの後にモデル化されています。このドキュメントは、IKEデータの暗号化処理を完全に指定していますが、これらのドキュメントはDesignの根拠のために参照する必要があります。将来のドキュメントでは、カウンターモード暗号化や認証された暗号化アルゴリズムなど、他のタイプの変換に対する暗号化されたペイロードの処理を指定する場合があります。ピアは、そのような仕様が存在しない変革を交渉してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When an authenticated encryption algorithm is used to protect the IKE SA, the construction of the Encrypted payload is different than what is described here. See [AEAD] for more information on authenticated encryption algorithms and their use in ESP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
認証された暗号化アルゴリズムを使用してIKE SAを保護する場合、暗号化されたペイロードの構築は、ここで説明されているものとは異なります。認証された暗号化アルゴリズムとESPでの使用の詳細については、[AEAD]を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for an Encrypted payload is forty-six (46). The Encrypted payload consists of the IKE generic payload header followed by individual fields as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
暗号化されたペイロードのペイロードタイプは46（46）です。暗号化されたペイロードは、次のように個々のフィールドが続くIKEジェネリックペイロードヘッダーで構成されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Initialization Vector                     |
   |         (length is block size for encryption algorithm)       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                    Encrypted IKE Payloads                     ~
   +               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               |             Padding (0-255 octets)            |
   +-+-+-+-+-+-+-+-+                               +-+-+-+-+-+-+-+-+
   |                                               |  Pad Length   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                    Integrity Checksum Data                    ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 21: Encrypted Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図21：暗号化されたペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Next Payload - The payload type of the first embedded payload. Note that this is an exception in the standard header format, since the Encrypted payload is the last payload in the message and therefore the Next Payload field would normally be zero. But because the content of this payload is embedded payloads and there was no natural place to put the type of the first one, that type is placed here.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 次のペイロード - 最初の埋め込みペイロードのペイロードタイプ。暗号化されたペイロードはメッセージの最後のペイロードであり、したがって次のペイロードフィールドは通常ゼロになるため、これは標準ヘッダー形式の例外であることに注意してください。しかし、このペイロードのコンテンツは埋め込まれたペイロードであり、最初のペイロードのタイプを置く自然な場所がなかったため、そのタイプはここに配置されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Payload Length - Includes the lengths of the header, initialization vector (IV), Encrypted IKE payloads, Padding, Pad Length, and Integrity Checksum Data.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ペイロードの長さ - ヘッダーの長さ、初期化ベクトル（IV）、暗号化されたIKEペイロード、パディング、パッドの長さ、および完全性チェックサムデータが含まれます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Initialization Vector - For CBC mode ciphers, the length of the initialization vector (IV) is equal to the block length of the underlying encryption algorithm. Senders MUST select a new unpredictable IV for every message; recipients MUST accept any value. The reader is encouraged to consult [MODES] for advice on IV generation. In particular, using the final ciphertext block of the previous message is not considered unpredictable. For modes other than CBC, the IV format and processing is specified in the document specifying the encryption algorithm and mode.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 初期化ベクトル-CBCモード暗号の場合、初期化ベクトル（IV）の長さは、基礎となる暗号化アルゴリズムのブロック長に等しくなります。送信者は、すべてのメッセージに対して新しい予測不可能なIVを選択する必要があります。受信者はあらゆる価値を受け入れる必要があります。読者は、IV生成に関するアドバイスについて[モード]を参照することをお勧めします。特に、前のメッセージの最終的な暗号文ブロックを使用することは、予測不可能とは見なされません。CBC以外のモードの場合、IV形式と処理は、暗号化アルゴリズムとモードを指定するドキュメントで指定されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IKE payloads are as specified earlier in this section. This field is encrypted with the negotiated cipher.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IKEペイロードは、このセクションで前述したとおりです。このフィールドは、交渉された暗号で暗号化されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Padding MAY contain any value chosen by the sender, and MUST have a length that makes the combination of the payloads, the Padding, and the Pad Length to be a multiple of the encryption block size. This field is encrypted with the negotiated cipher.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o パディングには、送信者が選択した値が含まれている場合があり、ペイロード、パディング、およびパッドの長さの組み合わせを暗号化ブロックサイズの倍数にする長さが必要です。このフィールドは、交渉された暗号で暗号化されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Pad Length is the length of the Padding field. The sender SHOULD set the Pad Length to the minimum value that makes the combination of the payloads, the Padding, and the Pad Length a multiple of the block size, but the recipient MUST accept any length that results in proper alignment. This field is encrypted with the negotiated cipher.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o パッドの長さは、パディングフィールドの長さです。送信者は、ペイロード、パディング、およびパッドの長さをブロックサイズの倍数にする最小値にパッドの長さを設定する必要がありますが、受信者は適切なアライメントをもたらす任意の長さを受け入れる必要があります。このフィールドは、交渉された暗号で暗号化されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Integrity Checksum Data is the cryptographic checksum of the entire message starting with the Fixed IKE header through the Pad Length. The checksum MUST be computed over the encrypted message. Its length is determined by the integrity algorithm negotiated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 整合性チェックサムデータは、パッドの長さを介した固定IKEヘッダーから始まるメッセージ全体の暗号化チェックサムです。チェックサムは、暗号化されたメッセージを介して計算する必要があります。その長さは、ネゴシエートされた整合性アルゴリズムによって決定されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-15--Configuration-Payload">
3.15. Configuration Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.15. 構成ペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Configuration payload, denoted CP in this document, is used to exchange configuration information between IKE peers. The exchange is for an IRAC to request an internal IP address from an IRAS and to exchange other information of the sort that one would acquire with Dynamic Host Configuration Protocol (DHCP) if the IRAC were directly connected to a LAN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでCPと表示される構成ペイロードは、IKEピア間で構成情報を交換するために使用されます。Exchangeは、IRACがLANに直接接続されている場合、IRASから内部IPアドレスを要求し、動的ホスト構成プロトコル（DHCP）で取得する種類の他の情報を交換することです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Configuration payload is defined as follows:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
構成ペイロードは次のように定義されます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C| RESERVED    |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   CFG Type    |                    RESERVED                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                   Configuration Attributes                    ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 22: Configuration Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図22：構成ペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for the Configuration payload is forty-seven (47).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
構成ペイロードのペイロードタイプは47（47）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o CFG Type (1 octet) - The type of exchange represented by the Configuration Attributes. The values in the following table are only current as of the publication date of RFC 4306. Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o CFGタイプ（1オクテット） - 構成属性で表される交換のタイプ。次の表の値は、RFC 4306の公開日の時点でのみ最新です。それ以降、その他の値が追加されるか、このドキュメントの公開後に追加される可能性があります。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      CFG Type           Value
      --------------------------
      CFG_REQUEST        1
      CFG_REPLY          2
      CFG_SET            3
      CFG_ACK            4
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o RESERVED (3 octets) - MUST be sent as zero; MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約済み（3オクテット） - ゼロとして送信する必要があります。受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Configuration Attributes (variable length) - These are type length value (TLV) structures specific to the Configuration payload and are defined below. There may be zero or more Configuration Attributes in this payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 構成属性（可変長） - これらは、構成ペイロードに固有のタイプ長値（TLV）構造であり、以下に定義されています。このペイロードには、ゼロ以上の構成属性がある場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-15-1--Configuration-Attributes">
3.15.1. Configuration Attributes
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.15.1. 構成属性
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |R|         Attribute Type      |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                             Value                             ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
Figure 23: Configuration Attribute Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-12">
図23：構成属性形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Reserved (1 bit) - This bit MUST be set to zero and MUST be ignored on receipt.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 予約済み（1ビット） - このビットはゼロに設定する必要があり、受領時に無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Attribute Type (15 bits) - A unique identifier for each of the Configuration Attribute Types.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 属性タイプ（15ビット） - 構成属性タイプごとに一意の識別子。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Length (2 octets, unsigned integer) - Length in octets of value.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 長さ（2オクテット、符号なし整数） - 値のオクテットの長さ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Value (0 or more octets) - The variable-length value of this Configuration Attribute. The following lists the attribute types.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 値（0以上のオクテット） - この構成属性の変数長値。以下には、属性タイプがリストされています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The values in the following table are only current as of the publication date of RFC 4306 (except INTERNAL_ADDRESS_EXPIRY and INTERNAL_IP6_NBNS which were removed by this document). Other values may have been added since then or will be added after the publication of this document. Readers should refer to [IKEV2IANA] for the latest values.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次の表の値は、RFC 4306の公開日の時点でのみ最新です（このドキュメントで削除されたInternal_address_expiryおよびinternal_ip6_nbnsを除く）。それ以来、他の値が追加されている可能性があります。または、このドキュメントの公開後に追加されます。読者は、最新の値については[ikev2iana]を参照する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
      Attribute Type           Value  Multi-Valued  Length
      ------------------------------------------------------------
      INTERNAL_IP4_ADDRESS     1      YES*          0 or 4 octets
      INTERNAL_IP4_NETMASK     2      NO            0 or 4 octets
      INTERNAL_IP4_DNS         3      YES           0 or 4 octets
      INTERNAL_IP4_NBNS        4      YES           0 or 4 octets
      INTERNAL_IP4_DHCP        6      YES           0 or 4 octets
      APPLICATION_VERSION      7      NO            0 or more
      INTERNAL_IP6_ADDRESS     8      YES*          0 or 17 octets
      INTERNAL_IP6_DNS         10     YES           0 or 16 octets
      INTERNAL_IP6_DHCP        12     YES           0 or 16 octets
      INTERNAL_IP4_SUBNET      13     YES           0 or 8 octets
      SUPPORTED_ATTRIBUTES     14     NO            Multiple of 2
      INTERNAL_IP6_SUBNET      15     YES           17 octets
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* These attributes may be multi-valued on return only if multiple values were requested.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-6">
* これらの属性は、複数の値が要求された場合にのみ、返品時にマルチ値を付けることができます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_ADDRESS, INTERNAL_IP6_ADDRESS - An address on the internal network, sometimes called a red node address or private address, and it MAY be a private address on the Internet. In a request message, the address specified is a requested address (or a zero-length address if no specific address is requested). If a specific address is requested, it likely indicates that a previous connection existed with this address and the requestor would like to reuse that address. With IPv6, a requestor MAY supply the low-order address octets it wants to use. Multiple internal addresses MAY be requested by requesting multiple internal address attributes. The responder MAY only send up to the number of addresses requested. The INTERNAL_IP6_ADDRESS is made up of two fields: the first is a 16-octet IPv6 address, and the second is a one-octet prefix-length as defined in [ADDRIPV6]. The requested address is valid as long as this IKE SA (or its rekeyed successors) requesting the address is valid. This is described in more detail in Section 3.15.3.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_address、internal_ip6_address-レッドノードアドレスまたはプライベートアドレスと呼ばれる内部ネットワーク上のアドレスであり、インターネット上のプライベートアドレスである可能性があります。要求メッセージでは、指定されたアドレスは要求されたアドレス（または特定のアドレスが要求されていない場合はゼロ長さのアドレス）です。特定のアドレスが要求された場合、これはこのアドレスに以前の接続が存在し、リクエスタがそのアドレスを再利用したいことを示す可能性があります。IPv6を使用すると、要求者は使用したい低注文アドレスオクテットを提供できます。複数の内部アドレス属性を要求することにより、複数の内部アドレスが要求される場合があります。レスポンダーは、要求されたアドレスの数にのみ送信できます。internal_ip6_addressは2つのフィールドで構成されています。1つ目は16オクテットのIPv6アドレスで、2つ目は[addRipv6]で定義されている1オクテットのプレフィックス長です。要求された住所は、住所を要求するこのIKE SA（またはその再キー付き後継者）が有効である限り有効です。これについては、セクション3.15.3で詳しく説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_NETMASK - The internal network&#39;s netmask. Only one netmask is allowed in the request and response messages (e.g., 255.255.255.0), and it MUST be used only with an INTERNAL_IP4_ADDRESS attribute. INTERNAL_IP4_NETMASK in a CFG_REPLY means roughly the same thing as INTERNAL_IP4_SUBNET containing the same information (&#34;send traffic to these addresses through me&#34;), but also implies a link boundary. For instance, the client could use its own address and the netmask to calculate the broadcast address of the link. An empty INTERNAL_IP4_NETMASK attribute can be included in a CFG_REQUEST to request this information (although the gateway can send the information even when not requested). Non-empty values for this attribute in a CFG_REQUEST do not make sense and thus MUST NOT be included.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_netmask-内部ネットワークのネットマスク。リクエストと応答メッセージ（例：255.255.255.0）で1つのネットマスクのみが許可されており、内部_IP4_Address属性でのみ使用する必要があります。CFG_REPLYのInternal_IP4_NETMASKは、同じ情報を含む内部_IP4_SUBNETとほぼ同じことを意味します（「私を通してこれらのアドレスにトラフィックを送信する」）が、リンクの境界も意味します。たとえば、クライアントは独自のアドレスとネットマスクを使用して、リンクのブロードキャストアドレスを計算できます。空のinternal_ip4_netmask属性をCFG_REQUESTに含めてこの情報を要求できます（ただし、ゲートウェイは要求されていない場合でも情報を送信できます）。CFG_REQUESTのこの属性の非空白の値は意味をなさないため、含めてはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_DNS, INTERNAL_IP6_DNS - Specifies an address of a DNS server within the network. Multiple DNS servers MAY be requested. The responder MAY respond with zero or more DNS server attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_dns、internal_ip6_dns-ネットワーク内のDNSサーバーのアドレスを指定します。複数のDNSサーバーが要求される場合があります。レスポンダーは、ゼロ以上のDNSサーバー属性で応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_NBNS - Specifies an address of a NetBios Name Server (WINS) within the network. Multiple NBNS servers MAY be requested. The responder MAY respond with zero or more NBNS server attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_nbns-ネットワーク内のnetbios name server（wins）のアドレスを指定します。複数のNBNSサーバーが要求される場合があります。レスポンダーは、ゼロ以上のNBNSサーバー属性で応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_DHCP, INTERNAL_IP6_DHCP - Instructs the host to send any internal DHCP requests to the address contained within the attribute. Multiple DHCP servers MAY be requested. The responder MAY respond with zero or more DHCP server attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_dhcp、internal_ip6_dhcp-属性内に含まれるアドレスに内部DHCPリクエストを送信するようにホストに指示します。複数のDHCPサーバーが要求される場合があります。レスポンダーは、ゼロ以上のDHCPサーバー属性で応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o APPLICATION_VERSION - The version or application information of the IPsec host. This is a string of printable ASCII characters that is NOT null terminated.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Application_version -IPSECホストのバージョンまたはアプリケーション情報。これは、ヌル終了ではない印刷可能なASCII文字の文字列です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP4_SUBNET - The protected sub-networks that this edge-device protects. This attribute is made up of two fields: the first being an IP address and the second being a netmask. Multiple sub-networks MAY be requested. The responder MAY respond with zero or more sub-network attributes. This is discussed in more detail in Section 3.15.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip4_subnet-このエッジデバイスが保護する保護されたサブネットワーク。この属性は、2つのフィールドで構成されています。1つ目はIPアドレスであり、2つ目はネットマスクです。複数のサブネットワークが要求される場合があります。レスポンダーは、ゼロ以上のサブネットワーク属性で応答する場合があります。これについては、セクション3.15.2で詳しく説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SUPPORTED_ATTRIBUTES - When used within a Request, this attribute MUST be zero-length and specifies a query to the responder to reply back with all of the attributes that it supports. The response contains an attribute that contains a set of attribute identifiers each in 2 octets. The length divided by 2 (octets) would state the number of supported attributes contained in the response.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o supported_attributes-リクエスト内で使用する場合、この属性はゼロ長である必要があり、サポートするすべての属性を返信するために応答者にクエリを指定する必要があります。応答には、それぞれ2オクテットの属性識別子のセットを含む属性が含まれています。2（オクテット）で割った長さは、応答に含まれるサポートされている属性の数を記載します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o INTERNAL_IP6_SUBNET - The protected sub-networks that this edge-device protects. This attribute is made up of two fields: the first is a 16-octet IPv6 address, and the second is a one-octet prefix-length as defined in [ADDRIPV6]. Multiple sub-networks MAY be requested. The responder MAY respond with zero or more sub-network attributes. This is discussed in more detail in Section 3.15.2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o internal_ip6_subnet-このエッジデバイスが保護する保護されたサブネットワーク。この属性は2つのフィールドで構成されています。1つ目は16オクテットのIPv6アドレスで、2つ目は[addRipv6]で定義されている1オクテットのプレフィックス長です。複数のサブネットワークが要求される場合があります。レスポンダーは、ゼロ以上のサブネットワーク属性で応答する場合があります。これについては、セクション3.15.2で詳しく説明します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that no recommendations are made in this document as to how an implementation actually figures out what information to send in a response. That is, we do not recommend any specific method of an IRAS determining which DNS server should be returned to a requesting IRAC.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでは、実装が実際にどの情報を返信するかを実際に把握する方法については、推奨事項は作成されていないことに注意してください。つまり、どのDNSサーバーを要求IRACに戻すべきかを決定するIRAの特定の方法を推奨しません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CFG_REQUEST and CFG_REPLY pair allows an IKE endpoint to request information from its peer. If an attribute in the CFG_REQUEST Configuration payload is not zero-length, it is taken as a suggestion for that attribute. The CFG_REPLY Configuration payload MAY return that value, or a new one. It MAY also add new attributes and not include some requested ones. Unrecognized or unsupported attributes MUST be ignored in both requests and responses.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CFG_REQUESTとCFG_REPLYペアにより、IKEエンドポイントがピアから情報を要求できます。CFG_REQUEST構成のペイロードの属性がゼロ長でない場合、それはその属性の提案としてとられます。CFG_REPLY構成のペイロードは、その値、または新しい値を返す場合があります。また、新しい属性を追加し、要求された属性を含めない場合があります。リクエストと応答の両方で、認識されていないまたはサポートされていない属性を無視する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The CFG_SET and CFG_ACK pair allows an IKE endpoint to push configuration data to its peer. In this case, the CFG_SET Configuration payload contains attributes the initiator wants its peer to alter. The responder MUST return a Configuration payload if it accepted any of the configuration data and it MUST contain the attributes that the responder accepted with zero-length data. Those attributes that it did not accept MUST NOT be in the CFG_ACK Configuration payload. If no attributes were accepted, the responder MUST return either an empty CFG_ACK payload or a response message without a CFG_ACK payload. There are currently no defined uses for the CFG_SET/CFG_ACK exchange, though they may be used in connection with extensions based on Vendor IDs. An implementation of this specification MAY ignore CFG_SET payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CFG_SETおよびCFG_ACKペアにより、IKEエンドポイントが構成データをピアにプッシュすることができます。この場合、CFG_SET構成のペイロードには、イニシエーターがピアに変更したい属性が含まれます。レスポンダーは、構成データのいずれかを受け入れ、レスポンダーがゼロ長データで受け入れた属性を含める必要がある場合、構成ペイロードを返す必要があります。受け入れなかったこれらの属性は、CFG_ACK構成のペイロードにある必要があります。属性が受け入れられない場合、レスポンダーは空のCFG_ACKペイロードまたはCFG_ACKペイロードなしで応答メッセージを返す必要があります。現在、CFG_SET/CFG_ACK Exchangeの定義された使用はありませんが、ベンダーIDに基づいた拡張機能に関連して使用できます。この仕様の実装では、CFG_SETペイロードが無視される場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-15-2--Meaning-of-INTERNALIP4SUBNET-and-INTERNALIP6SUBNET">
3.15.2. Meaning of INTERNAL_IP4_SUBNET and INTERNAL_IP6_SUBNET
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.15.2. internal_ip4_subnetおよびinternal_ip6_subnetの意味
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
INTERNAL_IP4/6_SUBNET attributes can indicate additional subnets, ones that need one or more separate SAs, that can be reached through the gateway that announces the attributes. INTERNAL_IP4/6_SUBNET attributes may also express the gateway&#39;s policy about what traffic should be sent through the gateway; the client can choose whether other traffic (covered by TSr, but not in INTERNAL_IP4/6_SUBNET) is sent through the gateway or directly to the destination. Thus, traffic to the addresses listed in the INTERNAL_IP4/6_SUBNET attributes should be sent through the gateway that announces the attributes. If there are no existing Child SAs whose Traffic Selectors cover the address in question, new SAs need to be created.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
internal_ip4/6_subnet属性は、属性を発表するゲートウェイから到達できる1つ以上の個別のSASを必要とする追加のサブネットを示すことができます。internal_ip4/6_subnet属性は、ゲートウェイを介して送信するトラフィックに関するゲートウェイのポリシーを表現することもできます。クライアントは、他のトラフィック（TSRでカバーされているが、内部_IP4/6_Subnetではなく）を選択できます。したがって、internal_ip4/6_subnet属性にリストされているアドレスへのトラフィックは、属性を発表するゲートウェイを介して送信する必要があります。トラフィックセレクターが問題の住所をカバーする既存の子SASがない場合、新しいSAを作成する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For instance, if there are two subnets, 198.51.100.0/26 and 192.0.2.0/24, and the client&#39;s request contains the following:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
たとえば、198.51.100.0/26と192.0.2.0/24の2つのサブネットがある場合、クライアントの要求には次のものが含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REQUEST) =
     INTERNAL_IP4_ADDRESS()
   TSi = (0, 0-65535, 0.0.0.0-255.255.255.255)
   TSr = (0, 0-65535, 0.0.0.0-255.255.255.255)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
then a valid response could be the following (in which TSr and INTERNAL_IP4_SUBNET contain the same information):
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
次に、有効な応答が次のとおりです（TSRとInternal_IP4_Subnetには同じ情報が含まれています）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REPLY) =
     INTERNAL_IP4_ADDRESS(198.51.100.234)
     INTERNAL_IP4_SUBNET(198.51.100.0/255.255.255.192)
     INTERNAL_IP4_SUBNET(192.0.2.0/255.255.255.0)
   TSi = (0, 0-65535, 198.51.100.234-198.51.100.234)
   TSr = ((0, 0-65535, 198.51.100.0-198.51.100.63),
          (0, 0-65535, 192.0.2.0-192.0.2.255))
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In these cases, the INTERNAL_IP4_SUBNET does not really carry any useful information.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これらの場合、internal_ip4_subnetは実際には有用な情報を掲載していません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A different possible response would have been this:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
別の可能な応答はこれでした：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REPLY) =
     INTERNAL_IP4_ADDRESS(198.51.100.234)
     INTERNAL_IP4_SUBNET(198.51.100.0/255.255.255.192)
     INTERNAL_IP4_SUBNET(192.0.2.0/255.255.255.0)
   TSi = (0, 0-65535, 198.51.100.234-198.51.100.234)
   TSr = (0, 0-65535, 0.0.0.0-255.255.255.255)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
That response would mean that the client can send all its traffic through the gateway, but the gateway does not mind if the client sends traffic not included by INTERNAL_IP4_SUBNET directly to the destination (without going through the gateway).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
その応答は、クライアントがゲートウェイを介してすべてのトラフィックを送信できることを意味しますが、ゲートウェイは、クライアントがinternal_ip4_subnetによって直接宛先に含まれていないトラフィックを（ゲートウェイを通過せずに）直接送信しても気にしません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A different situation arises if the gateway has a policy that requires the traffic for the two subnets to be carried in separate SAs. Then a response like this would indicate to the client that if it wants access to the second subnet, it needs to create a separate SA:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ゲートウェイに、2つのサブネットが別々のSASで運ばれることを要求するポリシーがある場合、異なる状況が生じます。次に、このような応答は、2番目のサブネットへのアクセスを望む場合、別のSAを作成する必要があることをクライアントに示します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REPLY) =
     INTERNAL_IP4_ADDRESS(198.51.100.234)
     INTERNAL_IP4_SUBNET(198.51.100.0/255.255.255.192)
     INTERNAL_IP4_SUBNET(192.0.2.0/255.255.255.0)
   TSi = (0, 0-65535, 198.51.100.234-198.51.100.234)
   TSr = (0, 0-65535, 198.51.100.0-198.51.100.63)
      INTERNAL_IP4_SUBNET can also be useful if the client&#39;s TSr included
   only part of the address space.  For instance, if the client requests
   the following:
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REQUEST) =
     INTERNAL_IP4_ADDRESS()
   TSi = (0, 0-65535, 0.0.0.0-255.255.255.255)
   TSr = (0, 0-65535, 192.0.2.155-192.0.2.155)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
then the gateway&#39;s response might be:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
その後、ゲートウェイの応答は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REPLY) =
     INTERNAL_IP4_ADDRESS(198.51.100.234)
     INTERNAL_IP4_SUBNET(198.51.100.0/255.255.255.192)
     INTERNAL_IP4_SUBNET(192.0.2.0/255.255.255.0)
   TSi = (0, 0-65535, 198.51.100.234-198.51.100.234)
   TSr = (0, 0-65535, 192.0.2.155-192.0.2.155)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Because the meaning of INTERNAL_IP4_SUBNET/INTERNAL_IP6_SUBNET in CFG_REQUESTs is unclear, they cannot be used reliably in CFG_REQUESTs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
CFG_REQUESTSにおける内部_IP4_SUBNET/INTERNAL_IP6_SUBNETの意味は不明であるため、CFG_REQUESTSでは確実に使用することはできません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-15-3--Configuration-Payloads-for-IPv6">
3.15.3. Configuration Payloads for IPv6
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.15.3. IPv6の構成ペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Configuration payloads for IPv6 are based on the corresponding IPv4 payloads, and do not fully follow the &#34;normal IPv6 way of doing things&#34;. In particular, IPv6 stateless autoconfiguration or router advertisement messages are not used, neither is neighbor discovery. Note that there is an additional document that discusses IPv6 configuration in IKEv2, [IPV6CONFIG]. At the present time, it is an experimental document, but there is a hope that with more implementation experience, it will gain the same standards treatment as this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPv6の構成ペイロードは、対応するIPv4ペイロードに基づいており、「通常のIPv6の方法」に完全に従うことはありません。特に、IPv6 Stateless AutoconfigurationまたはRouter Advertisementメッセージは使用されておらず、近隣の発見も使用されません。IKEV2 [IPv6Config]のIPv6構成について説明する追加のドキュメントがあることに注意してください。現時点では、それは実験的な文書ですが、より多くの実装体験により、このドキュメントと同じ基準治療を得ることが期待されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
A client can be assigned an IPv6 address using the INTERNAL_IP6_ADDRESS Configuration payload. A minimal exchange might look like this:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
クライアントは、内部_IP6_ADDRESS構成ペイロードを使用してIPv6アドレスを割り当てることができます。最小限の交換は次のようになるかもしれません：
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   CP(CFG_REQUEST) =
     INTERNAL_IP6_ADDRESS()
     INTERNAL_IP6_DNS()
   TSi = (0, 0-65535, :: - FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF)
   TSr = (0, 0-65535, :: - FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF)
      CP(CFG_REPLY) =
     INTERNAL_IP6_ADDRESS(2001:DB8:0:1:2:3:4:5/64)
     INTERNAL_IP6_DNS(2001:DB8:99:88:77:66:55:44)
   TSi = (0, 0-65535, 2001:DB8:0:1:2:3:4:5 - 2001:DB8:0:1:2:3:4:5)
   TSr = (0, 0-65535, :: - FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF)
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The client MAY send a non-empty INTERNAL_IP6_ADDRESS attribute in the CFG_REQUEST to request a specific address or interface identifier. The gateway first checks if the specified address is acceptable, and if it is, returns that one. If the address was not acceptable, the gateway attempts to use the interface identifier with some other prefix; if even that fails, the gateway selects another interface identifier.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
クライアントは、CFG_REQUESTに空だinternal_ip6_address属性を送信して、特定のアドレスまたはインターフェイス識別子を要求する場合があります。ゲートウェイは、指定されたアドレスが許容できるかどうか、そしてそれがそれを返すかどうかを最初にチェックします。アドレスが受け入れられない場合、ゲートウェイは他のプレフィックスを使用してインターフェイス識別子を使用しようとします。それが失敗した場合、ゲートウェイは別のインターフェイス識別子を選択します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The INTERNAL_IP6_ADDRESS attribute also contains a prefix length field. When used in a CFG_REPLY, this corresponds to the INTERNAL_IP4_NETMASK attribute in the IPv4 case.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
internal_ip6_address属性には、プレフィックスの長さフィールドも含まれています。CFG_REPLYで使用する場合、これはIPv4ケースのinternal_ip4_netmask属性に対応します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Although this approach to configuring IPv6 addresses is reasonably simple, it has some limitations. IPsec tunnels configured using IKEv2 are not fully featured &#34;interfaces&#34; in the IPv6 addressing architecture sense [ADDRIPV6]. In particular, they do not necessarily have link-local addresses, and this may complicate the use of protocols that assume them, such as [MLDV2].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPv6アドレスを構成するこのアプローチはかなり簡単ですが、いくつかの制限があります。IKEV2を使用して構成されたIPSECトンネルは、アーキテクチャ感覚にアドレス指定するIPv6で「インターフェイス」を完全には掲載されていません[AddRipv6]。特に、それらは必ずしもリンクローカルアドレスを持っているわけではなく、これにより[MLDV2]などのプロトコルの使用が複雑になる可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-15-4--Address-Assignment-Failures">
3.15.4. Address Assignment Failures
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.15.4. アドレス割り当ての障害
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the responder encounters an error while attempting to assign an IP address to the initiator during the processing of a Configuration payload, it responds with an INTERNAL_ADDRESS_FAILURE notification. The IKE SA is still created even if the initial Child SA cannot be created because of this failure. If this error is generated within an IKE_AUTH exchange, no Child SA will be created. However, there are some more complex error cases.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">

        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the responder does not support Configuration payloads at all, it can simply ignore all Configuration payloads. This type of implementation never sends INTERNAL_ADDRESS_FAILURE notifications. If the initiator requires the assignment of an IP address, it will treat a response without CFG_REPLY as an error.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Responderが構成のペイロードをまったくサポートしていない場合、すべての構成ペイロードを無視するだけです。このタイプの実装は、内部_address_failure通知を送信することはありません。イニシエーターがIPアドレスの割り当てを必要とする場合、CFG_REPLYなしで応答をエラーとして扱います。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The initiator may request a particular type of address (IPv4 or IPv6) that the responder does not support, even though the responder supports Configuration payloads. In this case, the responder simply ignores the type of address it does not support and processes the rest of the request as usual.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターは、レスポンダーが構成のペイロードをサポートしていても、応答者がサポートしていないことを特定のタイプのアドレス（IPv4またはIPv6）に要求する場合があります。この場合、レスポンダーは、通常どおり、リクエストの残りの部分をサポートせず、処理しないアドレスのタイプを単純に無視します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the initiator requests multiple addresses of a type that the responder supports, and some (but not all) of the requests fail, the responder replies with the successful addresses only. The responder sends INTERNAL_ADDRESS_FAILURE only if no addresses can be assigned.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターが応答者がサポートするタイプの複数のアドレスを要求し、リクエストの一部（すべてではない）が失敗する場合、レスポンダーは成功したアドレスのみで返信します。レスポンダーは、アドレスが割り当てられない場合にのみ、internal_address_failureを送信します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the initiator does not receive the IP address(es) required by its policy, it MAY keep the IKE SA up and retry the Configuration payload as separate INFORMATIONAL exchange after suitable timeout, or it MAY tear down the IKE SA by sending a Delete payload inside a separate INFORMATIONAL exchange and later retry IKE SA from the beginning after some timeout. Such a timeout should not be too short (especially if the IKE SA is started from the beginning) because these error situations may not be able to be fixed quickly; the timeout should likely be several minutes. For example, an address shortage problem on the responder will probably only be fixed when more entries are returned to the address pool when other clients disconnect or when responder is reconfigured with larger address pool.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
イニシエーターがポリシーで必要なIPアドレスを受信しない場合、IKE SAを維持し、適切なタイムアウト後に設定ペイロードを個別の情報交換として再試行するか、削除ペイロードを送信してIKE SAを取り壊す可能性があります別の情報交換内で、後にいくつかのタイムアウト後の最初からIke SAを再試行します。このようなタイムアウトは短すぎてはなりません（特にIKE SAが最初から開始された場合）これらのエラーの状況を迅速に修正できない場合があります。タイムアウトはおそらく数分でなければなりません。たとえば、レスポンダーの住所不足の問題は、他のクライアントが切断されたとき、またはより大きなアドレスプールでレスポンダーが再構成されたときに、より多くのエントリがアドレスプールに返される場合にのみ修正されるでしょう。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="3-16--Extensible-Authentication-Protocol-EAP-Payload">
3.16. Extensible Authentication Protocol (EAP) Payload
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
3.16. 拡張可能な認証プロトコル（EAP）ペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The Extensible Authentication Protocol payload, denoted EAP in this document, allows IKE SAs to be authenticated using the protocol defined in RFC 3748 [EAP] and subsequent extensions to that protocol. When using EAP, an appropriate EAP method needs to be selected. Many of these methods have been defined, specifying the protocol&#39;s use with various authentication mechanisms. EAP method types are listed in [EAP-IANA]. A short summary of the EAP format is included here for clarity.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントでEAPと表示されている拡張可能な認証プロトコルペイロードにより、RFC 3748 [EAP]で定義されたプロトコルを使用してIKE SASを認証でき、その後のプロトコルへの拡張を使用します。EAPを使用する場合、適切なEAPメソッドを選択する必要があります。これらの方法の多くは定義されており、さまざまな認証メカニズムでプロトコルの使用を指定しています。EAPメソッドタイプは[EAP-AINA]にリストされています。EAP形式の短い要約は、明確にするためにここに含まれています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Next Payload  |C|  RESERVED   |         Payload Length        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                       EAP Message                             ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
Figure 24: EAP Payload Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
図24：EAPペイロード形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The payload type for an EAP payload is forty-eight (48).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAPペイロードのペイロードタイプは48（48）です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
                        1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Code      | Identifier    |           Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      | Type_Data...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
Figure 25: EAP Message Format
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-19">
図25：EAPメッセージ形式
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Code (1 octet) indicates whether this message is a Request (1), Response (2), Success (3), or Failure (4).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o コード（1 Octet）は、このメッセージがリクエスト（1）、応答（2）、成功（3）、または障害（4）であるかどうかを示します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Identifier (1 octet) is used in PPP to distinguish replayed messages from repeated ones. Since in IKE, EAP runs over a reliable protocol, it serves no function here. In a response message, this octet MUST be set to match the identifier in the corresponding request.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 識別子（1オクテット）は、PPPで使用されて、再生されたメッセージを繰り返しのメッセージと区別します。IKEでは、EAPは信頼できるプロトコルを介して実行されているため、ここでは機能しません。応答メッセージでは、このオクテットは、対応するリクエストの識別子と一致するように設定する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Length (2 octets, unsigned integer) is the length of the EAP message and MUST be four less than the Payload Length of the encapsulating payload.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 長さ（2オクテット、署名されていない整数）はEAPメッセージの長さであり、カプセル化ペイロードのペイロードの長さよりも4枚少ない必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Type (1 octet) is present only if the Code field is Request (1) or Response (2). For other codes, the EAP message length MUST be four octets and the Type and Type_Data fields MUST NOT be present. In a Request (1) message, Type indicates the data being requested. In a Response (2) message, Type MUST either be Nak or match the type of the data requested. Note that since IKE passes an indication of initiator identity in the first message in the IKE_AUTH exchange, the responder SHOULD NOT send EAP Identity requests (type 1). The initiator MAY, however, respond to such requests if it receives them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o タイプ（1オクテット）は、コードフィールドが要求（1）または応答（2）である場合にのみ存在します。他のコードの場合、EAPメッセージの長さは4オクテットでなければならず、TypeとType_Dataフィールドを存在してはなりません。リクエスト（1）メッセージで、タイプは要求されているデータを示します。応答（2）メッセージでは、タイプはNAKであるか、要求されたデータのタイプと一致する必要があります。IKEはIKE_AUTH Exchangeの最初のメッセージで開始者のIDの表示を渡すため、ResponderはEAP IDリクエストを送信してはなりません（タイプ1）。ただし、イニシエーターは、そのようなリクエストを受け取った場合、そのような要求に応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Type_Data (Variable Length) varies with the Type of Request and the associated Response. For the documentation of the EAP methods, see [EAP].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Type_Data（変数長）は、リクエストのタイプと関連する応答によって異なります。EAPメソッドのドキュメントについては、[EAP]を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that since IKE passes an indication of initiator identity in the first message in the IKE_AUTH exchange, the responder should not send EAP Identity requests. The initiator may, however, respond to such requests if it receives them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEは、IKE_AUTH Exchangeの最初のメッセージで開始者IDの表示を渡すため、ResponderはEAP IDリクエストを送信すべきではないことに注意してください。ただし、イニシエーターは、そのようなリクエストを受け取った場合、そのような要求に応答する場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="4--Conformance-Requirements">
4. Conformance Requirements
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
4. 適合要件
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
In order to assure that all implementations of IKEv2 can interoperate, there are &#34;MUST support&#34; requirements in addition to those listed elsewhere. Of course, IKEv2 is a security protocol, and one of its major functions is to allow only authorized parties to successfully complete establishment of SAs. So a particular implementation may be configured with any of a number of restrictions concerning algorithms and trusted authorities that will prevent universal interoperability.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2のすべての実装が相互運用できることを保証するために、他の場所にリストされているものに加えて、「サポートする必要があります」要件があります。もちろん、IKEV2はセキュリティプロトコルであり、その主要な機能の1つは、認可された当事者のみがSASの確立を正常に完了できるようにすることです。したがって、特定の実装は、普遍的な相互運用性を防ぐアルゴリズムと信頼できる当局に関する多くの制限のいずれかで構成される場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 is designed to permit minimal implementations that can interoperate with all compliant implementations. The following are features that can be omitted in a minimal implementation:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2は、すべての準拠の実装と相互運用できる最小限の実装を可能にするように設計されています。以下は、最小限の実装で省略できる機能です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to negotiate SAs through a NAT and tunnel the resulting ESP SA over UDP.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o NATを介してSASを交渉し、結果として得られるESP SAをUDPでトンネルする能力。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to request (and respond to a request for) a temporary IP address on the remote end of a tunnel.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o トンネルのリモートエンドで一時的なIPアドレスを要求する（およびリクエストに応答する）機能。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to support EAP-based authentication.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o EAPベースの認証をサポートする機能。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to support window sizes greater than one.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ウィンドウサイズを1つ以上サポートする機能。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to establish multiple ESP or AH SAs within a single IKE SA.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o 単一のIKE SA内で複数のESPまたはAH SASを確立する能力。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Ability to rekey SAs.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o SASを再キーする能力。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
To assure interoperability, all implementations MUST be capable of parsing all payload types (if only to skip over them) and to ignore payload types that it does not support unless the critical bit is set in the payload header. If the critical bit is set in an unsupported payload header, all implementations MUST reject the messages containing those payloads.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
相互運用性を保証するために、すべての実装は、すべてのペイロードタイプを解析することができなければなりません（それらをスキップするだけでは）。クリティカルビットがサポートされていないペイロードヘッダーで設定されている場合、すべての実装は、それらのペイロードを含むメッセージを拒否する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Every implementation MUST be capable of doing four-message IKE_SA_INIT and IKE_AUTH exchanges establishing two SAs (one for IKE, one for ESP or AH). Implementations MAY be initiate-only or respond-only if appropriate for their platform. Every implementation MUST be capable of responding to an INFORMATIONAL exchange, but a minimal implementation MAY respond to any request in the INFORMATIONAL exchange with an empty response (note that within the context of an IKE SA, an &#34;empty&#34; message consists of an IKE header followed by an Encrypted payload with no payloads contained in it). A minimal implementation MAY support the CREATE_CHILD_SA exchange only in so far as to recognize requests and reject them with a Notify payload of type NO_ADDITIONAL_SAS. A minimal implementation need not be able to initiate CREATE_CHILD_SA or INFORMATIONAL exchanges. When an SA expires (based on locally configured values of either lifetime or octets passed), and implementation MAY either try to renew it with a CREATE_CHILD_SA exchange or it MAY delete (close) the old SA and create a new one. If the responder rejects the CREATE_CHILD_SA request with a NO_ADDITIONAL_SAS notification, the implementation MUST be capable of instead deleting the old SA and creating a new one.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべての実装は、2つのSAS（IKE用、もう1つはESPまたはAH用）を確立する4メッセージのIKE_SA_INITおよびIKE_AUTH交換を行うことができなければなりません。実装は、プラットフォームに適切な場合、開始のみであるか、応答のみです。すべての実装は情報交換に対応できる必要がありますが、最小限の実装は、空の応答を伴う情報交換の要求に応答する場合があります（IKE SAのコンテキスト内では、「空の」メッセージはIKEヘッダーで構成されています。その後、ペイロードが含まれていない暗号化されたペイロードが続きます）。最小限の実装は、create_child_sa Exchangeをサポートする場合があります。リクエストを認識し、型NO_ADDITIONAL_SASの通知ペイロードでそれらを拒否します。最小限の実装では、create_child_saまたは情報交換を開始できる必要はありません。SAが有効期限が切れた場合（寿命またはオクテットの通過したローカルで構成された値に基づいて）、実装はcreate_child_sa Exchangeでそれを更新しようとするか、古いsaを削除（閉じる）（閉じる）新しいものを作成する場合があります。Responderがno_additional_sas通知を使用してcreate_child_sa要求を拒否した場合、実装は代わりに古いSAを削除して新しいものを作成できる必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Implementations are not required to support requesting temporary IP addresses or responding to such requests. If an implementation does support issuing such requests and its policy requires using temporary IP addresses, it MUST include a CP payload in the first message in the IKE_AUTH exchange containing at least a field of type INTERNAL_IP4_ADDRESS or INTERNAL_IP6_ADDRESS. All other fields are optional. If an implementation supports responding to such requests, it MUST parse the CP payload of type CFG_REQUEST in the first message in the IKE_AUTH exchange and recognize a field of type INTERNAL_IP4_ADDRESS or INTERNAL_IP6_ADDRESS. If it supports leasing an address of the appropriate type, it MUST return a CP payload of type CFG_REPLY containing an address of the requested type. The responder may include any other related attributes.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一時的なIPアドレスの要求やそのようなリクエストへの応答をサポートするために実装は必要ありません。実装がそのようなリクエストの発行をサポートし、そのポリシーに一時的なIPアドレスを使用する必要がある場合、Internal_IP4_Addressまたはinternal_ip6_addressの少なくともフィールドを含むIKE_AUTH Exchangeの最初のメッセージにCPペイロードを含める必要があります。他のすべてのフィールドはオプションです。実装がそのようなリクエストへの応答をサポートする場合、IKE_AUTH Exchangeの最初のメッセージでCFG_REQUESTのタイプのCPペイロードを解析し、internal_ip4_addressまたはinternal_ip6_addressのタイプのフィールドを認識する必要があります。適切なタイプのアドレスをリースすることをサポートする場合、要求されたタイプのアドレスを含むタイプCFG_REPLYのCPペイロードを返信する必要があります。レスポンダーには、他の関連属性が含まれる場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For an implementation to be called conforming to this specification, it MUST be possible to configure it to accept the following:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この仕様に準拠する実装を呼び出すには、以下を受け入れるように構成することが可能である必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Public Key Infrastructure using X.509 (PKIX) Certificates containing and signed by RSA keys of size 1024 or 2048 bits, where the ID passed is any of ID_KEY_ID, ID_FQDN, ID_RFC822_ADDR, or ID_DER_ASN1_DN.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o サイズ1024または2048ビットのRSAキーを含むX.509（PKIX）証明書を使用した公開キーインフラストラクチャ。IDが渡されたID_KEY_ID、ID_FQDN、ID_RFC822_ADDR、またはID_DER_ASN1_DNのいずれかです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Shared key authentication where the ID passed is any of ID_KEY_ID, ID_FQDN, or ID_RFC822_ADDR.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o IDが渡された場合の共有キー認証は、id_key_id、id_fqdn、またはid_rfc822_addrのいずれかです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o Authentication where the responder is authenticated using PKIX Certificates and the initiator is authenticated using shared key authentication.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
o ResponderがPKIX証明書を使用して認証され、イニシエーターが共有キー認証を使用して認証される認証。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="5--Security-Considerations">
5. Security Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5. セキュリティに関する考慮事項
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
While this protocol is designed to minimize disclosure of configuration information to unauthenticated peers, some such disclosure is unavoidable. One peer or the other must identify itself first and prove its identity first. To avoid probing, the initiator of an exchange is required to identify itself first, and usually is required to authenticate itself first. The initiator can, however, learn that the responder supports IKE and what cryptographic protocols it supports. The responder (or someone impersonating the responder) can probe the initiator not only for its identity, but using CERTREQ payloads may be able to determine what certificates the initiator is willing to use.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このプロトコルは、認定されていないピアへの構成情報の開示を最小限に抑えるように設計されていますが、そのような開示は避けられません。一方のピアまたはもう一方のピアは、最初に自分自身を特定し、最初にそのアイデンティティを証明する必要があります。調査を避けるために、交換の開始者は最初に自分自身を識別するために必要であり、通常は最初に認証するには必要です。ただし、イニシエーターは、レスポンダーがIKEとサポートする暗号化プロトコルをサポートしていることを学ぶことができます。レスポンダー（またはレスポンダーになりすましている人）は、そのアイデンティティだけでなく、Certreqペイロードを使用することで、イニシエーターがどの証明書を使用しているかを決定できる場合があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Use of EAP authentication changes the probing possibilities somewhat. When EAP authentication is used, the responder proves its identity before the initiator does, so an initiator that knew the name of a valid initiator could probe the responder for both its name and certificates.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAP認証を使用すると、プロービングの可能性が多少変化します。EAP認証が使用されると、Responderはイニシエーターが行う前にその身元を証明するため、有効なイニシエーターの名前を知っていたイニシエーターは、その名前と証明書の両方でレスポンダーをプローブできます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Repeated rekeying using CREATE_CHILD_SA without additional Diffie-Hellman exchanges leaves all SAs vulnerable to cryptanalysis of a single key. Implementers should take note of this fact and set a limit on CREATE_CHILD_SA exchanges between exponentiations. This document does not prescribe such a limit.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
追加のdiffie-hellman交換なしでcreate_child_saを使用して繰り返し再キーイングを行うと、すべてのSASが単一のキーの暗号分析に対して脆弱になります。実装者はこの事実に注意し、指数間のcreate_child_sa交換に制限を設定する必要があります。このドキュメントは、そのような制限を規定していません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The strength of a key derived from a Diffie-Hellman exchange using any of the groups defined here depends on the inherent strength of the group, the size of the exponent used, and the entropy provided by the random number generator used. Due to these inputs, it is difficult to determine the strength of a key for any of the defined groups. Diffie-Hellman group number two, when used with a strong random number generator and an exponent no less than 200 bits, is common for use with 3DES. Group five provides greater security than group two. Group one is for historic purposes only and does not provide sufficient strength except for use with DES, which is also for historic use only. Implementations should make note of these estimates when establishing policy and negotiating security parameters.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ここで定義されているグループのいずれかを使用したdiffie-hellman交換から派生したキーの強度は、グループの固有の強度、使用される指数のサイズ、および使用される乱数ジェネレーターによって提供されるエントロピーに依存します。これらの入力により、定義されたグループのいずれかのキーの強度を決定することは困難です。Diffie-Hellmanグループ番号2は、強い乱数ジェネレーターと200ビット以上の指数で使用される場合、3DEで使用するのが一般的です。グループ5は、グループ2よりも大きなセキュリティを提供します。グループ1は歴史的な目的のみを目的としており、DESでの使用を除いて十分な強度を提供しません。これは歴史的な使用のみでもあります。実装は、ポリシーを確立し、セキュリティパラメーターを交渉する際にこれらの見積もりに注意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Note that these limitations are on the Diffie-Hellman groups themselves. There is nothing in IKE that prohibits using stronger groups nor is there anything that will dilute the strength obtained from stronger groups (limited by the strength of the other algorithms negotiated including the PRF). In fact, the extensible framework of IKE encourages the definition of more groups; use of elliptic curve groups may greatly increase strength using much smaller numbers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
これらの制限は、Diffie-Hellmanグループ自体にあることに注意してください。IKEには、より強力なグループを使用することを禁止するものも、より強力なグループから得られた強度を希釈するものもありません（PRFを含む交渉された他のアルゴリズムの強度によって制限されています）。実際、IKEの拡張可能なフレームワークは、より多くのグループの定義を奨励しています。楕円曲線グループの使用は、はるかに小さな数字を使用して強度を大幅に増加させる可能性があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is assumed that all Diffie-Hellman exponents are erased from memory after use.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのdiffie-hellman指数は、使用後にメモリから消去されると想定されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IKE_SA_INIT and IKE_AUTH exchanges happen before the initiator has been authenticated. As a result, an implementation of this protocol needs to be completely robust when deployed on any insecure network. Implementation vulnerabilities, particularly DoS attacks, can be exploited by unauthenticated peers. This issue is particularly worrisome because of the unlimited number of messages in EAP-based authentication.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKE_SA_INITとIKE_AUTHの交換は、イニシエーターが認証される前に行われます。その結果、このプロトコルの実装は、不安定なネットワークに展開する場合、完全に堅牢にする必要があります。実装の脆弱性、特にDOS攻撃は、認識されていないピアによって悪用される可能性があります。この問題は、EAPベースの認証に無制限の数のメッセージがあるため、特に心配です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The strength of all keys is limited by the size of the output of the negotiated PRF. For this reason, a PRF whose output is less than 128 bits (e.g., 3DES-CBC) MUST NOT be used with this protocol.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
すべてのキーの強度は、ネゴシエートされたPRFの出力のサイズによって制限されます。このため、出力が128ビット（3DES-CBCなど）未満のPRFをこのプロトコルで使用してはいけません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The security of this protocol is critically dependent on the randomness of the randomly chosen parameters. These should be generated by a strong random or properly seeded pseudorandom source (see [RANDOMNESS]). Implementers should take care to ensure that use of random numbers for both keys and nonces is engineered in a fashion that does not undermine the security of the keys.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このプロトコルのセキュリティは、ランダムに選択されたパラメーターのランダム性に大きく依存しています。これらは、強力なランダムまたは適切にシードされた擬似ランダム源によって生成される必要があります（[ランダム]を参照）。実装者は、キーとノンセスの両方に乱数を使用することが、キーのセキュリティを損なわない方法で設計されるように注意する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For information on the rationale of many of the cryptographic design choices in this protocol, see [SIGMA] and [SKEME]. Though the security of negotiated Child SAs does not depend on the strength of the encryption and integrity protection negotiated in the IKE SA, implementations MUST NOT negotiate NONE as the IKE integrity protection algorithm or ENCR_NULL as the IKE encryption algorithm.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このプロトコルにおける暗号設計の選択の多くの理論的根拠については、[Sigma]および[Skeme]を参照してください。交渉された子SASのセキュリティは、IKE SAで交渉された暗号化と整合性保護の強さに依存していませんが、実装はIKE Integrity Protection AlgorithmまたはENCR_NULLとしてIKE暗号化アルゴリズムとして交渉してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When using pre-shared keys, a critical consideration is how to assure the randomness of these secrets. The strongest practice is to ensure that any pre-shared key contain as much randomness as the strongest key being negotiated. Deriving a shared secret from a password, name, or other low-entropy source is not secure. These sources are subject to dictionary and social-engineering attacks, among others.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
事前に共有キーを使用する場合、重要な考慮事項は、これらの秘密のランダム性を保証する方法です。最も強力なプラクティスは、事前に共有されたキーが交渉されている最も強力なキーと同じくらいのランダム性を確保することです。パスワード、名前、またはその他の低エントロピーソースから共有された秘密を導き出すことは安全ではありません。これらの情報源は、とりわけ、辞書や社会工学攻撃の対象となります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The NAT_DETECTION_*_IP notifications contain a hash of the addresses and ports in an attempt to hide internal IP addresses behind a NAT. Since the IPv4 address space is only 32 bits, and it is usually very sparse, it would be possible for an attacker to find out the internal address used behind the NAT box by trying all possible IP addresses and trying to find the matching hash. The port numbers are normally fixed to 500, and the SPIs can be extracted from the packet. This reduces the number of hash calculations to 2^32. With an educated guess of the use of private address space, the number of hash calculations is much smaller. Designers should therefore not assume that use of IKE will not leak internal address information.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
NAT_DETECTION _*_ IP通知には、NATの後ろに内部IPアドレスを非表示にするために、アドレスとポートのハッシュが含まれています。IPv4アドレススペースはわずか32ビットであり、通常は非常にまばらであるため、攻撃者はすべての可能なIPアドレスを試して一致するハッシュを見つけようとすることで、NATボックスの後ろに使用される内部アドレスを見つけることができます。ポート番号は通常500に固定されており、スピスはパケットから抽出できます。これにより、ハッシュ計算の数が2^32に減少します。プライベートアドレススペースの使用を教育された推測では、ハッシュ計算の数ははるかに小さくなります。したがって、設計者は、IKEの使用が内部アドレス情報をリークしないと想定してはなりません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
When using an EAP authentication method that does not generate a shared key for protecting a subsequent AUTH payload, certain man-in-the-middle and server-impersonation attacks are possible [EAPMITM]. These vulnerabilities occur when EAP is also used in protocols that are not protected with a secure tunnel. Since EAP is a general-purpose authentication protocol, which is often used to provide single-signon facilities, a deployed IPsec solution that relies on an EAP authentication method that does not generate a shared key (also known as a non-key-generating EAP method) can become compromised due to the deployment of an entirely unrelated application that also happens to use the same non-key-generating EAP method, but in an unprotected fashion. Note that this vulnerability is not limited to just EAP, but can occur in other scenarios where an authentication infrastructure is reused. For example, if the EAP mechanism used by IKEv2 utilizes a token authenticator, a man-in-the-middle attacker could impersonate the web server, intercept the token authentication exchange, and use it to initiate an IKEv2 connection. For this reason, use of non-key-generating EAP methods SHOULD be avoided where possible. Where they are used, it is extremely important that all usages of these EAP methods SHOULD utilize a protected tunnel, where the initiator validates the responder&#39;s certificate before initiating the EAP authentication. Implementers should describe the vulnerabilities of using non-key-generating EAP methods in the documentation of their implementations so that the administrators deploying IPsec solutions are aware of these dangers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
その後のAUTHペイロードを保護するための共有キーを生成しないEAP認証方法を使用する場合、特定の中間およびサーバーに満ちた攻撃攻撃が可能です[eapmitm]。これらの脆弱性は、EAPが安全なトンネルで保護されていないプロトコルでも使用されている場合に発生します。EAPは汎用認証プロトコルであり、シングルシニョン施設を提供するためによく使用されるため、共有キーを生成しないEAP認証方法に依存する展開されたIPSECソリューション（非キー生成EAPとしても知られています方法）は、同じ非キー生成EAPメソッドを使用しているが、保護されていない方法でも、まったく無関係なアプリケーションの展開により妥協することができます。この脆弱性はEAPだけに限定されていませんが、認証インフラストラクチャが再利用される他のシナリオで発生する可能性があることに注意してください。たとえば、IKEV2が使用するEAPメカニズムがトークン認証器を利用している場合、中間の攻撃者はWebサーバーになりすまし、トークン認証交換を傍受し、IKEV2接続を開始するために使用できます。このため、可能であれば、キーを生成するEAPメソッドの使用を避ける必要があります。それらが使用されている場合、これらのEAPメソッドのすべての使用法は、EAP認証を開始する前に、イニシエーターがレスポンダーの証明書を検証する保護されたトンネルを利用する必要があることが非常に重要です。実装者は、IPSECソリューションを展開する管理者がこれらの危険を認識できるように、実装のドキュメントで非キー生成EAPメソッドを使用する脆弱性を説明する必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
An implementation using EAP MUST also use a public-key-based authentication of the server to the client before the EAP authentication begins, even if the EAP method offers mutual authentication. This avoids having additional IKEv2 protocol variations and protects the EAP data from active attackers.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
EAPを使用した実装では、EAP認証が開始される前に、EAP認証が開始される前に、クライアントにサーバーのパブリックキーベースの認証を使用する必要があります。これにより、追加のIKEV2プロトコルのバリエーションがあることを回避し、アクティブな攻撃者からEAPデータを保護します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
If the messages of IKEv2 are long enough that IP-level fragmentation is necessary, it is possible that attackers could prevent the exchange from completing by exhausting the reassembly buffers. The chances of this can be minimized by using the Hash and URL encodings instead of sending certificates (see Section 3.6). Additional mitigations are discussed in [DOSUDPPROT].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2のメッセージがIPレベルの断片化が必要であるほど十分に長い場合、攻撃者は再組み立てバッファーを使い果たして交換が完了するのを防ぐことができます。これの可能性は、証明書を送信する代わりにハッシュとURLのエンコーディングを使用することで最小限に抑えることができます（セクション3.6を参照）。追加の緩和については、[dosudpprot]で説明されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Admission control is critical to the security of the protocol. For example, trust anchors used for identifying IKE peers should probably be different than those used for other forms of trust, such as those used to identify public web servers. Moreover, although IKE provides a great deal of leeway in defining the security policy for a trusted peer&#39;s identity, credentials, and the correlation between them, having such security policy defined explicitly is essential to a secure implementation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
入場制御は、プロトコルのセキュリティにとって重要です。たとえば、IKEピアを識別するために使用されるトラストアンカーは、おそらくパブリックWebサーバーを識別するために使用されるものなど、他の形式の信頼に使用されるアンカーとは異なるはずです。さらに、IKEは、信頼できるピアのアイデンティティ、資格情報、およびそれらの間の相関のセキュリティポリシーを定義する際に多くの余裕を提供しますが、そのようなセキュリティポリシーを明示的に定義することは、安全な実装に不可欠です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="5-1--Traffic-Selector-Authorization">
5.1. Traffic Selector Authorization
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
5.1. トラフィックセレクターの承認
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEv2 relies on information in the Peer Authorization Database (PAD) when determining what kind of Child SAs a peer is allowed to create. This process is described in Section 4.4.3 of [IPSECARCH]. When a peer requests the creation of an Child SA with some Traffic Selectors, the PAD must contain &#34;Child SA Authorization Data&#34; linking the identity authenticated by IKEv2 and the addresses permitted for Traffic Selectors.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2は、ピアが作成できるようになった子供の種類を決定する際に、ピア認証データベース（PAD）の情報に依存しています。このプロセスは、[IPSecarch]のセクション4.4.3で説明されています。ピアがいくつかのトラフィックセレクターを使用して子SAの作成を要求する場合、パッドには、IKEV2によって認証されたアイデンティティとトラフィックセレクターの許可されているアドレスをリンクする「子SA認証データ」を含める必要があります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
For example, the PAD might be configured so that authenticated identity &#34;sgw23.example.com&#34; is allowed to create Child SAs for 192.0.2.0/24, meaning this security gateway is a valid &#34;representative&#34; for these addresses. Host-to-host IPsec requires similar entries, linking, for example, &#34;fooserver4.example.com&#34; with 198.51.100.66/32, meaning this identity is a valid &#34;owner&#34; or &#34;representative&#34; of the address in question.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
たとえば、パッドは、認証されたアイデンティティ「SGW23.Example.com」が192.0.2.0/24のチャイルドSASを作成できるように構成される可能性があります。つまり、このセキュリティゲートウェイはこれらのアドレスの有効な「代表」です。ホストツーホストIPSECには、例えば「Fooserver4.example.com」を198.51.100.66/32でリンクする同様のエントリが必要です。つまり、この身元は問題の住所の有効な「所有者」または「代表」です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
As noted in [IPSECARCH], &#34;It is necessary to impose these constraints on creation of child SAs to prevent an authenticated peer from spoofing IDs associated with other, legitimate peers&#34;. In the example given above, a correct configuration of the PAD prevents sgw23 from creating Child SAs with address 198.51.100.66, and prevents fooserver4 from creating Child SAs with addresses from 192.0.2.0/24.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Ipsecarch]で述べたように、「認証されたピアが他の正当なピアに関連付けられたスプーフィングIDを防ぐために、子SASの作成にこれらの制約を課す必要があります」。上記の例では、パッドの正しい構成により、SGW23は198.51.100.66のアドレスで子SASの作成を防ぎ、Fooserver4が192.0.2.0/24のアドレスで子SASを作成するのを防ぎます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It is important to note that simply sending IKEv2 packets using some particular address does not imply a permission to create Child SAs with that address in the Traffic Selectors. For example, even if sgw23 would be able to spoof its IP address as 198.51.100.66, it could not create Child SAs matching fooserver4&#39;s traffic.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
特定のアドレスを使用してIKEV2パケットを送信するだけでは、トラフィックセレクターにそのアドレスを使用して子SASを作成する許可ではないことに注意することが重要です。たとえば、SGW23がIPアドレスを198.51.100.66として吸収できたとしても、Fooserver4のトラフィックに一致する子SASを作成することはできませんでした。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The IKEv2 specification does not specify how exactly IP address assignment using Configuration payloads interacts with the PAD. Our interpretation is that when a security gateway assigns an address using Configuration payloads, it also creates a temporary PAD entry linking the authenticated peer identity and the newly allocated inner address.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2仕様は、構成ペイロードを使用したIPアドレスの割り当てがパッドと対話する方法を正確に指定していません。私たちの解釈は、セキュリティゲートウェイが構成ペイロードを使用してアドレスを割り当てると、認証されたピアアイデンティティと新しく割り当てられた内部アドレスをリンクする一時的なパッドエントリも作成するということです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
It has been recognized that configuring the PAD correctly may be difficult in some environments. For instance, if IPsec is used between a pair of hosts whose addresses are allocated dynamically using DHCP, it is extremely difficult to ensure that the PAD specifies the correct &#34;owner&#34; for each IP address. This would require a mechanism to securely convey address assignments from the DHCP server, and link them to identities authenticated using IKEv2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
一部の環境では、パッドを正しく構成することが難しい場合があることが認識されています。たとえば、DHCPを使用してアドレスが動的に割り当てられているホストのペア間でIPSECが使用される場合、各IPアドレスの正しい「所有者」をパッドが指定することを保証することは非常に困難です。これには、DHCPサーバーからアドレス割り当てを安全に伝え、IKEV2を使用して認証されたアイデンティティにリンクするメカニズムが必要です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Due to this limitation, some vendors have been known to configure their PADs to allow an authenticated peer to create Child SAs with Traffic Selectors containing the same address that was used for the IKEv2 packets. In environments where IP spoofing is possible (i.e., almost everywhere) this essentially allows any peer to create Child SAs with any Traffic Selectors. This is not an appropriate or secure configuration in most circumstances. See [H2HIPSEC] for an extensive discussion about this issue, and the limitations of host-to-host IPsec in general.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この制限により、一部のベンダーは、IKEV2パケットに使用された同じアドレスを含むトラフィックセレクターを使用して、認証されたピアが子供SAを作成できるようにパッドを構成することが知られています。IPスプーフィングが可能な環境（つまり、ほぼすべての場所）では、これにより、ピアがトラフィックセレクターを使用して子供のSASを作成することができます。これは、ほとんどの状況では適切または安全な構成ではありません。この問題についての広範な議論、および一般的なホストからホストへのIPSECの制限については、[H2HIPSEC]を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="6--IANA-Considerations">
6. IANA Considerations
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
6. IANAの考慮事項
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV2] defined many field types and values. IANA has already registered those types and values in [IKEV2IANA], so they are not listed here again.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV2]は、多くのフィールドタイプと値を定義しました。IANAはすでに[ikev2iana]にこれらのタイプと値を登録しているため、ここには再びリストされていません。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two items have been removed from the IKEv2 Configuration Payload Attribute Types table: INTERNAL_IP6_NBNS and INTERNAL_ADDRESS_EXPIRY.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2構成ペイロード属性タイプから2つの項目が削除されました：内部_IP6_NBNSおよびInternal_Address_Expiry。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Two new additions to the IKEv2 parameters &#34;NOTIFY MESSAGES - ERROR TYPES&#34; registry are defined here that were not defined in [IKEV2]:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2パラメーターへの2つの新しい追加「メッセージの通知 - エラータイプ」レジストリは、[IKEV2]で定義されていないここで定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
43 TEMPORARY_FAILURE 44 CHILD_SA_NOT_FOUND
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
43 Companter_Failure 44 child_sa_not_found
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANA has changed the existing IKEv2 Payload Types table from:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANAは、既存のIKEV2ペイロードタイプのテーブルを以下から変更しました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
46 Encrypted E [IKEV2]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
46暗号化されたE [ikev2]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
to
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
に
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
46 Encrypted and Authenticated SK [This document]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
46暗号化および認証されたSK [このドキュメント]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANA has updated all references to RFC 4306 to point to this document.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IANAは、RFC 4306へのすべての参照を更新して、このドキュメントを指しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="7--Acknowledgements">
7. Acknowledgements
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
7. 謝辞
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Many individuals in the IPsecME Working Group were very helpful in contributing ideas and text for this document, as well as in reviewing the clarifications suggested by others.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IPSECMEワーキンググループの多くの個人は、このドキュメントのアイデアやテキストを貢献し、他の人が提案した説明をレビューするのに非常に役立ちました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The acknowledgements from the IKEv2 document were:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEV2ドキュメントからの謝辞は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This document is a collaborative effort of the entire IPsec WG. If there were no limit to the number of authors that could appear on an RFC, the following, in alphabetical order, would have been listed: Bill Aiello, Stephane Beaulieu, Steve Bellovin, Sara Bitan, Matt Blaze, Ran Canetti, Darren Dukes, Dan Harkins, Paul Hoffman, John Ioannidis, Charlie Kaufman, Steve Kent, Angelos Keromytis, Tero Kivinen, Hugo Krawczyk, Andrew Krywaniuk, Radia Perlman, Omer Reingold, and Michael Richardson. Many other people contributed to the design. It is an evolution of IKEv1, ISAKMP, and the IPsec DOI, each of which has its own list of authors. Hugh Daniel suggested the feature of having the initiator, in message 3, specify a name for the responder, and gave the feature the cute name &#34;You Tarzan, Me Jane&#34;. David Faucher and Valery Smyslov helped refine the design of the Traffic Selector negotiation.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このドキュメントは、IPSEC WG全体の共同作業です。RFCに登場する可能性のある著者の数に制限がなかった場合、以下はアルファベット順にリストされていました：ビルアイエッロ、ステファンボーリュー、スティーブベロビン、サラビタン、マットブレイズ、ランカネッティ、ダレンデュークス、ランダン・ハーキンス、ポール・ホフマン、ジョン・イオアンニディス、チャーリー・カウフマン、スティーブ・ケント、アンジェロス・ケロミティ、テロ・キビネン、ヒューゴ・クローチク、アンドリュー・クリワニウク、ラディア・ペルマン、オマー・レインゴールド、マイケル・リチャーズソン。他の多くの人々がデザインに貢献しました。これは、IKEV1、ISAKMP、およびIPSEC doiの進化であり、それぞれに独自の著者リストがあります。ヒュー・ダニエルは、メッセージ3にイニシエーターを持つことの特徴を提案し、レスポンダーの名前を指定し、その機能に「You Tarzan、Me Jane」というかわいい名前を付けました。David FaucherとValery Smyslovは、トラフィックセレクターのネゴシエーションの設計を改良するのに役立ちました。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="8--References">
8. References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8. 参考文献
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="8-1--Normative-References">
8.1. Normative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8.1. 引用文献
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ADDGROUP] Kivinen, T. and M. Kojo, &#34;More Modular Exponential (MODP) Diffie-Hellman groups for Internet Key Exchange (IKE)&#34;, RFC 3526, May 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Addgroup] Kivinen、T。およびM. Kojo、「よりモジュール式指数（MODP）インターネットキーエクスチェンジのDiffie-Hellmanグループ（IKE）のDiffie-Hellmanグループ」、RFC 3526、2003年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ADDRIPV6] Hinden, R. and S. Deering, &#34;IP Version 6 Addressing Architecture&#34;, RFC 4291, February 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AddRipv6] Hinden、R。およびS. Deering、「IPバージョン6アドレス指定アーキテクチャ」、RFC 4291、2006年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AEAD] Black, D. and D. McGrew, &#34;Using Authenticated Encryption Algorithms with the Encrypted Payload of the Internet Key Exchange version 2 (IKEv2) Protocol&#34;, RFC 5282, August 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Aead] Black、D。およびD. McGrew、「インターネットキーエクスチェンジバージョン2（IKEV2）プロトコルの暗号化されたペイロードを使用した認証された暗号化アルゴリズムを使用」、RFC 5282、2008年8月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AESCMACPRF128] Song, J., Poovendran, R., Lee, J., and T. Iwata, &#34;The Advanced Encryption Standard-Cipher-based Message Authentication Code-Pseudo-Random Function-128 (AES-CMAC-PRF-128) Algorithm for the Internet Key Exchange Protocol (IKE)&#34;, RFC 4615, August 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AESCMACPRF128] Song、J.、Poovendran、R.、Lee、J。、およびT. Iwata、「高度な暗号化標準サイファーベースのメッセージ認証コード-Pseudo-Random Function-128（AES-CMAC-PRF-128））インターネットキーエクスチェンジプロトコル（IKE）のアルゴリズム &#34;、RFC 4615、2006年8月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AESXCBCPRF128] Hoffman, P., &#34;The AES-XCBC-PRF-128 Algorithm for the Internet Key Exchange Protocol (IKE)&#34;, RFC 4434, February 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AESXCBCPRF128] Hoffman、P。、「インターネットキーエクスチェンジプロトコル（IKE）のAES-XCBC-PRF-128アルゴリズム」、RFC 4434、2006年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAP] Aboba, B., Blunk, L., Vollbrecht, J., Carlson, J., and H. Levkowetz, &#34;Extensible Authentication Protocol (EAP)&#34;, RFC 3748, June 2004.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAP] Aboba、B.、Blunk、L.、Vollbrecht、J.、Carlson、J。、およびH. Levkowetz、「拡張可能な認証プロトコル（EAP）」、RFC 3748、2004年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ECN] Ramakrishnan, K., Floyd, S., and D. Black, &#34;The Addition of Explicit Congestion Notification (ECN) to IP&#34;, RFC 3168, September 2001.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ECN] Ramakrishnan、K.、Floyd、S。、およびD. Black、「IPへの明示的な混雑通知（ECN）の追加」、RFC 3168、2001年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESPCBC] Pereira, R. and R. Adams, &#34;The ESP CBC-Mode Cipher Algorithms&#34;, RFC 2451, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESPCBC] Pereira、R。およびR. Adams、「ESP CBC-Mode暗号アルゴリズム」、RFC 2451、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[HTTP] Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &#34;Hypertext Transfer Protocol -- HTTP/1.1&#34;, RFC 2616, June 1999.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[HTTP] Fielding、R.、Gettys、J.、Mogul、J.、Frystyk、H.、Masinter、L.、Leach、P。、およびT. Berners-Lee、「HyperText Transfer Protocol-HTTP/1.1」、RFC 2616、1999年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV2IANA] &#34;Internet Key Exchange Version 2 (IKEv2) Parameters&#34;, &lt;http://www.iana.org&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ikev2iana]「インターネットキーエクスチェンジバージョン2（ikev2）パラメーター」、&lt;http://www.iana.org&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IPSECARCH] Kent, S. and K. Seo, &#34;Security Architecture for the Internet Protocol&#34;, RFC 4301, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Ipsecarch] Kent、S。およびK. Seo、「インターネットプロトコルのセキュリティアーキテクチャ」、RFC 4301、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MUSTSHOULD] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, March 1997.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[必須] Bradner、S。、「要件レベルを示すためにRFCで使用するためのキーワード」、BCP 14、RFC 2119、1997年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PKCS1] Jonsson, J. and B. Kaliski, &#34;Public-Key Cryptography Standards (PKCS) #1: RSA Cryptography Specifications Version 2.1&#34;, RFC 3447, February 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PKCS1] Jonsson、J.およびB. Kaliski、「Public-Key Cryptography Standards（PKCS）＃1：RSA暗号仕様バージョン2.1 &#34;、RFC 3447、2003年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PKIX] Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &#34;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile&#34;, RFC 5280, May 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Pkix] Cooper、D.、Santesson、S.、Farrell、S.、Boeyen、S.、Housley、R.、およびW. Polk、「Internet X.509公開キーインフラストラクチャ証明書および証明書取消リスト（CRL）プロファイル&#34;、RFC 5280、2008年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4307] Schiller, J., &#34;Cryptographic Algorithms for Use in the Internet Key Exchange Version 2 (IKEv2)&#34;, RFC 4307, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RFC4307]シラー、J。、「インターネットキーエクスチェンジバージョン2（IKEV2）で使用する暗号化アルゴリズム」、RFC 4307、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[UDPENCAPS] Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M. Stenberg, &#34;UDP Encapsulation of IPsec ESP Packets&#34;, RFC 3948, January 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[udpencaps] Huttunen、A.、Swander、B.、Volpe、V.、Diburro、L。、およびM. Stenberg、「IPSEC ESPパケットのUDPカプセル化」、RFC 3948、2005年1月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[URLS] Berners-Lee, T., Fielding, R., and L. Masinter, &#34;Uniform Resource Identifier (URI): Generic Syntax&#34;, STD 66, RFC 3986, January 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[URLS] Berners-Lee、T.、Fielding、R。、およびL. Masinter、「Uniform Resource Identifier（URI）：Generic Syntax」、Std 66、RFC 3986、2005年1月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="8-2--Informative-References">
8.2. Informative References
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
8.2. 参考引用
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AH] Kent, S., &#34;IP Authentication Header&#34;, RFC 4302, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[AH] Kent、S。、「IP認証ヘッダー」、RFC 4302、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ARCHGUIDEPHIL] Bush, R. and D. Meyer, &#34;Some Internet Architectural Guidelines and Philosophy&#34;, RFC 3439, December 2002.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Archguidephil] Bush、R。and D. Meyer、「いくつかのインターネットアーキテクチャガイドラインと哲学」、RFC 3439、2002年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ARCHPRINC] Carpenter, B., &#34;Architectural Principles of the Internet&#34;, RFC 1958, June 1996.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ArchPrinc] Carpenter、B。、「インターネットの建築原理」、RFC 1958、1996年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Clarif] Eronen, P. and P. Hoffman, &#34;IKEv2 Clarifications and Implementation Guidelines&#34;, RFC 4718, October 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Clarif] Eronen、P。and P. Hoffman、「IKEV2の説明と実装ガイドライン」、RFC 4718、2006年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DES] American National Standards Institute, &#34;American National Standard for Information Systems-Data Link Encryption&#34;, ANSI X3.106, 1983.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Des] American National Standards Institute、「American National Standard for Information Systems-Data Link Encryption」、ANSI X3.106、1983。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DH] Diffie, W. and M. Hellman, &#34;New Directions in Cryptography&#34;, IEEE Transactions on Information Theory, V.IT-22 n. 6, June 1977.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DH] Diffie、W。およびM. Hellman、「暗号化の新しい方向」、IEEE情報理論に関するトランザクション、V.IT-22 n。6、1977年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DIFFSERVARCH] Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z., and W. Weiss, &#34;An Architecture for Differentiated Services&#34;, RFC 2475, December 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Diffservarch] Blake、S.、Black、D.、Carlson、M.、Davies、E.、Wang、Z.、およびW. Weiss、「差別化されたサービスの建築」、RFC 2475、1998年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DIFFSERVFIELD] Nichols, K., Blake, S., Baker, F., and D. Black, &#34;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers&#34;, RFC 2474, December 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Diffservfield] Nichols、K.、Blake、S.、Baker、F。、およびD. Black、「IPv4およびIPv6ヘッダーの差別化されたサービスフィールド（DSフィールド）の定義」、RFC 2474、1998年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DIFFTUNNEL] Black, D., &#34;Differentiated Services and Tunnels&#34;, RFC 2983, October 2000.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Difftunnel] Black、D。、「差別化されたサービスとトンネル」、RFC 2983、2000年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DOI] Piper, D., &#34;The Internet IP Security Domain of Interpretation for ISAKMP&#34;, RFC 2407, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[doi] Piper、D。、「ISAKMPの解釈のインターネットIPセキュリティドメイン」、RFC 2407、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DOSUDPPROT] C. Kaufman, R. Perlman, and B. Sommerfeld, &#34;DoS protection for UDP-based protocols&#34;, ACM Conference on Computer and Communications Security, October 2003.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Dosudpprot] C. Kaufman、R。Perlman、およびB. Sommerfeld、「UDPベースのプロトコルのDOS保護」、ACM Conference on Computer and Communications Security、2003年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DSS] National Institute of Standards and Technology, U.S. Department of Commerce, &#34;Digital Signature Standard&#34;, Draft FIPS 186-3, June 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[DSS]国立標準技術研究所、米国商務省、「デジタル署名標準」、ドラフトFIPS 186-3、2008年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAI] Abel, Y., &#34;Internationalized Email Headers&#34;, RFC 5335, September 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAI]アベル、Y。、「国際化された電子メールヘッダー」、RFC 5335、2008年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAP-IANA] &#34;Extensible Authentication Protocol (EAP) Registry: Method Types&#34;, &lt;http://www.iana.org&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAP-AIANA] &#34;拡張可能な認証プロトコル（EAP）レジストリ：メソッドタイプ&#34;、&lt;http://www.iana.org&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EAPMITM] N. Asokan, V. Nierni, and K. Nyberg, &#34;Man-in-the-Middle in Tunneled Authentication Protocols&#34;, November 2002, &lt;http://eprint.iacr.org/2002/163&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Eapmitm] N. Asokan、V。Nierni、およびK. Nyberg、「トンネル認証プロトコルの中間のザミドル」、2002年11月、&lt;http://eprint.iacr.org/2002/163&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESP] Kent, S., &#34;IP Encapsulating Security Payload (ESP)&#34;, RFC 4303, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ESP] Kent、S。、「セキュリティペイロード（ESP）のIPカプセル化」、RFC 4303、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[EXCHANGEANALYSIS] R. Perlman and C. Kaufman, &#34;Analysis of the IPsec key exchange Standard&#34;, WET-ICE Security Conference, MIT, 2001, &lt;http://sec.femto.org/wetice-2001/papers/radia-paper.pdf&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[交換分析] R. Perlman and C. Kaufman、「IPSEC Key Exchange Standardの分析」、Wet-Ice Security Conference、MIT、2001、&lt;http://sec.femto.org/wetice-2001/papers/radia-Paper.pdf&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[H2HIPSEC] Aura, T., Roe, M., and A. Mohammed, &#34;Experiences with Host-to-Host IPsec&#34;, 13th International Workshop on Security Protocols, Cambridge, UK, April 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[H2hipSec] Aura、T.、Roe、M。、およびA. Mohammed、「ホストツーホストIPSECの経験」、2005年4月、英国ケンブリッジ、セキュリティプロトコルに関する第13回国際ワークショップ。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[HMAC] Krawczyk, H., Bellare, M., and R. Canetti, &#34;HMAC: Keyed-Hashing for Message Authentication&#34;, RFC 2104, February 1997.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[HMAC] Krawczyk、H.、Bellare、M。、およびR. Canetti、「HMAC：メッセージ認証のためのキー付きハッシング」、RFC 2104、1997年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IDEA] X. Lai, &#34;On the Design and Security of Block Ciphers&#34;, ETH Series in Information Processing, v. 1, Konstanz: Hartung-Gorre Verlag, 1992.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[アイデア] X. Lai、「ブロック暗号の設計とセキュリティについて」、情報処理のETHシリーズ、v。1、Konstanz：Hartung-Gorre Verlag、1992。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IDNA] Klensin, J., &#34;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework&#34;, RFC 5890, August 2010.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IDNA] Klensin、J。、「アプリケーションの国際化ドメイン名（IDNA）：定義とドキュメントフレームワーク」、RFC 5890、2010年8月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV1] Harkins, D. and D. Carrel, &#34;The Internet Key Exchange (IKE)&#34;, RFC 2409, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV1] Harkins、D。およびD. Carrel、「The Internet Key Exchange（IKE）」、RFC 2409、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV2] Kaufman, C., &#34;Internet Key Exchange (IKEv2) Protocol&#34;, RFC 4306, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IKEV2] Kaufman、C。、「Internet Key Exchange（IKEV2）プロトコル」、RFC 4306、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IP] Postel, J., &#34;Internet Protocol&#34;, STD 5, RFC 791, September 1981.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IP] Postel、J。、「インターネットプロトコル」、STD 5、RFC 791、1981年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IP-COMP] Shacham, A., Monsour, B., Pereira, R., and M. Thomas, &#34;IP Payload Compression Protocol (IPComp)&#34;, RFC 3173, September 2001.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IP-Comp] Shacham、A.、Monsour、B.、Pereira、R。、およびM. Thomas、「IPペイロード圧縮プロトコル（IPComp）」、RFC 3173、2001年9月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IPSECARCH-OLD] Kent, S. and R. Atkinson, &#34;Security Architecture for the Internet Protocol&#34;, RFC 2401, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Ipsecarch-Old] Kent、S。およびR. Atkinson、「インターネットプロトコルのセキュリティアーキテクチャ」、RFC 2401、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IPV6CONFIG] Eronen, P., Laganier, J., and C. Madson, &#34;IPv6 Configuration in Internet Key Exchange Protocol Version 2 (IKEv2)&#34;, RFC 5739, February 2010.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[IPv6Config] Eronen、P.、Laganier、J。、およびC. Madson、「インターネットキー交換プロトコルバージョン2（IKEV2）のIPv6構成」、RFC 5739、2010年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ISAKMP] Maughan, D., Schneider, M., and M. Schertler, &#34;Internet Security Association and Key Management Protocol (ISAKMP)&#34;, RFC 2408, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ISAKMP] Maughan、D.、Schneider、M。、およびM. Schertler、「Internet Security Association and Key Management Protocol（ISAKMP）」、RFC 2408、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MAILFORMAT] Resnick, P., Ed., &#34;Internet Message Format&#34;, RFC 5322, October 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MailFormat] Resnick、P.、ed。、「インターネットメッセージ形式」、RFC 5322、2008年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MD5] Rivest, R., &#34;The MD5 Message-Digest Algorithm&#34;, RFC 1321, April 1992.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MD5] Rivest、R。、「MD5メッセージダイジェストアルゴリズム」、RFC 1321、1992年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MIPV6] Johnson, D., Perkins, C., and J. Arkko, &#34;Mobility Support in IPv6&#34;, RFC 3775, June 2004.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Mipv6] Johnson、D.、Perkins、C。、およびJ. Arkko、「IPv6のモビリティサポート」、RFC 3775、2004年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MLDV2] Vida, R. and L. Costa, &#34;Multicast Listener Discovery Version 2 (MLDv2) for IPv6&#34;, RFC 3810, June 2004.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MLDV2] Vida、R。およびL. Costa、「IPv6のマルチキャストリスナーディスカバリーバージョン2（MLDV2）」、RFC 3810、2004年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MOBIKE] Eronen, P., &#34;IKEv2 Mobility and Multihoming Protocol (MOBIKE)&#34;, RFC 4555, June 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Mobike] Eronen、P。、「IKEV2 Mobility and Multihoming Protocol（Mobike）」、RFC 4555、2006年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[MODES] National Institute of Standards and Technology, U.S. Department of Commerce, &#34;Recommendation for Block Cipher Modes of Operation&#34;, SP 800-38A, 2001.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[モード]国立標準技術研究所、米国商務省、「ブロック暗号運用モードの推奨」、SP 800-38A、2001。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[NAI] Aboba, B., Beadles, M., Arkko, J., and P. Eronen, &#34;The Network Access Identifier&#34;, RFC 4282, December 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Nai] Aboba、B.、Beadles、M.、Arkko、J。、およびP. Eronen、「ネットワークアクセス識別子」、RFC 4282、2005年12月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[NATREQ] Aboba, B. and W. Dixon, &#34;IPsec-Network Address Translation (NAT) Compatibility Requirements&#34;, RFC 3715, March 2004.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Natreq] Aboba、B。およびW. Dixon、「Ipsec-Networkアドレス翻訳（NAT）互換性要件」、RFC 3715、2004年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[OAKLEY] Orman, H., &#34;The OAKLEY Key Determination Protocol&#34;, RFC 2412, November 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Oakley] Orman、H。、「The Oakley Key Deicination Protocol」、RFC 2412、1998年11月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PFKEY] McDonald, D., Metz, C., and B. Phan, &#34;PF_KEY Key Management API, Version 2&#34;, RFC 2367, July 1998.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PFKEY] McDonald、D.、Metz、C。、およびB. Phan、「PF_KEY Key Management API、バージョン2」、RFC 2367、1998年7月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[PHOTURIS] Karn, P. and W. Simpson, &#34;Photuris: Session-Key Management Protocol&#34;, RFC 2522, March 1999.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Photuris] Karn、P。and W. Simpson、「Photuris：Session-Key Management Protocol」、RFC 2522、1999年3月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RANDOMNESS] Eastlake, D., Schiller, J., and S. Crocker, &#34;Randomness Requirements for Security&#34;, BCP 106, RFC 4086, June 2005.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ランダム性] Eastlake、D.、Schiller、J。、およびS. Crocker、「セキュリティのランダム性要件」、BCP 106、RFC 4086、2005年6月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[REAUTH] Nir, Y., &#34;Repeated Authentication in Internet Key Exchange (IKEv2) Protocol&#34;, RFC 4478, April 2006.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Reauth] Nir、Y。、「インターネットキーエクスチェンジ（IKEV2）プロトコルでの繰り返し認証」、RFC 4478、2006年4月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[REUSE] Menezes, A. and B. Ustaoglu, &#34;On Reusing Ephemeral Keys In Diffie-Hellman Key Agreement Protocols&#34;, December 2008, &lt;http://www.cacr.math.uwaterloo.ca/techreports/2008/ cacr2008-24.pdf&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[再利用] Menezes、A。and B. Ustaoglu、「Diffie-Hellman Key Agreement ProtocolsのEphemeral Keysの再利用について」、2008年12月&lt;http://www.cacr.math.uwaterloo.ca/techreports/2008/ CACR2008-24.pdf&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[ROHCV2] Ertekin, E., Christou, C., Jasani, R., Kivinen, T., and C. Bormann, &#34;IKEv2 Extensions to Support Robust Header Compression over IPsec&#34;, RFC 5857, May 2010.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Rohcv2] Ertekin、E.、Christou、C.、Jasani、R.、Kivinen、T。、およびC. Bormann、「IKEV2拡張機能IPSECでの堅牢なヘッダー圧縮をサポートする」、RFC 5857、2010年5月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RSA] R. Rivest, A. Shamir, and L. Adleman, &#34;A Method for Obtaining Digital Signatures and Public-Key Cryptosystems&#34;, February 1978.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[RSA] R. Rivest、A。Shamir、およびL. Adleman、「デジタル署名とパブリックキー暗号システムを取得する方法」、1978年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SHA] National Institute of Standards and Technology, U.S. Department of Commerce, &#34;Secure Hash Standard&#34;, FIPS 180-3, October 2008.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SHA]国立標準技術研究所、米国商務省、「Secure Hash Standard」、Fips 180-3、2008年10月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SIGMA] H. Krawczyk, &#34;SIGMA: the `SIGn-and-MAc&#39; Approach to Authenticated Diffie-Hellman and its Use in the IKE Protocols&#34;, Advances in Cryptography - CRYPTO 2003 Proceedings LNCS 2729, 2003, &lt;http:// www.informatik.uni-trier.de/~ley/db/conf/crypto/ crypto2003.html&gt;.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Sigma] H. Krawczyk、「Sigma：認証されたDiffie-HellmanとIKEプロトコルでのその使用に対する「サインアンドマック」アプローチ」、暗号化の進歩-Crypto 2003 Proceedings LNCS 2729、2003、&lt;http：//www.informatik.uni-trier.de/~ley/db/conf/crypto/ crypto2003.html&gt;。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[SKEME] H. Krawczyk, &#34;SKEME: A Versatile Secure Key Exchange Mechanism for Internet&#34;, IEEE Proceedings of the 1996 Symposium on Network and Distributed Systems Security , 1996.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[Skeme] H. Krawczyk、「Skeme：インターネット用の多目的な安全なキー交換メカニズム」、IEEEが1996年のネットワークおよび分散システムセキュリティに関するシンポジウムの議事録、1996年。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[TRANSPARENCY] Carpenter, B., &#34;Internet Transparency&#34;, RFC 2775, February 2000.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
[透明性] Carpenter、B。、「インターネット透明性」、RFC 2775、2000年2月。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="Appendix-A--Summary-of-Changes-from-IKEv1">
Appendix A. Summary of Changes from IKEv1
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
付録A. IKEV1からの変更の概要
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The goals of this revision to IKE are:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEへのこの改訂の目標は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. To define the entire IKE protocol in a single document, replacing RFCs 2407, 2408, and 2409 and incorporating subsequent changes to support NAT Traversal, Extensible Authentication, and Remote Address acquisition;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
1. 単一のドキュメントでIKEプロトコル全体を定義し、RFCS 2407、2408、および2409を置き換え、NATトラバーサル、拡張可能な認証、およびリモートアドレスの取得をサポートするための後続の変更を組み込みます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. To simplify IKE by replacing the eight different initial exchanges with a single four-message exchange (with changes in authentication mechanisms affecting only a single AUTH payload rather than restructuring the entire exchange) see [EXCHANGEANALYSIS];
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
2. 8つの異なる初期交換を単一の4メッセージ交換に置き換えることでIKEを簡素化するために（交換全体を再構築するのではなく、単一の認証ペイロードのみに影響を与える認証メカニズムの変更）[交換解析]を参照してください。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. To remove the Domain of Interpretation (DOI), Situation (SIT), and Labeled Domain Identifier fields, and the Commit and Authentication only bits;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
3. 解釈のドメイン（DOI）、状況（SIT）、およびラベル付きドメイン識別子フィールド、およびコミットと認証のみがビットのみを削除します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. To decrease IKE&#39;s latency in the common case by making the initial exchange be 2 round trips (4 messages), and allowing the ability to piggyback setup of a Child SA on that exchange;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
4. 初期交換を2ラウンドの旅行（4つのメッセージ）にし、その交換で子SAのセットアップを豚にバックする能力を可能にすることにより、一般的なケースでのIKEの遅延を減らすため。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. To replace the cryptographic syntax for protecting the IKE messages themselves with one based closely on ESP to simplify implementation and security analysis;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
5. IKEメッセージをESPに密接に基づいてIKEメッセージを保護するための暗号化構文を置き換えるために、実装とセキュリティ分析を簡素化します。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
6. To reduce the number of possible error states by making the protocol reliable (all messages are acknowledged) and sequenced. This allows shortening CREATE_CHILD_SA exchanges from 3 messages to 2;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
6. プロトコルを信頼できるものにすることで、可能なエラー状態の数を減らすため（すべてのメッセージが確認されます）、シーケンスされます。これにより、create_child_sa交換を3つのメッセージから2に短縮できます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
7. To increase robustness by allowing the responder to not do significant processing until it receives a message proving that the initiator can receive messages at its claimed IP address;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
7. イニシエーターが請求されたIPアドレスでメッセージを受信できることを証明するメッセージを受信するまで、レスポンダーが重要な処理を行わないようにすることにより、堅牢性を高めるため。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
8. To fix cryptographic weaknesses such as the problem with symmetries in hashes used for authentication (documented by Tero Kivinen);
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
8. 認証に使用されるハッシュの対称性の問題などの暗号化の弱点を修正するため（Tero Kivinenによって文書化）。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
9. To specify Traffic Selectors in their own payloads type rather than overloading ID payloads, and making more flexible the Traffic Selectors that may be specified;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
9. IDペイロードをオーバーロードするのではなく、独自のペイロードタイプでトラフィックセレクターを指定し、指定される可能性のあるトラフィックセレクターをより柔軟にするため。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
10. To specify required behavior under certain error conditions or when data that is not understood is received in order to make it easier to make future revisions in a way that does not break backward compatibility;
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
10. 特定のエラー条件下で必要な動作を指定するため、または理解されていないデータが受信された場合、将来の改訂を容易にしやすくするために、逆方向の互換性を破らないようにします。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
11. To simplify and clarify how shared state is maintained in the presence of network failures and DoS attacks; and
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
11. ネットワークの障害とDOS攻撃の存在下で共有状態がどのように維持されるかを簡素化および明確にする。と
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
12. To maintain existing syntax and magic numbers to the extent possible to make it likely that implementations of IKEv1 can be enhanced to support IKEv2 with minimum effort.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
12. IKEV1の実装を強化してIKEV2を最小限の努力でサポートできるようにするために、既存の構文とマジック番号を可能な限り維持するために。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="Appendix-B--Diffie-Hellman-Groups">
Appendix B. Diffie-Hellman Groups
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
付録B. diffie-hellmanグループ
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
There are two Diffie-Hellman groups defined here for use in IKE. These groups were generated by Richard Schroeppel at the University of Arizona. Properties of these primes are described in [OAKLEY].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
IKEで使用するためにここで定義されている2つのdiffie-hellmanグループがあります。これらのグループは、アリゾナ大学のリチャード・シュロッペルによって生成されました。これらの素数の特性は[Oakley]で説明されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The strength supplied by group 1 may not be sufficient for typical uses and is here for historic reasons.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
グループ1が提供する強度は、典型的な用途には十分ではなく、歴史的な理由でここにあります。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Additional Diffie-Hellman groups have been defined in [ADDGROUP].
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
追加のdiffie-hellmanグループは[addgroup]で定義されています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="B-1--Group-1---768-bit-MODP">
B.1. Group 1 - 768-bit MODP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.1. グループ1-768ビットMODP
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This group is assigned ID 1 (one).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このグループにはID 1（1）が割り当てられます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The prime is: 2^768 - 2 ^704 - 1 + 2^64 * { [2^638 pi] + 149686 } Its hexadecimal value is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
プライムは次のとおりです。2^768-2^704-1 2^64 * {[2^638 pi] 149686}その16進価値は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08 8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B 302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9 A63A3620 FFFFFFFF FFFFFFFF
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08 8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B 302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9 A63A3620 FFFFFFFF FFFFFFFF
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The generator is 2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
発電機は2です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="B-2--Group-2---1024-bit-MODP">
B.2. Group 2 - 1024-bit MODP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
B.2. グループ2-1024ビットMODP
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This group is assigned ID 2 (two).
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
このグループにはID 2（2）が割り当てられます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The prime is 2^1024 - 2^960 - 1 + 2^64 * { [2^894 pi] + 129093 }. Its hexadecimal value is:
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
プライムは2^1024-2^960-1 2^64 * {[2^894 pi] 129093}です。その16進価値は次のとおりです。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08 8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B 302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9 A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6 49286651 ECE65381 FFFFFFFF FFFFFFFF
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08 8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B 302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9 A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6 49286651 ECE65381 FFFFFFFF FFFFFFFF
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
The generator is 2.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
発電機は2です。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="Appendix-C--Exchanges-and-Payloads">
Appendix C. Exchanges and Payloads
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
付録C. 交換とペイロード
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
This appendix contains a short summary of the IKEv2 exchanges, and what payloads can appear in which message. This appendix is purely informative; if it disagrees with the body of this document, the other text is considered correct.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
この付録には、IKEV2交換の短い要約と、どのメッセージにどのようなペイロードが表示されるかが含まれています。この付録は純粋に有益です。このドキュメントの本文に同意しない場合、他のテキストは正しいと見なされます。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Vendor ID (V) payloads may be included in any place in any message. This sequence here shows what are the most logical places for them.
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ベンダーID（v）ペイロードは、任意のメッセージの任意の場所に含まれる場合があります。ここでのこのシーケンスは、彼らにとって最も論理的な場所が何であるかを示しています。
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-1--IKESAINIT-Exchange">
C.1. IKE_SA_INIT Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.1. IKE_SA_INIT Exchange
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   request             --&gt; [N(COOKIE)],
                           SA, KE, Ni,
                           [N(NAT_DETECTION_SOURCE_IP)+,
                            N(NAT_DETECTION_DESTINATION_IP)],
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   normal response     &lt;-- SA, KE, Nr,
   (no cookie)             [N(NAT_DETECTION_SOURCE_IP),
                            N(NAT_DETECTION_DESTINATION_IP)],
                           [[N(HTTP_CERT_LOOKUP_SUPPORTED)], CERTREQ+],
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   cookie response     &lt;-- N(COOKIE),
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
different Diffie- &lt;-- N(INVALID_KE_PAYLOAD), Hellman group [V+][N+] wanted
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
別のdiffie- &lt;-n（invalid_ke_payload）、hellmanグループ[v] [n] wakt
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-2--IKEAUTH-Exchange-without-EAP">
C.2. IKE_AUTH Exchange without EAP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.2. EAPなしのIKE_AUTH Exchange
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   request             --&gt; IDi, [CERT+],
                           [N(INITIAL_CONTACT)],
                           [[N(HTTP_CERT_LOOKUP_SUPPORTED)], CERTREQ+],
                           [IDr],
                           AUTH,
                           [CP(CFG_REQUEST)],
                           [N(IPCOMP_SUPPORTED)+],
                           [N(USE_TRANSPORT_MODE)],
                           [N(ESP_TFC_PADDING_NOT_SUPPORTED)],
                           [N(NON_FIRST_FRAGMENTS_ALSO)],
                           SA, TSi, TSr,
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
response &lt;-- IDr, [CERT+], AUTH, [CP(CFG_REPLY)], [N(IPCOMP_SUPPORTED)], [N(USE_TRANSPORT_MODE)], [N(ESP_TFC_PADDING_NOT_SUPPORTED)], [N(NON_FIRST_FRAGMENTS_ALSO)], SA, TSi, TSr, [N(ADDITIONAL_TS_POSSIBLE)], [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
応答&lt;-idr、[cert]、auth、[cpg_reply）]、[n（ipcomp_supported）]、[n（use_transport_mode）]、[n（esp_tfc_padding_not_supported）]、[n（non_first_fragments_also）]、sa、tsi、tsr、[n（addational_ts_possible）]、[v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
error in Child SA &lt;-- IDr, [CERT+], creation AUTH, N(error), [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
子SAのエラー&lt;-idr、[cert]、creation auth、n（error）、[v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-3--IKEAUTH-Exchange-with-EAP">
C.3. IKE_AUTH Exchange with EAP
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.3. IKE_AUTHとEAPと交換
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   first request       --&gt; IDi,
                           [N(INITIAL_CONTACT)],
                           [[N(HTTP_CERT_LOOKUP_SUPPORTED)], CERTREQ+],
                           [IDr],
                           [CP(CFG_REQUEST)],
                           [N(IPCOMP_SUPPORTED)+],
                           [N(USE_TRANSPORT_MODE)],
                           [N(ESP_TFC_PADDING_NOT_SUPPORTED)],
                           [N(NON_FIRST_FRAGMENTS_ALSO)],
                           SA, TSi, TSr,
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
first response &lt;-- IDr, [CERT+], AUTH, EAP, [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最初の応答&lt;-idr、[cert]、auth、eap、[v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
 / --&gt; EAP repeat 1..N times | \ &lt;-- EAP
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
/  - &gt; EAP Repeat 1..n times |\ &lt;-EAP
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
last request --&gt; AUTH
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最後のリクエスト - &gt; auth
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
last response &lt;-- AUTH, [CP(CFG_REPLY)], [N(IPCOMP_SUPPORTED)], [N(USE_TRANSPORT_MODE)], [N(ESP_TFC_PADDING_NOT_SUPPORTED)], [N(NON_FIRST_FRAGMENTS_ALSO)], SA, TSi, TSr, [N(ADDITIONAL_TS_POSSIBLE)], [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
最後の応答&lt; -  auth、[cpg_reply）]、[n（ipcomp_supported）]、[n（use_transport_mode）]、[n（esp_tfc_padding_not_supported）]]、[n（non_first_fragments_also）、sa（Addational_ts_possible）]、[v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-4--CREATECHILDSA-Exchange-for-Creating-or-Rekeying-Child-SAs">
C.4. CREATE_CHILD_SA Exchange for Creating or Rekeying Child SAs
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.4. CREATE_CHILD_SAは、子SASを作成または再キーリングするための交換を行います
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   request             --&gt; [N(REKEY_SA)],
                           [CP(CFG_REQUEST)],
                           [N(IPCOMP_SUPPORTED)+],
                           [N(USE_TRANSPORT_MODE)],
                           [N(ESP_TFC_PADDING_NOT_SUPPORTED)],
                           [N(NON_FIRST_FRAGMENTS_ALSO)],
                           SA, Ni, [KEi], TSi, TSr
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
normal &lt;-- [CP(CFG_REPLY)], response [N(IPCOMP_SUPPORTED)], [N(USE_TRANSPORT_MODE)], [N(ESP_TFC_PADDING_NOT_SUPPORTED)], [N(NON_FIRST_FRAGMENTS_ALSO)], SA, Nr, [KEr], TSi, TSr, [N(ADDITIONAL_TS_POSSIBLE)] [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
正常&lt; -  [cp（cfg_reply）]、response [n（ipcomp_supported）]、[n（use_transport_mode）]、[n（esp_tfc_padding_not_supported）]、tsr、[n（addational_ts_possible）] [v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
error case &lt;-- N(error)
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
エラーケース&lt;-n（エラー）
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
different Diffie- &lt;-- N(INVALID_KE_PAYLOAD), Hellman group [V+][N+] wanted
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
別のdiffie- &lt;-n（invalid_ke_payload）、hellmanグループ[v] [n] wakt
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-5--CREATECHILDSA-Exchange-for-Rekeying-the-IKE-SA">
C.5. CREATE_CHILD_SA Exchange for Rekeying the IKE SA
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.5. IKE SAを再キーリングするためのCreate_Child_sa Exchange
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   request             --&gt; SA, Ni, KEi
                           [V+][N+]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
response &lt;-- SA, Nr, KEr [V+][N+]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
応答&lt;-Sa、nr、ker [v] [n]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2" id="C-6--INFORMATIONAL-Exchange">
C.6. INFORMATIONAL Exchange
        </h5>
      </div>
      <div class="col-sm-12 col-md-6">
        <h5 class="text mt-2">
C.6. 情報交換
        </h5>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   request             --&gt; [N+],
                           [D+],
                           [CP(CFG_REQUEST)]
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
response &lt;-- [N+], [D+], [CP(CFG_REPLY)]
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
応答&lt; -  [n]、[d]、[cp（cfg_reply）]]
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
Authors&#39; Addresses
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-0">
著者のアドレス
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Charlie Kaufman Microsoft 1 Microsoft Way Redmond, WA 98052 US
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
チャーリーカウフマンマイクロソフト1マイクロソフトウェイレドモンド、ワシントン州98052 US
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Phone: 1-425-707-3335 EMail: charliek@microsoft.com
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
電話：1-425-707-3335メール：charliek@microsoft.com
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Paul Hoffman VPN Consortium 127 Segre Place Santa Cruz, CA 95060 US
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
ポールホフマンVPNコンソーシアム127セグレプレイスサンタクルス、カリフォルニア州95060米国
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Phone: 1-831-426-9827 EMail: paul.hoffman@vpnc.org
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
電話：1-831-426-9827メール：paul.hoffman@vpnc.org
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Yoav Nir Check Point Software Technologies Ltd. 5 Hasolelim St. Tel Aviv 67897 Israel
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
yoav nirチェックポイントソフトウェアテクノロジーズLtd. 5 Hasolelim St. Tel Aviv 67897イスラエル
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   EMail: ynir@checkpoint.com
        </pre>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pasi Eronen Independent
        </p>
      </div>
      <div class="col-sm-12 col-md-6">
        <p class="text indent-3">
Pasi Eronen Independent
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12">
        <pre class="text text-monospace">
   EMail: pe@iki.fi
        </pre>
      </div>

    </div>
  </div>
  <div id="rfc_footer"></div>
</body>
</html>
